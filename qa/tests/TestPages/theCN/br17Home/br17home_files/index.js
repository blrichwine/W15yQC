/**
 * jquery.Jcrop.min.js v0.9.12 (build:20130202)
 * jQuery Image Cropping Plugin - released under MIT License
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC
 * https://github.com/tapmodo/Jcrop
 */

define("tools/view/search",["jquery","underscore"],function(e,t){return function(){return{defaults:{type:"all",keyword:""},encodeURIComponent:function(n){var i=e.extend({},this.defaults,n),o={};return t.each(i,function(e,t){o[t]=e?encodeURIComponent(e):""}),o},decodeURIComponent:function(n){var i=e.extend({},this.defaults,n),o={};return t.each(i,function(e,t){o[t]=e?decodeURIComponent(e):""}),o}}}()}),define("text!templates/common/home-head/search-box.html",[],function(){return'<input class="search_input always_allow" type="text" placeholder="Search..." />\r\n<a id="search_bt" class="text-hide bt-search always_allow" href="javascript:;">Search</a>'}),define("views/common/home-head/search-box",["jquery","underscore","backbone","controller","tools/view/search","text!templates/common/home-head/search-box.html"],function(e,t,n,i,o,a){return n.View.extend({className:"block-search",template:a,events:{"keypress .search_input":"enterSearch","click #search_bt":"search"},enterSearch:function(e){13==e.keyCode&&this.search()},search:function(){var e=this.$(".search_input").val(),t=o.encodeURIComponent({keyword:e});return i.go("search",t.type,"keyword",t.keyword),!1}})}),define("modules/course/course",["jquery","underscore","backbone","tools/string-help"],function(e,t,n,i){return n.Model.extend({urlRoot:"api/course/",defaults:function(){return t.extend({type:"school_based",name:"",country_id:"",school_id:"",level:1,course_category_name:"",start_course_date:"",end_course_date:"",access_setting_id:"open",logo_url:"img/common/avatar/logo/default.png",country:{id:""},user_position:"",school:{url:""},instructors:[],instructional_users:[],user_score:{sub_total:0},create_from:"",tasks:[],allow_mooc:!1,enable_mooc:!1,is_end:!1},this.defaults_())},defaults_:function(){},initDefaults:function(){var n=this,o=["instructor","creater","assistant","coordinator","teaching_assistant","graduate_assistant","external_reviewer","instructional_designer","librarian"],a=n.get("user_score");a=t.extend(a,{display_sub_total:i.addCommas(a.sub_total)});var r={user_score:a},s=this.get("school");t.isString(s.url)&&s.url.length>0&&(s.url="http://"+s.url.replace(/http:\/\//,""));var l=e.inArray(n.get("user_position"),o)>-1,c=this.get("name");return t.extend({display_name:c,access_setting_string:n.displayAccessSetting(n.get("access_setting_id")),school:s,has_task:n.get("tasks").length>0,has_join:n.get("user_position").length>0,has_instructor:n.get("instructors").length>0,display_instructors_string:n.getDisplayInstructorsString(),has_instructional_users:n.get("instructional_users").length>0,can_manager:l,display_user_position:n.displayUserPosition(n.get("user_position")),display_user_position_sentence:n.displayUserPositionSentence(n.get("user_position")),is_open_type:"open"===n.get("access_setting_id"),is_email_type:"email"===n.get("access_setting_id"),is_code_type:"code"===n.get("access_setting_id"),is_no_one_type:"no_one"===n.get("access_setting_id"),is_fee_type:"fee"===n.get("access_setting_id"),is_not_available:!n.get("is_start")&&!n.get("is_end"),has_auth_read:n.get("user_position").length>0||"open"===n.get("access_setting_id"),can_invite:n.get("enable_mooc")||l},r)},getDisplayInstructorsString:function(){var e=this.get("instructors"),t="";if(e.length>0)for(var n in e)t+=e[n].display_name+", ";return t.substr(0,t.lastIndexOf(","))},initDefaults_:function(){},displayUserPosition:function(e){var t={instructor:"Instructor",student:"Student",coordinator:"Course Coordinator",teaching_assistant:"Teaching Assistant",graduate_assistant:"Graduate Assistant",external_reviewer:"External Reviewer",instructional_designer:"Instructional Designer",librarian:"Librarian",observer:"Observer"};return t[e]?t[e]:"Member"},displayUserPositionSentence:function(e){var t={instructor:"You're an Instructor in this Course",student:"You're a Student in this Course",coordinator:"You're a Course Coordinator in this Course",teaching_assistant:"You're a Teaching Assistant in this Course",graduate_assistant:"You're a Graduate Assistant in this Course",external_reviewer:"You're an External Reviewer in this Course",instructional_designer:"You're an Instructional Designer in this Course",librarian:"You're a Librarian in this Course",observer:"You're an Observer in this Course"};return t[e]?t[e]:"You're an Member in this Course"},displayAccessSetting:function(e){var t={code:"PIN",email:"Email request",no_one:"No one",open:"Any CN member"};return t[e]?t[e]:""}})}),define("collections/course/user-collection",["jquery","underscore","backbone","modules/course/course"],function(e,t,n,i){return n.Collection.extend({model:i,urlRoot:"api/user_course/",comparator:function(e){var n=e.get("display_name");return t.first(n.toLowerCase().split(""))}})}),define("modules/conexus/conexus",["jquery","underscore","backbone","tools/string-help"],function(e,t,n,i){return n.Model.extend({urlRoot:"api/conexus/",defaults:function(){return{name:"",country_id:"",about:"",logo_attachment_id:"",logo_url:"img/common/avatar/conexus/default.png",country:{id:""},user_position:"",moderators:[],user_score:{sub_total:0},is_end:!1,is_open_type:!0}},initDefaults:function(){var n=this,o=["moderator","creater"],a=n.get("user_score");a=t.extend(a,{display_sub_total:i.addCommas(a.sub_total)});var r={user_score:a};return t.extend({display_name:n.get("name"),has_join:n.get("user_position").length>0,has_moderator:n.get("moderators").length>0,can_manager:e.inArray(n.get("user_position"),o)>-1,display_user_position:n.get("user_position").ucfirst(),is_new:n.isNew(),display_user_sub_total:i.addCommas(n.get("user_score").sub_total),display_moderators_string:n.getDisplayModeratorsString()},r)},getDisplayModeratorsString:function(){var e=this.get("moderators"),t="";if(e.length>0)for(var n in e)t+=e[n].display_name+", ";return t.substr(0,t.lastIndexOf(","))},validateFields:function(){var e=[],t=this.validateName();t&&e.push(t);var n=this.validateCountry();return n&&e.push(n),{errors:e,result:!e.length}},validateName:function(){var e=this.get("name");return t.isUndefined(e)||!e.length?"Please input Conexus name.":void 0},validateCountry:function(){var e=this.get("country_id");return t.isUndefined(e)||!e.length?"Please select your country.":void 0}})}),define("views/common/home-head/master-menu/item",["jquery","underscore","backbone","modules/course/course","modules/conexus/conexus"],function(e,t,n,i,o){return n.View.extend({tagName:"li",initialize:function(){var e="",t="";this.model instanceof i&&(t="course",e=this.model.get("course_id")),this.model instanceof o&&(t="conexus",e=this.model.get("conexus_id"));var n=this.model.get("display_name"),a=this.model.get("can_manager")?'<a class="icon-img-1-edit-gray  r-float" href="'+t+"/edit/"+e+'">Edit</a>':"",r=a.length>0?"edit-side":"";this.$el.html('<a class="text l-float '+r+'" href="'+e+'" title="'+n+'">'+n+"</a>"+a+'<div class="clear"></div>')}})}),define("text!templates/common/loading/view.html",[],function(){return'<img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n'}),define("views/common/loading/view",["jquery","underscore","backbone","text!templates/common/loading/view.html"],function(e,t,n,i){return n.View.extend({className:"block-loading block-horizontal-loading",template:i})}),define("views/common/home-head/master-menu/list",["jquery","underscore","backbone","views/common/home-head/master-menu/item","views/common/loading/view"],function(e,t,n,i){return n.View.extend({className:"list-two",tagName:"ol",initialize:function(){t.bindAll(this,"addAll","addOne"),this.collection.on("fetch",this.addAll,this),this.collection.on("add",this.addOne,this),this.collection.trigger("fetch")},addAll:function(){this.$el.empty(),this.collection.each(this.addOne)},addOne:function(e){this.$el.append(new i({model:e}).render().view.el)}})}),define("text!templates/common/home-head/master-menu/main.html",[],function(){return'<div class="head _head">\r\n\r\n</div>\r\n<div class="main _main">\r\n\r\n</div>\r\n<div class="foot _foot">\r\n    \r\n</div>'}),define("views/common/home-head/master-menu/main",["jquery","underscore","backbone","views/common/home-head/master-menu/list","views/common/loading/view","collections/course/user-collection","text!templates/common/home-head/master-menu/main.html"],function(e,t,n,i,o,a,r){return n.View.extend({className:"block-wrap-club-list",template:r,afterRender:function(){var e=this;this.$("._main").html((new o).render().view.el),this.collection.addUrlParam({limit:999}),this.collection.fetch({silent:!0,resultTrue:function(n){e.$("._main").empty();var o=n.groupBy(function(e){return e.get("is_end")}),r=o["false"],s=o["true"];t.isArray(r)&&r.length>0&&e.$("._head").html(new i({collection:new a(r)}).render().view.el),t.isArray(s)&&s.length>0&&(e.$("._main").html("----------  Ended  ----------"),e.$("._foot").html(new i({collection:new a(s)}).render().view.el))},resultFalse:function(n){var i="";t.each(n,function(e){i+=e+"<br />"}),e.$el.html(i)}})}})}),define("text!templates/common/home-head/master-menu-my-courses.html",[],function(){return'<div class="head">\n    <h4>My Courses</h4>\n</div>\n<div class="main">\n    <ul class="list-one">\n        <li>\n            <a href="course/create">Create a Course</a>\n        </li>\n        <li>\n            <a href="search/course">Search for Course</a>\n        </li>\n    </ul>\n    <div class="list-wrap">\n        <div class="main" id="block_master_menu_course_list">\n            <div class="block-loading block-horizontal-loading">\n                <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/common/home-head/master-menu-my-courses",["jquery","underscore","backbone","collections/course/user-collection","views/common/home-head/master-menu/main","text!templates/common/home-head/master-menu-my-courses.html"],function(e,t,n,i,o,a){return n.View.extend({className:"block-master-menu-my-courses",template:a,beforeRender:function(){this.setViews({"#block_master_menu_course_list":new o({collection:new i,type:"courses"})})}})}),define("text!templates/common/home-head/master-menu-my-settings.html",[],function(){return'<div class="head">\n    <h4>Settings</h4>\n</div>\n<div class="main">\n    <ul>\n        <li>\n            <a class="" href="user/courses">My Courses</a>\n        </li>\n        <li>\n            <a class="" href="user/conexus">My Conexus</a>\n        </li>\n    </ul>\n    <ul>\n        <li>\n            <a class="" href="course/create">Create a Course</a>\n        </li>\n        <li>\n            <a class="" href="conexus/create">Create a Conexus</a>\n        </li>\n    </ul>\n    <ul>\n        <li>\n            <a href="user/settings">Email Notifications</a>\n        </li>\n        <li>\n            <a class="" href="user/password">Change Password</a>\n        </li>\n        <li>\n            <a class="" href="user/edit">Edit Profile</a>\n        </li>\n    </ul>\n    <ul>\n        <li>\n            <a id="logout" class="" href="user/logout">Logout</a>\n        </li>\n    </ul>\n</div>\n'}),define("views/common/home-head/master-menu-my-settings",["jquery","underscore","backbone","text!templates/common/home-head/master-menu-my-settings.html"],function(e,t,n,i){return n.View.extend({className:"block-master-menu-my-settings",template:i})}),define("tools/auto-close-element-window",["jquery"],function(e){return function(t,n,i){var o="data-autoclose-status";e(n).hover(function(){e(this).attr(o,"in")},function(){e(this).attr(o,"out")});var a=function(){setTimeout(function(){e(document).one("click",function(){"in"!=e(n).attr(o)&&("function"==typeof i?i.call(e(n)):e(n).remove())})},100)};a(),e(n).click(function(){a()}),t&&t.stopPropagation()}}),define("text!templates/common/float-box/_master.html",[],function(){return'<span class="text-hide arrow icon-float-tip-arrow">Arrow</span>\n<a class="text-hide bt-close-17 hide_float_box always_allow" href="javascript:;" title="close">Close</a>\n<div class="main">\n    <div class="center">\n\n    </div>\n</div>'}),define("views/common/float-box/_master",["jquery","underscore","backbone","tools/auto-close-element-window","text!templates/common/float-box/_master.html"],function(e,t,n,i,o){return n.View.extend({className:"block float-box",template:o,initialize:function(n){t.bindAll(this,"initialize_","beforeRender_","afterRender_");var i={arrow:{direction:"top",width:16},delay:"",display:{style:"show",afterShow:function(){},afterClose:function(){},showSpeed:1,closeSpeed:1},extraCss:{},isBindButtonElement:!1},n=n||{};this.options=e.extend(!0,i,n),this.initialize_(this.options)},initialize_:function(){},serialize:function(){},events:{"click .hide_float_box":"close"},beforeRender:function(){this.options.view&&"string"!=typeof this.options.view&&(this.setViews({".center":this.options.view}),this.beforeRender_())},beforeRender_:function(){},afterRender:function(){var t=this;this.options.view&&"string"==typeof this.options.view&&this.$(".center").html(this.options.view),t.setWrapPosition();var n=0,i=function(){setTimeout(function(){this.$(".arrow").length>0?t.setArrowPosition():100>n&&(++n,i())},10)};i(),e(window).resize(function(){t.setWrapPosition()}),e(window).keydown(function(e){27===e.keyCode&&t.close()}),this.options.delay&&setTimeout(function(){t.setWrapPosition()},this.options.delay),this.afterRender_()},afterRender_:function(){},getArrowPosition:function(){var e=this.options.arrow.direction,t=this.$(".arrow"),n=t.position(),i=this.options.arrow||{};return"top"===e?{top:i.top===void 0?n.top:n.top+i.top,left:i.offset===void 0?n.left:n.left+i.offset}:"left"===e?{top:i.offset===void 0?n.top:n.top+i.offset,left:i.left===void 0?n.left:n.left+i.left}:"right"===e?{top:i.offset===void 0?n.top:n.top+i.offset,right:i.left===void 0?n.left:n.left+i.left}:void 0},setArrowPosition:function(){this.$(".arrow").css(this.getArrowPosition())},getWrapPosition:function(){var t=this.options.arrow.width,n=this.options.arrow.height,i=this.options.arrow.direction,o=e(this.options.target),a=o.width(),r=o.height(),s=o.offset(),l=this.options.arrow||{};if("top"===i)return{top:l.top===void 0?s.top+r:s.top+r+l.top,left:l.offset===void 0?s.left+a/2-t/2:s.left+a/2-t/2-l.offset};if("left"===i){t=8,n=16;var c=8;return{top:l.offset===void 0?s.top-c:s.top-c-l.offset,left:l.left===void 0?s.left+a+t:s.left+a+t+l.left}}if("right"===i){t=8,n=16;var c=8,d=e(window).width();return{top:l.offset===void 0?s.top-c:s.top-c-l.offset,right:l.left===void 0?d-s.left+t-8:d-s.left+t-8+l.left}}},setWrapPosition:function(){this.$el.css(e.extend(!0,{},this.getWrapPosition(),this.options.extraCss))},initShow:function(t){var n=this;"show"===n.options.display.style?e(t).show(n.options.display.showSpeed,function(){"function"==typeof n.options.display.afterShow&&n.options.display.afterShow()}):"fade"===n.options.display.style?e(t).fadeIn(n.options.display.showSpeed,function(){"function"==typeof n.options.display.afterShow&&n.options.display.afterShow()}):"slide"===n.options.display.style&&e(t).slideDown(n.options.display.showSpeed,function(){"function"==typeof n.options.display.afterShow&&n.options.display.afterShow()})},initClose:function(t){var n=this;"show"===n.options.display.style?e(t).hide(n.options.display.closeSpeed,function(){"function"==typeof n.options.display.afterClose&&n.options.display.afterClose()}):"fade"===n.options.display.style?e(t).fadeOut(n.options.display.closeSpeed,function(){"function"==typeof n.options.display.afterClose&&n.options.display.afterClose()}):"slide"===n.options.display.style&&e(t).slideUp(n.options.display.closeSpeed,function(){"function"==typeof n.options.display.afterClose&&n.options.display.afterClose()})},show:function(t){var n=this;if(e(n.options.target).length>0&&!e(n.options.target).attr("locked")){var o=n.options.isBindButtonElement?t:"",a=this.render().view;n.viewElement=a.$el,e(n.options.target).attr("locked","locked"),e(n.viewElement).hide(),e("#wrapper").append(e(n.viewElement)),n.initShow(n.viewElement),i(o,a.$el,function(){n.close()})}},close:function(){var t=this;this.initClose(t.viewElement),e(t.options.target).removeAttr("locked"),setTimeout(function(){t.remove()},300)}})}),define("text!templates/common/home-head/master-menu.html",[],function(){return'<div class="item item-course">\r\n    <div class="title">\r\n        <a class="show_my_courses icon-arrow-down sub-menu sub-course always_allow" href="javascript:;">\r\n            Courses\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="item">\r\n    <div class="title">\r\n        <a href="user">\r\n            Home\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="item item-settings">\r\n    <div class="title">\r\n        <a class="show_my_settings icon-arrow-down sub-menu sub-set always_allow" href="javascript:;">\r\n            {{display_name}}\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="clear"></div>'}),define("views/common/home-head/master-menu",["jquery","underscore","backbone","views/common/home-head/master-menu-my-courses","views/common/home-head/master-menu-my-settings","views/common/float-box/_master","text!templates/common/home-head/master-menu.html"],function(e,t,n,i,o,a,r){return n.View.extend({className:"block-master-menu",template:r,events:{"click .show_my_courses":"showMyCourses","click .show_my_settings":"showMySettings"},initialize:function(){},serialize:function(){return this.model.toJSON()},showMyCourses:function(e){new a({view:new i,target:e.currentTarget,arrow:{offset:35},extraCss:{"z-index":99,position:"fixed",top:35},display:{style:"slide",showSpeed:"normal",closeSpeed:"normal"}}).show(e)},showMySettings:function(e){new a({view:new o,target:e.currentTarget,arrow:{offset:100},extraCss:{"z-index":99,position:"fixed",top:35},display:{style:"slide",showSpeed:"normal",closeSpeed:"normal"}}).show(e)}})}),define("tools/auto-close-view-window",["jquery"],function(e){return function(t,n,i){var o="data-autoclose-status";n.$el.hover(function(){e(this).attr(o,"in")},function(){e(this).attr(o,"out")});var a=function(){setTimeout(function(){e(document).one("click",function(){"in"!=n.$el.attr(o)&&("function"==typeof i?i.call(n):n.remove())})},100)};a(),n.$el.click(function(){a()}),t&&t.stopPropagation()}}),define("text!templates/common/home-head/alert-box/item/chat/item.html",[],function(){return'{{#actor}}\n<div class="l-float avatar-wrap">\n    <a class="show_avatar link_bypass" href="{{avatar.view_url}}">\n        <img src="{{avatar.view_url}}" alt="{{display_name}}" width="34px" />\n    </a>\n    <a class="web-id" href="{{cn_number}}">{{cn_number}}</a>\n</div>\n<div class="l-float message-wrap">\n    <div class="main">\n        <div class="center">\n            <a href="{{cn_number}}">{{display_name}}</a> wants to chat with you.\n        </div>\n        <div class="bottom">\n            <span>{{display_time}}</span>\n        </div>\n    </div>\n    <div class="foot">\n        <a class="bt bt-gray bt-disagree r-float chat_clear" href="javascript:;">CLEAR</a>\n        <a class="bt bt-blue r-float load_send_email_window chat_clear" href="javascript:;" data-id="{{id}}">EMAIL</a>\n        <div class="clear"></div>\n    </div>\n</div>\n<div class="clear"></div>\n{{/actor}}\n{{^actor}}\n    <div>\n        Actor is not exist.\n    </div>\n{{/actor}}'}),define("views/common/home-head/alert-box/chat/items/normal",["jquery","underscore","backbone","text!templates/common/home-head/alert-box/item/chat/item.html"],function(e,t,n,i){return n.View.extend({template:i,tagName:"li",events:{"click .chat_clear":"clear"},initialize:function(){this.model.view=this},serialize:function(){return this.model.toJSON()},clear:function(){var e=this;this.model.check({afterCheck:function(){e.model.collection.remove(e.model.get("id")),e.model.view.remove()}})}})}),define("text!templates/common/home-head/alert-box/no-message.html",[],function(){return'<div class="message-wrap">\n    <div class="main">\n        <div class="no-message">\n            {{message}}\n        </div>\n    </div>\n</div>'}),define("views/common/home-head/alert-box/no-message",["jquery","underscore","backbone","text!templates/common/home-head/alert-box/no-message.html"],function(e,t,n,i){return n.View.extend({template:i,tagName:"li",initialize:function(t){var n="There are no messages.";t&&"string"==e.type(t.message)&&(n=t.message),this.message=n},serialize:function(){var e=this;return{message:e.message}}})}),define("modules/message-system/email",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/email/",check:function(t){var n=this;this.save({status:"read"},{resultTrue:function(){n.view.remove(),"function"===e.type(t)&&t()}})}})}),define("modules/message-system/chat-miss",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/chat_miss/",check:function(e){var n=this;this.save({mark:"read"},{resultTrue:function(){n.view.remove(),e&&t.isFunction(e.afterCheck)&&e.afterCheck()}})},deleted:function(e){var n=this;this.destroy({resultTrue:function(){n.view.remove(),e&&t.isFunction(e.afterDeleted)&&e.afterDeleted()}})}})}),define("modules/message-system/user-notification",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/user_notification/",check:function(e){var n=this;this.save({mark:"read"},{resultTrue:function(){n.view.remove(),e&&t.isFunction(e.afterCheck)&&e.afterCheck()}})},deleted:function(e){var n=this;this.destroy({resultTrue:function(){n.view.remove(),e&&t.isFunction(e.afterDeleted)&&e.afterDeleted()}})}})}),define("modules/user/user-colleague",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/user_colleague/"})}),define("modules/message-system/user-colleague",["jquery","underscore","modules/user/user-colleague"],function(e,t,n){return n.extend({urlRoot:"api/user_colleague/",setDefaults:function(){this.has("model")&&this.set(this.get("model"))}})}),define("collections/message-system/message-system-collections",["jquery","underscore","backbone","modules/message-system/email","modules/message-system/chat-miss","modules/message-system/user-notification","modules/message-system/user-colleague"],function(e,t,n,i,o,a,r){var s=n.Collection.extend({urlRoot:"api/email/",model:i,clearAll:function(e){var n=this,o=new i({id:""});o.save({status:"read"},{resultTrue:function(){n.reset(),t.isFunction(e)&&e()}})}}),l=n.Collection.extend({urlRoot:"api/user_colleague_request/",model:r}),c=n.Collection.extend({urlRoot:"api/user_notification/",model:a,clearAll:function(e){var n=this,i=new a({id:""});i.save({mark:"read"},{resultTrue:function(){n.reset(),t.isFunction(e)&&e()}})}}),d=n.Collection.extend({urlRoot:"api/chat_miss/",model:o,clearAll:function(e){var n=this,i=new o({id:""});i.save({mark:"read"},{resultTrue:function(){n.reset(),t.isFunction(e)&&e()}})}}),u={EmailMessages:s,ColleagueMessages:l,NotificationMessages:c,ChatMessages:d};return{get:function(e){return u[e]}}}),define("text!templates/common/home-head/alert-box/index/chat.html",[],function(){return'    <span class="text-hide icon-float-tip-arrow">\r\n        Arrow\r\n    </span>\r\n    <a class=" text-hide bt-close-17 close_box" href="javascript:;" title="close">\r\n        Close\r\n    </a>\r\n	<div class="main">\r\n		<div class="top">\r\n			<h4 class="l-float">\r\n				<span class="">Missing Chat Requests</span>\r\n			</h4>\r\n            <div class="clear"></div>\r\n		</div>\r\n		<div class="center block_opera_wrap">\r\n			<ul id="block_alert_box_chat_list" class="_list">\r\n				<li>\r\n                    <div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n                </li>\r\n			</ul>\r\n		</div>\r\n	</div>\r\n'}),define("text!templates/common/home-head/alert-box/item/chat/opera-wrap.html",[],function(){return'{{#number}}\n    <a id="alert_box_chat_clear_all" class="l-float" href="javascript:;">Clear All</a>\n{{/number}}\n<a class="r-float" href="user/chat">Show History</a>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/chat/index",["jquery","underscore","backbone","tools/pop-up-window","views/common/home-head/alert-box/chat/items/normal","views/common/home-head/alert-box/no-message","collections/message-system/message-system-collections","text!templates/common/home-head/alert-box/index/chat.html","text!templates/common/home-head/alert-box/item/chat/opera-wrap.html"],function(e,t,n,i,o,a,r,s,l){var c=i.get("function"),d=r.get("ChatMessages"),u=n.View.extend({template:l,className:"opera-wrap opera_wrap",events:{"click #alert_box_chat_clear_all":"clearAll"},initialize:function(e){this.model.on("change",this.render,this),this.parent=e.parent},serialize:function(){return this.model.toJSON()},clearAll:function(){var e=this;c.confirm({content:"Are you sure to clear all of the chats?",yesCallBack:function(){e.collection.clearAll(function(){e.parent.deleted(),e.model.set({number:0})})}})}});return n.View.extend({template:s,className:"body block-float-down-box block-float-down-left-box block-alert-float-box",events:{"click .close_box":"deleted"},initialize:function(e){t.bindAll(this,"addAll","addOne","removeOne"),this.collection=new d,this.collection.on("all",this.refresh,this),this.collection.on("reset",this.addAll,this),this.collection.on("remove",this.removeOne,this),this.collection.on("remove",this.checkIsEmpty,this),this.parent=e.parent},afterRender:function(){var e=this,t=new u({model:this.model,collection:this.collection,parent:e});this.$("#block_alert_box_chat_list").before(t.render().view.el),this.collection.addUrlParam({with_chat_miss_user:1,mark:"unread"}),this.collection.fetch({resultFalse:function(){e.refresh()}})},addOne:function(e){var t=new o({model:e});this.$("._list").append(t.render().view.el)},deleted:function(){this.remove()},checkIsEmpty:function(){this.collection.isEmpty()&&this.remove()},refresh:function(){if(this.collection.isEmpty()){var e=new a({message:"There are no new chat requests."});this.$("._list").empty().append(e.render().view.el)}else this.$(".opera_wrap").show();this.model.set({number:this.collection.length})},addAll:function(){this.$("._list").empty(),this.collection.each(this.addOne)},removeOne:function(){this.model.sub(1)}})}),define("text!templates/common/home-head/alert-box/new-message-count.html",[],function(){return"{{number}}\n"}),define("views/common/home-head/alert-box/count",["jquery","underscore","backbone","text!templates/common/home-head/alert-box/new-message-count.html"],function(e,t,n,i){return n.View.extend({tagName:"b",template:i,serialize:function(){return this.model.toJSON()}})}),define("text!templates/common/home-head/alert-box/button/chat.html",[],function(){return'<div class="head _head">\n    <a class="text-hide icon-alert icon-alert-chat load_message always_allow" href="javascript:;" data-type="chat" >\n        chat\n    </a>\n    <div class="alert-box-item-count-wrap alert_box_item_count_wrap">\n        \n    </div>\n</div>\n<div class="main chat-main _main">\n\n</div>\n'}),define("views/common/home-head/alert-box/chat/button",["jquery","underscore","backbone","tools/auto-close-view-window","views/common/home-head/alert-box/chat/index","views/common/home-head/alert-box/count","modules/message-system/message-count-chat","text!templates/common/home-head/alert-box/button/chat.html"],function(e,t,n,i,o,a,r,s){return n.View.extend({className:"item _item",template:s,events:{"click .load_message":"loadMessage"},initialize:function(){t.bindAll(this,"refresh"),this.model=r,this.model.on("change",this.refresh,this)},afterRender:function(){this.refresh()},loadMessage:function(t){var n=this,a=e(t.currentTarget),r=a.closest("#block_head");r.find("._main, ._box").fadeOut(),this.$("._item ._main").empty();var s=new o({parent:n,model:this.model});a.closest("._item").find("._main").hide().html(s.render().view.el).fadeIn(),i(t,s)},refresh:function(){if(this.model.get("number")){var e=new a({model:this.model});this.$("._head .alert_box_item_count_wrap").html(e.render().view.el).fadeIn()}else this.$("._head .alert_box_item_count_wrap").fadeOut()}})}),define("text!templates/common/home-head/alert-box/item/colleague/item.html",[],function(){return'<div class="l-float avatar-wrap">\n    <a class="show_avatar link_bypass" href="{{avatar.view_url}}">\n        <img src="{{avatar.view_url}}" alt="{{display_name}}" width="34px" />\n    </a>\n    <a class="web-id" href="{{cn_number}}">{{cn_number}}</a>\n</div>\n<div class="l-float message-wrap">\n    <div class="main">\n        <div class="center">\n            <a href="{{cn_number}}">{{display_name}}</a> wants to add you as a colleague.\n        </div>\n        <div class="bottom">\n            <span>{{display_time}}</span>\n        </div>\n    </div>\n    <div class="foot">\n        <a class="bt bt-gray bt-disagree r-float colleague_reject" href="javascript:;">Reject</a>\n        <a class="bt bt-blue bt-agree r-float colleague_accept" href="javascript:;">Accept</a>\n        <div class="clear"></div>\n    </div>\n</div>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/request/items/normal",["jquery","underscore","backbone","text!templates/common/home-head/alert-box/item/colleague/item.html"],function(e,t,n,i){return n.View.extend({template:i,tagName:"li",events:{"click .colleague_accept":"accept","click .colleague_reject":"reject"},initialize:function(e){this.model=e&&t.has(e,"model")?e.model:new ColleagueMsgModel,this.model.view=this},serialize:function(){return this.model.toJSON()},accept:function(){this.model.addUrlParam({status:1}),this.model.save([],{resultTrue:function(e){e.collection.remove(e.get("id")),e.view.remove()}})},reject:function(){this.model.addUrlParam({status:0}),this.model.save([],{resultTrue:function(e){e.collection.remove(e.get("id")),e.view.remove()}})}})}),define("text!templates/common/home-head/alert-box/index/colleague.html",[],function(){return'    <span class="text-hide icon-float-tip-arrow">\r\n        Arrow\r\n    </span>\r\n    <a class=" text-hide bt-close-17 close_box" href="javascript:;" title="close">\r\n        Close\r\n    </a>\r\n	<div class="main">\r\n		<div class="top">\r\n			<h4 class="new_count">\r\n				<span>New Colleague Requests</span>\r\n			</h4>\r\n		</div>\r\n		<div class="center">\r\n			<ul id="block_alert_box_colleague_list" class="_list">\r\n                <li>\r\n                    <div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n                </li>\r\n			</ul>\r\n		</div>\r\n	</div>\r\n'}),define("views/common/home-head/alert-box/request/index",["jquery","underscore","backbone","views/common/home-head/alert-box/request/items/normal","views/common/home-head/alert-box/no-message","collections/message-system/message-system-collections","text!templates/common/home-head/alert-box/index/colleague.html"],function(e,t,n,i,o,a,r){var s=a.get("ColleagueMessages");return n.View.extend({template:r,className:"body block-float-down-box block-float-down-left-box block-alert-float-box",events:{"click .close_box":"deleted"},initialize:function(e){t.bindAll(this,"addAll","addOne","removeOne"),this.collection=new s,this.collection.on("all",this.refresh,this),this.collection.on("reset",this.addAll,this),this.collection.on("remove",this.removeOne,this),this.collection.on("remove",this.checkIsEmpty,this),this.parent=e.parent},afterRender:function(){var e=this;this.collection.fetch({resultFalse:function(){e.refresh()}})},addOne:function(e){var t=new i({model:e});this.$("._list").append(t.render().view.el)},deleted:function(){this.remove()},checkIsEmpty:function(){this.collection.isEmpty()&&this.remove()},refresh:function(){if(this.collection.isEmpty()){var e=new o({message:"There are no new colleague requests."});
this.$("._list").empty().append(e.render().view.el)}else this.$(".opera_wrap").show();this.model.set({number:this.collection.length})},addAll:function(){this.$("._list").empty(),this.collection.each(this.addOne)},removeOne:function(){this.model.sub(1)}})}),define("text!templates/common/home-head/alert-box/button/colleague.html",[],function(){return'<div class="head _head">\n    <a class="text-hide icon-alert icon-alert-colleague load_message always_allow" href="javascript:;" data-type="request" >\n        colleague\n    </a>\n    <div class="alert-box-item-count-wrap alert_box_item_count_wrap">\n        \n    </div>\n</div>\n<div class="main colleague-main _main">\n\n</div>\n'}),define("views/common/home-head/alert-box/request/button",["jquery","underscore","backbone","tools/auto-close-view-window","views/common/home-head/alert-box/request/index","views/common/home-head/alert-box/count","modules/message-system/message-count-request","text!templates/common/home-head/alert-box/button/colleague.html"],function(e,t,n,i,o,a,r,s){return n.View.extend({className:"item _item",template:s,events:{"click .load_message":"loadMessage"},initialize:function(){t.bindAll(this,"refresh"),this.model=r,this.model.on("change",this.refresh,this)},afterRender:function(){this.refresh()},loadMessage:function(t){var n=this,a=e(t.currentTarget),r=a.closest("#block_head");r.find("._main, ._box").fadeOut(),this.$("._item ._main").empty();var s=new o({parent:n,model:this.model});a.closest("._item").find("._main").hide().html(s.render().view.el).fadeIn(),i(t,s)},refresh:function(){if(this.model.get("number")){var e=new a({model:this.model});this.$("._head .alert_box_item_count_wrap").html(e.render().view.el).fadeIn()}else this.$("._head .alert_box_item_count_wrap").fadeOut()}})}),define("modules/message-system/normal-email",["jquery","underscore","modules/message-system/email"],function(e,t,n){return n.extend({init:function(){this.set({type:"normal"})}})}),define("text!templates/common/home-head/alert-box/item/email/item-normal.html",[],function(){return'<div class="l-float avatar-wrap">\n    <a class="show_avatar link_bypass" href="{{sender.avatar.view_url}}">\n        <img src="{{sender.avatar.view_url}}" alt="{{sender.display_name}}" width="34px" />\n    </a>\n    <a class="web-id" href="{{sender.cn_number}}">{{sender.cn_number}}</a>\n</div>\n<div class="l-float message-wrap">\n    <div class="main">\n        <div class="center">\n            CN Mail from <a href="{{sender.cn_number}}">{{sender.fullname}}</a>\n        </div>\n        <div class="bottom">\n            <span>{{display_time}}</span>\n        </div>\n    </div>\n    <div class="foot">\n        <a class="bt bt-blue bt-agree r-float check_email" href="user/email/{{#is_reply_email}}{{parent_email_id}}{{/is_reply_email}}{{^is_reply_email}}{{id}}{{/is_reply_email}}">View</a>\n        <div class="clear"></div>\n    </div>\n</div>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/email/items/normal",["jquery","underscore","backbone","modules/message-system/normal-email","text!templates/common/home-head/alert-box/item/email/item-normal.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"li",events:{"click .check_email":"check"},initialize:function(){t.bindAll(this,"check");var e=this.model.collection;this.model=new i(this.model.toJSON()),this.model.view=this,this.model.collection=e},serialize:function(){return this.model.toJSON()},check:function(){return this.model.collection.remove(this.model.get("id")),this.model.check(),!0}})}),define("modules/user/course-user",["jquery","underscore","backbone","tools/string-help"],function(e,t,n,i){return n.Model.extend({urlRoot:"api/course_user/",defaults:function(){return{score:{sub_total_seeds:0,sub_total:0}}},initDefaults:function(){var e=this,n=e.get("score");n=t.extend(n,{display_sub_total:i.addCommas(n.sub_total)});var o={score:n};return t.extend({},o)}})}),define("modules/message-system/course-apply-email",["jquery","underscore","modules/message-system/email","modules/user/course-user"],function(e,t,n,i){return n.extend({init:function(){this.set({type:"course-apply"});var e=this.get("extra_data")[0].value;this.course_user=new i({id:e})},accept:function(){var e=this,t=this.get("sender");e.check(function(){e.course_user.save({user_id:t.id},{resultTrue:function(){}})})},reject:function(){var e=this,t=this.get("sender");this.course_user.addUrlParam({user_id:t.id}),e.check(function(){e.course_user.destroy({resultTrue:function(){}})})}})}),define("text!templates/common/home-head/alert-box/item/email/item-course-apply.html",[],function(){return'<div class="l-float avatar-wrap">\n    <a class="show_avatar link_bypass" href="{{sender.avatar.view_url}}">\n        <img src="{{sender.avatar.view_url}}" alt="{{sender.display_name}}" width="34px" />\n    </a>\n    <a class="web-id" href="{{sender.cn_number}}">{{sender.cn_number}}</a>\n</div>\n<div class="l-float message-wrap">\n    <div class="main">\n        <div class="center">\n            <a href="{{sender.cn_number}}">{{sender.fullname}}</a> has emailed a request to join your course . Please Accept or Reject the request below.\n        </div>\n        <div class="bottom">\n            <span>{{display_time}}</span>\n        </div>\n    </div>\n    <div class="foot">\n        <a class="bt bt-gray bt-disagree r-float reject_apply_course" href="javascript:;">Ignore</a>\n        <a class="bt bt-blue bt-agree r-float accept_apply_course" href="javascript:;">Accept</a>\n        <div class="clear"></div>\n    </div>\n</div>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/email/items/course-apply",["jquery","underscore","backbone","modules/message-system/course-apply-email","text!templates/common/home-head/alert-box/item/email/item-course-apply.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"li",events:{"click .accept_apply_course":"accept","click .reject_apply_course":"reject"},initialize:function(){t.bindAll(this,"accept","reject");var e=this.model.collection;this.model=new i(this.model.toJSON()),this.model.view=this,this.model.collection=e},serialize:function(){return this.model.toJSON()},accept:function(){this.model.collection.remove(this.model.get("id")),this.model.accept()},reject:function(){this.model.collection.remove(this.model.get("id")),this.model.reject()}})}),define("modules/message-system/course-invite-email",["jquery","underscore","modules/message-system/email","controller","modules/user/course-user"],function(e,t,n,i,o){return n.extend({init:function(){this.set({type:"course-invite"});var e=t.first(this.get("extra_data")),n=e.value;this.course_user=new o({id:n}),this.course_number=e.course_number},accpet:function(){var e=this,t=this.get("id");e.check(function(){e.course_user.save({invite_email_id:t},{resultTrue:function(){i.go(e.course_number)}})})},reject:function(){var e=this;e.check()}})}),define("text!templates/common/home-head/alert-box/item/email/item-course-invite.html",[],function(){return'<div class="l-float avatar-wrap">\n    <a class="show_avatar link_bypass" href="{{sender.avatar.view_url}}">\n        <img src="{{sender.avatar.view_url}}" alt="{{sender.display_name}}" width="34px" />\n    </a>\n    <a class="web-id" href="{{sender.cn_number}}">{{sender.cn_number}}</a>\n</div>\n<div class="l-float message-wrap">\n    <div class="main">\n        <div class="center">\n            {{#sender}}<a href="{{cn_number}}">{{display_name}}</a>{{/sender}} has invited you to join the Course {{#value}}<a href="{{course_number}}">{{course_name}}</a>{{/value}}. Please Accept or Reject the request below.\n        </div>\n        <div class="bottom">\n            <span>{{display_time}}</span>\n        </div>\n    </div>\n    <div class="foot">\n        <a class="bt bt-gray bt-disagree r-float reject_invited" href="javascript:;">Ignore</a>\n        <a class="bt bt-blue bt-agree r-float accept_invited" href="javascript:;">Accept</a>\n        <div class="clear"></div>\n    </div>\n</div>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/email/items/course-invite",["jquery","underscore","backbone","modules/message-system/course-invite-email","text!templates/common/home-head/alert-box/item/email/item-course-invite.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"li",events:{"click .accept_invited":"accept","click .reject_invited":"reject"},initialize:function(){var e=this.model.collection;this.model=new i(this.model.toJSON()),this.model.collection=e,this.model.view=this},serialize:function(){var t=this.model.get("extra_data"),n=e.extend({},{value:t[0]},this.model.toJSON());return n},accept:function(){return this.model.collection.remove(this.model.get("id")),this.model.accpet(),!0},reject:function(){return this.model.collection.remove(this.model.get("id")),this.model.reject(),!0}})}),define("modules/user/conexus-user",["jquery","underscore","backbone","tools/string-help"],function(e,t,n,i){return n.Model.extend({urlRoot:"api/conexus_user/",defaults:function(){return{score:{sub_total_seeds:0,sub_total:0}}},initDefaults:function(){var e=this,n=e.get("score");n=t.extend(n,{display_sub_total:i.addCommas(n.sub_total)});var o={score:n};return t.extend({},o)}})}),define("modules/message-system/conexus-invite-email",["jquery","underscore","modules/message-system/email","controller","modules/user/conexus-user"],function(e,t,n,i,o){return n.extend({init:function(){this.set({type:"conexus-invite"});var e=t.first(this.get("extra_data")),n=e.value;this.conexus_user=new o({id:n}),this.conexus_number=e.conexus_number},accpet:function(){var e=this,t=this.get("id");e.check(function(){e.conexus_user.save({invite_email_id:t},{resultTrue:function(){i.go(e.conexus_number)}})})},reject:function(){var e=this;e.check()}})}),define("views/common/home-head/alert-box/email/items/conexus-invite",["jquery","underscore","backbone","modules/message-system/conexus-invite-email","text!templates/common/home-head/alert-box/item/email/item-course-invite.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"li",events:{"click .accept_invited":"accept","click .reject_invited":"reject"},initialize:function(){t.bindAll(this,"accept","reject");var e=this.model.collection;this.model=new i(this.model.toJSON()),this.model.view=this,this.model.collection=e},serialize:function(){var t=this.model.get("extra_data"),n=e.extend({},{value:t[0]},this.model.toJSON());return n},accept:function(){return this.model.collection.remove(this.model.get("id")),this.model.accpet(),!0},reject:function(){return this.model.collection.remove(this.model.get("id")),this.model.reject(),!0}})}),define("text!templates/common/home-head/alert-box/index/email.html",[],function(){return'    <span class="text-hide icon-float-tip-arrow">\r\n        Arrow\r\n    </span>\r\n    <a class=" text-hide bt-close-17 close_box" href="javascript:;" title="close">\r\n        Close\r\n    </a>\r\n	<div class="main">\r\n		<div class="top">\r\n			<h4 class="new_count">\r\n				<span>New Emails</span>\r\n			</h4>\r\n		</div>\r\n		<div class="center block_opera_wrap">\r\n			<ul id="block_alert_box_email_list" class="_list">\r\n				<li>\r\n                    <div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n                </li>\r\n			</ul>\r\n		</div>\r\n	</div>\r\n'}),define("text!templates/common/home-head/alert-box/item/email/opera-wrap.html",[],function(){return'{{#number}}\n    <a id="alert_box_email_clear_all" class="l-float" href="javascript:;">Clear All</a>\n{{/number}}\n<a class="r-float" href="user/email">Show History</a>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/email/index",["jquery","underscore","backbone","tools/pop-up-window","views/common/home-head/alert-box/email/items/normal","views/common/home-head/alert-box/email/items/course-apply","views/common/home-head/alert-box/email/items/course-invite","views/common/home-head/alert-box/email/items/conexus-invite","views/common/home-head/alert-box/no-message","collections/message-system/message-system-collections","text!templates/common/home-head/alert-box/index/email.html","text!templates/common/home-head/alert-box/item/email/opera-wrap.html"],function(e,t,n,i,o,a,r,s,l,c,d,u){var m=i.get("function"),h=c.get("EmailMessages"),p={normal:o,course_apply:a,course_invite:r,conexus_invite:s},f=n.View.extend({template:u,className:"opera-wrap",events:{"click #alert_box_email_clear_all":"clearAll"},initialize:function(e){this.model.on("change",this.render,this),this.parent=e.parent},serialize:function(){return this.model.toJSON()},clearAll:function(){var e=this;m.confirm({content:"Are you sure to clear all of the emails?",yesCallBack:function(){e.collection.clearAll(function(){e.parent.deleted(),e.model.set({number:0})})}})}});return n.View.extend({template:d,className:"body block-float-down-box block-float-down-left-box block-alert-float-box",events:{"click .close_box":"deleted"},initialize:function(e){t.bindAll(this,"addAll","addOne","removeOne"),this.collection=new h,this.collection.on("all",this.refresh,this),this.collection.on("reset",this.addAll,this),this.collection.on("remove",this.removeOne,this),this.collection.on("remove",this.checkIsEmpty,this),this.parent=e.parent},afterRender:function(){var e=this,t=new f({model:this.model,collection:this.collection,parent:e});this.$("#block_alert_box_email_list").before(t.render().view.el),this.collection.addUrlParam({with_email_extra_data:1,with_email_sender:1,email_list_type:"unread"}),this.collection.fetch({resultFalse:function(){e.refresh()}})},addOne:function(e){var t=e.get("type"),n=new p[t]({model:e});this.$("._list").append(n.render().view.el)},deleted:function(){this.remove()},checkIsEmpty:function(){this.collection.isEmpty()&&this.remove()},refresh:function(){if(this.collection.isEmpty()){var e=new l({message:"There are no new emails."});this.$("._list").empty().append(e.render().view.el)}else this.$(".opera_wrap").show();this.model.set({number:this.collection.length})},addAll:function(){this.$("._list").empty(),this.collection.each(this.addOne)},removeOne:function(){this.model.sub(1)}})}),define("text!templates/common/home-head/alert-box/button/email.html",[],function(){return'<div class="head _head">\n    <a class="text-hide icon-alert icon-alert-email load_message always_allow" href="javascript:;" data-type="email" >\n        email\n    </a>\n    <div class="alert-box-item-count-wrap alert_box_item_count_wrap">\n        \n    </div>\n</div>\n<div class="main email-main _main">\n\n</div>\n'}),define("views/common/home-head/alert-box/email/button",["jquery","underscore","backbone","tools/auto-close-view-window","views/common/home-head/alert-box/email/index","views/common/home-head/alert-box/count","modules/message-system/message-count-email","text!templates/common/home-head/alert-box/button/email.html"],function(e,t,n,i,o,a,r,s){return n.View.extend({className:"item _item",template:s,events:{"click .load_message":"loadMessage"},initialize:function(){t.bindAll(this,"refresh"),this.model=r,this.model.on("change",this.refresh,this)},afterRender:function(){this.refresh()},loadMessage:function(t){var n=this,a=e(t.currentTarget),r=a.closest("#block_head");r.find("._main, ._box").fadeOut(),this.$("._item ._main").empty();var s=new o({parent:n,model:this.model});a.closest("._item").find("._main").hide().html(s.render().view.el).fadeIn(),i(t,s)},refresh:function(){if(this.model.get("number")){var e=new a({model:this.model});this.$("._head .alert_box_item_count_wrap").html(e.render().view.el).fadeIn()}else this.$("._head .alert_box_item_count_wrap").fadeOut()}})}),define("text!templates/common/home-head/alert-box/item/notification/avater.html",[],function(){return'<a class="show_avatar link_bypass" href="{{avatar.view_url}}">\n    <img src="{{avatar.view_url}}" alt="{{display_name}}" width="34px" />\n</a>\n<a class="web-id" href="{{cn_number}}">{{cn_number}}</a>\n'}),define("views/common/home-head/alert-box/notification/items/avatar",["jquery","underscore","backbone","text!templates/common/home-head/alert-box/item/notification/avater.html"],function(e,t,n,i){return n.View.extend({template:i,className:"avatar-wrap",serialize:function(){return t.first(this.model.get("users"))}})}),define("text!templates/common/home-head/alert-box/item/notification/master_.html",[],function(){return'<div class="l-float block_avatar_wrap">\n    <div>\n        \n    </div>\n</div>\n<div class="r-float block_message_wrap">\n    \n</div>\n<div class="clear"></div>\n'}),define("views/common/home-head/alert-box/notification/items/master_",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/avatar","text!templates/common/home-head/alert-box/item/notification/master_.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"li",className:"block_alert_box_notification_item",events:{"click .check_notification":"check","click .delete_notification":"deleted"},initialize:function(e){t.bindAll(this,"beforeRender_"),this.model.view=this,this.options=e?e:{}},beforeRender:function(){var e=this;this.setViews({".block_avatar_wrap":new i({model:e.model})}),this.beforeRender_()},beforeRender_:function(){},check:function(){var e=this;return this.model.check({afterCheck:function(){e.model.collection.remove(e.model.get("id"))}}),!0},deleted:function(){return this.model.deleted(),!0}})}),define("text!templates/common/home-head/alert-box/item/notification/item-like-content.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>liked</b> your <a href="content/view/{{value.id}}">{{value.type}}</a>.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>liked</b> your {{type}}\n            , but this {{type}} has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/like-content",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-like-content.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/loading/head-horizontal.html",[],function(){return'<div class="block-loading block-horizontal-loading block_loading">\r\n	<img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n</div>'}),define("text!templates/common/more-operation.html",[],function(){return'<div class="main get_more_operation_box">\r\n	<a href="javascript:;" class="get_more always_allow">\r\n		SHOW MORE\r\n	</a>\r\n</div>'}),function(e){var t={load:function(){},scrollTarget:null,heightOffset:"auto"},n=function(t,n){var i=e(n.scrollTarget);if(0!=e(t).scrollTop())if(e(t).length>0&&e(t).is(":visible")&&location.href==n.url){var o=!1;o="auto"===n.heightOffset||n.heightOffset>=e(t).height()?(e(t).scrollTop()+e(t).height())/i.height()>=.7:e(t).scrollTop()+n.heightOffset+e(t).height()>=i.height(),o&&n.load()}else e(t).stopScrollPagination()};e.fn.scrollPagination=function(i){var o=e.extend({},t,i,{url:location.href});return o.scrollTarget?(e(this).unbind("scroll"),e(this).attr("scrollPagination","enabled"),e(this).scroll(function(t){"enabled"==e(this).attr("scrollPagination")?n(this,o):t.stopPropagation()}),e(this)):(console.error("the scrollTarget is missing"),!1)},e.fn.stopScrollPagination=function(){return e(this).attr("scrollPagination","disabled")}}(jQuery),define("jqueryScrollPagination",function(){}),define("views/common/more-operation",["jquery","underscore","backbone","text!templates/loading/head-horizontal.html","text!templates/common/more-operation.html","jqueryScrollPagination"],function(e,t,n,i,o){return n.View.extend({className:"block-more-operation",template:o,events:{"click .get_more":"getMore"},initialize:function(t){this._tmpData={},this.view={initMinLimit:10,limit:20,scrollTarget:e(document),scrollTargetWrap:e(window),heightOffset:"auto",removeTemplateNoMore:!0,noMoreCallback:function(){},loadingCallback:function(){}},t.view&&t.view&&(this.view=e.extend(this.view,t.view)),this._tmpData.offset=0,this._tmpData.bindScrollPagination=!1,this.collection.on("add",this.render,this),this.collection.on("reset",this.render,this),this.collection&&this.view.initMinLimit<=this.collection.length?(this._tmpData.scrollLoadMore=!0,this._tmpData.offset=this.collection.length):this._tmpData.scrollLoadMore=!1},beforeRender:function(){return this._tmpData.scrollLoadMore?void 0:this.el=""},afterRender:function(){var t=this;return this._tmpData.scrollLoadMore?(t._tmpData.scrollLoadMore&&!t._tmpData.bindScrollPagination&&(t._tmpData.bindScrollPagination=!0,t._tmpData.scrollPagination=e(t.view.scrollTargetWrap).scrollPagination({heightOffset:t.view.heightOffset,scrollTarget:t.view.scrollTarget,callbackContext:t,load:function(){this.callbackContext.getMore()}})),void 0):this.el=""},getMore:function(){var t=this;if(!t._tmpData.scrollLoadMore)return!1;var n=function(e){t.$(".main").html(e)},o=function(){t._tmpData.scrollLoadMore=!1,t._tmpData.scrollPagination.stopScrollPagination(),t.view.removeTemplateNoMore?t.$el.parent().remove():n("<span>NO MORE</span>"),t.view.noMoreCallback()},a=t.$(".main").html();t._tmpData.scrollLoadMore&&t._tmpData.offset>0&&(n(i),t.view.loadingCallback(),t._tmpData.scrollLoadMore=!1,t.collection.fetch({add:!0,data:e.param({limit:t.view.limit,offset:t._tmpData.offset}),resultTrue:function(e,i){!i.data||t.view.limit>i.data.length?o():i.extra_data&&i.extra_data.next_offset?t._tmpData.offset<i.extra_data.next_offset?(t._tmpData.offset=i.extra_data.next_offset,t._tmpData.scrollLoadMore=!0,n(a)):o():o()},resultFalse:function(){o()}}))}})}),define("modules/user/user-following",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/user_following/"})}),define("tools/view/user-relation-manager",["jquery","underscore","modules/user/user-following","modules/user/user-colleague"],function(e,t,n,i){return function(){return{addColleague:function(e){var t=new i;t.save({colleague_user_id:e.get("id")},{resultTrue:function(){e.set({display_is_my_pending_colleague_user:!0})}})},removeColleague:function(e){var t=new i({id:e.get("id")});t.destroy({resultTrue:function(){e.set({display_is_my_colleague_user:!1,display_colleague_count:e.get("display_colleague_count")-1})}})},addFollowing:function(e){var t=new n;t.save({follow_user_id:e.get("id")},{resultTrue:function(){e.set({display_is_my_following_user:!0,display_follower_count:e.get("display_follower_count")+1})}})},removeFollowing:function(e){var t=new n({id:e.get("id")});t.destroy({resultTrue:function(){e.set({display_is_my_following_user:!1,display_follower_count:e.get("display_follower_count")-1})}})}}}()}),define("text!templates/content/relation/good.html",[],function(){return'<div class="sidebar l-float">\r\n    {{#avatar}}\r\n    <div class="top">\r\n        <a class="avatar avatar-61 show_avatar link_bypass" href="{{view_url}}">\r\n            <img src="{{view_url}}" alt="{{display_name}}" />\r\n        </a>\r\n    </div>\r\n    {{/avatar}}\r\n    <div class="bottom">\r\n        <span>{{cn_number}}</span>\r\n    </div>\r\n</div>\r\n<div class="content l-float">\r\n    <div class="top">\r\n        <a class="text show_card window_directed" href="javascript:;" data-href="{{cn_number}}" data-type="user" data-id="{{id}}">\r\n            {{display_name}}\r\n        </a>,\r\n        {{#profile}}\r\n            {{#position}}\r\n                {{#school_name}}\r\n                <a class="text link_bypass" {{#web_address}}href="{{web_address}}"{{/web_address}} target="_blank" title="{{school_name}}">\r\n                    {{school_name}}\r\n                </a>\r\n                {{/school_name}}\r\n            {{/position}}\r\n        {{/profile}}\r\n        {{#country}}\r\n            {{#flag_url}}\r\n            <a class="r-float flag-b" href="javascript:;">\r\n                <img src="{{flag_url}}" title="{{name}}" alt="{{name}}" />\r\n            </a>\r\n            {{/flag_url}}\r\n        {{/country}}\r\n    </div>\r\n    <div class="center visibility-hidden _operate">\r\n        <table class="block-user-relation-opt">\r\n             <thead>\r\n                 <tr>\r\n                    <th>\r\n                        <a class="link load_send_email_window" href="javascript:;" data-id="{{id}}">\r\n                            Email {{cn_number}}\r\n                        </a>\r\n                    </th>\r\n                    <th>\r\n                        <a class="link not_completed" href="javascript:;">\r\n                            Report Member\r\n                        </a>\r\n                    </th>\r\n                    <th>\r\n                        {{#score}}\r\n                        <a class="anar-18-20 load_about_anar_window" href="javascript:;">\r\n                            {{display_total}}\r\n                        </a>\r\n                        {{/score}}\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>\r\n                    <td>\r\n                    {{#relations}}\r\n                        {{#is_myself}}\r\n                         <a class="bt-relation bt-relation-off">\r\n                            <i>Follow</i>\r\n                        </a>\r\n                        {{/is_myself}}\r\n                        {{^is_myself}}\r\n                        <a class="\r\n                            {{#display_is_my_following_user}}\r\n                                remove_following bt-relation-on\r\n                            {{/display_is_my_following_user}}\r\n                            {{^display_is_my_following_user}}\r\n                                add_following bt-relation-off\r\n                            {{/display_is_my_following_user}} bt-relation " \r\n                        href="javascript:;">\r\n                           <i> \r\n                            {{#display_is_my_following_user}}\r\n                                Following\r\n                            {{/display_is_my_following_user}}\r\n                            {{^display_is_my_following_user}}\r\n                                Follow\r\n                            {{/display_is_my_following_user}}\r\n                           </i>\r\n                        </a>\r\n                        {{/is_myself}}\r\n                    {{/relations}}\r\n                    </td>\r\n                    <td>\r\n                    {{#relations}}\r\n                        {{#is_myself}}\r\n                         <a class="bt-relation bt-relation-off">\r\n                            <i>Colleague</i>\r\n                        </a>\r\n                        {{/is_myself}}\r\n                        {{^is_myself}}\r\n                        <a class="bt-relation \r\n                            {{#display_is_my_colleague_user}}\r\n                                remove_colleague bt-relation-on\r\n                            {{/display_is_my_colleague_user}}\r\n                            {{^display_is_my_colleague_user}}\r\n                                {{#display_is_my_pending_colleague_user}}\r\n                                    bt-relation-pending\r\n                                {{/display_is_my_pending_colleague_user}}\r\n                                {{^display_is_my_pending_colleague_user}}\r\n                                    add_colleague bt-relation-off\r\n                                {{/display_is_my_pending_colleague_user}}\r\n                            {{/display_is_my_colleague_user}}" \r\n                        href="javascript:;">\r\n                            <i>\r\n                            {{#display_is_my_colleague_user}}\r\n                                Colleague\r\n                            {{/display_is_my_colleague_user}}\r\n                            {{^display_is_my_colleague_user}}\r\n                                {{#display_is_my_pending_colleague_user}}\r\n                                Pending\r\n                                {{/display_is_my_pending_colleague_user}}\r\n                                {{^display_is_my_pending_colleague_user}}\r\n                                Colleague\r\n                                {{/display_is_my_pending_colleague_user}}\r\n                            {{/display_is_my_colleague_user}}\r\n                            </i>\r\n                        </a>\r\n                        {{/is_myself}}\r\n                    {{/relations}}\r\n                    </td>\r\n                    <td>\r\n                        <a class="bt-relation bt-relation-post" href="{{cn_number}}">\r\n                            Posts\r\n                        </a>\r\n                    </td>\r\n                </tr>\r\n                {{#count}}\r\n                <tr>\r\n                    <td>\r\n                        <em>{{display_follower_count}}</em>\r\n                    </td>\r\n                    <td>\r\n                        <em>{{display_colleague_count}}</em>\r\n                    </td>\r\n                    <td>\r\n                        <em>{{content}}</em>\r\n                    </td>\r\n                </tr>\r\n                {{/count}}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n<div class="clear"></div>'}),define("views/content/relation/good",["jquery","underscore","backbone","tools/view/user-relation-manager","tools/pop-up-window","controller","text!templates/content/relation/good.html"],function(e,t,n,i,o,a,r){return n.View.extend({tagName:"li",className:"good_item",template:r,initialize:function(){this.model.on("change:display_is_my_following_user",this.render,this),this.model.on("change:display_is_my_colleague_user",this.render,this),this.model.on("change:display_is_my_pending_colleague_user",this.render,this),this.model.on("change:display_follower_count",this.render,this)},events:{"click .add_colleague":"addColleague","click .remove_colleague":"removeColleague","click .add_following":"addFollowing","click .remove_following":"removeFollowing","click .window_directed":"windowDirected"},serialize:function(){return this.model.toJSON()},addColleague:function(){i.addColleague(this.model)},removeColleague:function(){i.removeColleague(this.model)},addFollowing:function(){i.addFollowing(this.model)},removeFollowing:function(){i.removeFollowing(this.model)},windowDirected:function(e){o.get("function").close(),a.go(this.$(e.currentTarget).attr("data-href"))}})}),define("views/content/relation/goods",["jquery","underscore","backbone","views/content/relation/good"],function(e,t,n,i){return n.View.extend({tagName:"ul",initialize:function(){t.bindAll(this,"addOne","addAll"),this.collection.on("fetch",this.addAll,this),this.collection.on("add",this.addOne,this)
},events:{"mouseenter .good_item":"displayOperate","mouseleave .good_item":"hideOperate"},addAll:function(){this.collection.each(this.addOne)},addOne:function(e){this.$el.append(new i({model:e}).render().view.el)},displayOperate:function(e){this.$(e.currentTarget).find("._operate").css("visibility","visible")},hideOperate:function(e){this.$(e.currentTarget).find("._operate").css("visibility","hidden")}})}),define("text!templates/common/error-tip.html",[],function(){return'<div class="main">\r\n	<div class="center-text">\r\n		{{{text}}}\r\n	</div>\r\n</div>'}),define("views/common/error-tip",["jquery","underscore","backbone","text!templates/common/error-tip.html"],function(e,t,n,i){return n.View.extend({className:"block-error-tip",template:i,initialize:function(e){this.data=e.data},serialize:function(){return this.data}})}),define("text!templates/common/pop-up-window/goods.html",[],function(){return'<div class="head">\r\n	<h4>Likes</h4>\r\n</div>\r\n<div class="main">\r\n    <div class="center">\r\n        <div class="body">\r\n            <div class="block-post-good-list" id="goods_main">\r\n                \r\n            </div>\r\n        </div>\r\n        <div class="last" id="goods_foot">\r\n        \r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("views/common/pop-up-window/goods",["jquery","underscore","backbone","tools/pop-up-window","views/common/more-operation","views/content/relation/goods","views/common/error-tip","text!templates/common/pop-up-window/goods.html"],function(e,t,n,i,o,a,r,s){var l=i.get("function");return i.get("view").extend({className:"pop-up-window block-window-goods block_window_goods",template:s,beforeRender_:function(){this.setViews({"#goods_main":new a({collection:this.collection})})},afterRender_:function(){var e=this;this.collection.addUrlParam({with_user_profile:1,with_user_relations:1,with_user_country:1,with_user_count:1,with_user_score:1}),this.collection.fetch({resultTrue:function(t){e.$("#goods_foot").html(new o({collection:t,view:{initMinLimit:10,limit:10,scrollTarget:".block_window_goods ul",scrollTargetWrap:".block_window_goods .center"}}).render().view.el),l.update()},resultFalse:function(n){var i="";t.each(n,function(e){i+=e+"</ br>"}),e.$("#goods_main").html(new r({data:{text:i}}).render().view.el)}})}})}),define("tools/view/content-tools",["jquery","underscore","tools/pop-up-window","views/common/pop-up-window/goods"],function(e,t,n,i){var o=n.get("function");return function(){return{loadLikeUsersWindow:function(e){o.open(new i({collection:e}).render().view.el)}}}()}),define("modules/content/comment",["jquery","underscore","backbone","modules/me"],function(e,t,n,i){var o=new i;return n.Model.extend({urlRoot:"api/content_comment/",defaults:function(){return{user:o.toJSON(),count:{good:0,comment:0,best:0},is_owner:!0,count_comment:0,count_good:0,count_best:0,has_set_good:!1,has_set_best:!1,can_set_best:!1}},initDefaults:function(){var e=this,t=e.getCountByKey("comment");return{count_comment:t,count_good:e.getCountByKey("good"),count_best:e.getCountByKey("best"),can_set_best:t>2}},isAllowSetBest:function(){this.get("count_comment")>2},deleted:function(t){var n=this;this.destroy({silent:!0,wait:!0,resultTrue:function(){n.view.remove(),"function"==e.type(t.success)&&t.success()}})},hasCountByKey:function(e){return this.get("count")&&this.get("count")[e]&&this.get("count")[e]>0},getCountByKey:function(e){return this.hasCountByKey(e)?this.get("count")[e]:0}})}),define("modules/content/sub-comment",["jquery","underscore","backbone","modules/content/comment"],function(e,t,n,i){return i.extend({urlRoot:"api/content_sub_comment/"})}),define("modules/content/comment-good",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/content_comment_good/"})}),define("modules/content/comment-best",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/content_comment_best/"})}),define("modules/content/good",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/content_good/"})}),define("collections/content/comment-goods",["jquery","underscore","backbone","modules/content/good"],function(e,t,n,i){return n.Collection.extend({model:i,urlRoot:"/api/content_comment_good/"})}),define("text!templates/content/relation/reflection.html",[],function(){return'<div class="sidebar l-float">\r\n{{#user}}\r\n    {{#avatar}}\r\n    <a class="avatar avatar-34" href="{{cn_number}}">\r\n        <img class="avatar_url_{{user.id}}" src="{{view_url}}" alt="{{display_name}}" title="{{fullname}}" />\r\n    </a>\r\n    {{/avatar}}\r\n{{/user}}\r\n</div>\r\n<div class="content r-float">\r\n    <form class="form_reflect" method="post">\r\n        <textarea class="input_reflect" name="text" placeholder="Click to make a reflection." required="required"></textarea>\r\n        <button class="bt bt-gray display-none submit_reflect" type="submit">Submit</button>\r\n        <div class="clear"></div>\r\n        <input type="hidden" name="content_id" value="{{content_id}}">\r\n        <input type="hidden" name="content_comment_id" value="{{comment_id}}">\r\n    </form>\r\n</div>\r\n<div class="clear"></div>'}),function(e){e.fn.serializeObject=function(t){t=e.extend({},t);var n=this,i={},o={},a={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,n){return e[t]=n,e},this.push_counter=function(e){return void 0===o[e]&&(o[e]=0),o[e]++},e.each(e(this).serializeArray(),function(){if(a.validate.test(this.name)){for(var t,o=this.name.match(a.key),r=this.value,s=this.name;void 0!==(t=o.pop());)s=s.replace(RegExp("\\["+t+"\\]$"),""),t.match(a.push)?r=n.build([],n.push_counter(s),r):t.match(a.fixed)?r=n.build([],t,r):t.match(a.named)&&(r=n.build({},t,r));i=e.extend(!0,i,r)}}),i}}(jQuery),define("jquerySerializeObject",function(){}),define("views/content/relation/reflection",["jquery","underscore","backbone","modules/me","text!templates/content/relation/reflection.html","jquerySerializeObject"],function(e,t,n,i,o){return n.View.extend({className:"block-post-reflection",template:o,serialize:function(){return this.data},initialize:function(e){t.bindAll(this,"reflect_");var n=new i;this._model=e._model,this.data=e.data,this.data.user=n.toJSON(),this.data.content_id=e.contentId?e.contentId:"",this.data.comment_id=e.commentId?e.commentId:""},events:{"submit .form_reflect":"reflect","focus .input_reflect":"showSubmitButton"},showSubmitButton:function(t){var n=this;e(t.currentTarget).animate({width:"86%"},"fast","swing",function(){n.$(".submit_reflect").fadeIn("fast")})},afterRender:function(){},reflect:function(e){var t=this.$(e.currentTarget);if(t.attr("locked"))return!1;t.attr("locked","locked");var n=this;return n.model=new n._model,n.model.addUrlParam({return_detail:1,with_content_comment_user:1,with_user_profile:1}),n.model.save(n.$(".form_reflect").serializeObject(),{wait:!0,resultTrue:function(e){n.$(".input_reflect").val(""),n.data.model.set("count_comment",n.data.model.get("count_comment")+1),n.collection.add(e),n.reflect_()},completeCallback:function(){t.removeAttr("locked")}}),!1},reflect_:function(){}})}),define("views/content/relation/comment-reflection",["views/content/relation/reflection"],function(e){return e.extend({className:"block-post-reflection block-comment-reflection",reflect_:function(){this.remove()}})}),define("modules/translation",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/translation/",initDefaults:function(){var e=this;return{display_name:e.get("name"),display_value:e.get("id")}}})}),define("modules/user-translation-setting",["jquery","underscore","backbone"],function(e,t,n){var i=n.Model.extend({urlRoot:"api/user_translation_setting/"});return i}),define("modules/translation-language-detection",["jquery","underscore","backbone"],function(e,t,n){var i=n.Model.extend({urlRoot:"api/translation_language_detection/"});return i}),define("views/common/option",["jquery","underscore","backbone"],function(e,t,n){return n.View.extend({tagName:"option",initialize:function(i){if("undefined"!==e.type(i)){var o={};if(t.isUndefined(i.model))if(t.isUndefined(i.attrs))var a={display_value:"",display_name:"",selected:""};else var a=i.attrs;else var a=i.model;t.isUndefined(a)||(o={display_value:a instanceof n.Model?a.get("display_value"):a.display_value,display_name:a instanceof n.Model?a.get("display_name"):a.display_name,selected:t.isUndefined(i.params)||t.isUndefined(i.params.selected)?"":i.params.selected}),t.isUndefined(o.display_value)||t.isUndefined(o.display_name)||(this.$el.attr("value",o.display_value),this.$el.html(o.display_name),"undefined"!==e.type(o.selected)&&o.display_value==o.selected&&this.$el.prop("selected",!0))}}})}),define("text!templates/text/terms-of-use.html",[],function(){return'<div class="head">\r\n    <h4>Terms of Use</h4>\r\n</div>\r\n<div class="main">\r\n		<div class="index-terms-of-use-body">\r\n			<div>\r\n				\r\n				<p>Date of Last Revision: December 13, 2012.</p>\r\n\r\n                                <p>Welcome to CourseNetworking, LLC, an academic and professional networking and content delivery service. The CourseNetworking, LLC service and network (collectively, "CourseNetworking, LLC" or "the Service") are operated by CourseNetworking, LLC (collectively, "us", "we" or "the Company"). By accessing or using our web site at www.coursenetworking.com or any other version thereof (together the "Site") you (the "User") signify that you have read, understand and agree to be bound by these Terms of Use ("Terms of Use" or "Agreement"), whether or not you are a registered member of CourseNetworking, LLC. We reserve the right, at our sole discretion, to change, modify, add, or delete portions of these Terms of Use at any time without further notice. If we do this, we will post the changes to these Terms of Use on this page and will indicate at the top of this page the date these terms were last revised. Your continued use of the Service or the Site after any such changes constitutes your acceptance of the new Terms of Use. If you do not agree to abide by these or any future Terms of Use, do not use or access (or continue to use or access) the Service or the Site. It is your responsibility to regularly check the Site to determine if there have been changes to these Terms of Use and to review such changes. We may also offer other services that are governed by different Terms of Use. For instance, different terms may apply to non-US members, K-12 Students, and non-students.</p>\r\n\r\n                                <p><strong>PLEASE READ THESE TERMS OF USE CAREFULLY AS THEY CONTAIN IMPORTANT INFORMATION REGARDING YOUR LEGAL RIGHTS, REMEDIES AND OBLIGATIONS. THESE INCLUDE VARIOUS LIMITATIONS AND EXCLUSIONS, AND A DISPUTE RESOLUTION CLAUSE THAT GOVERNS HOW DISPUTES WILL BE RESOLVED.</strong></p>\r\n\r\n                                <h6>Eligibility</h6>\r\n\r\n                                <p>Membership in the Service is void where prohibited. This Site is intended solely for users who are thirteen (13) years of age or older. Any registration by, use of or access to the Site by anyone else is unauthorized, unlicensed and in violation of these Terms of Use. By using the Service or the Site, you represent and warrant that (a) you meet the above age requirements; (b) you agree to abide by all of the terms and conditions of this Agreement; and (c) your use of the CourseNetworking, LLC Services does not violate any applicable law or regulation.</p>\r\n\r\n                                <h6>Registration Data; Account Security</h6>\r\n\r\n                                <p>In consideration of your use of the Site, you agree to (a) provide accurate, current and complete information about you as may be prompted by any registration forms on the Site ("Registration Data"); (b) maintain the security of your password and identification; (c) maintain and promptly update the Registration Data, and any other information you provide to Company, to keep it accurate, current and complete; and (d) be fully responsible for all use of your account and for any actions that take place using your account.</p>\r\n\r\n                                <p>You are responsible for safeguarding and maintaining the secrecy of your password and identification at all times. You shall notify the Company promptly of any unauthorized use of your password and identification. You will remain liable for any use of the Service under your password and identification unless and until you notify the Company of the unauthorized use of your password and identification. The Company may suspend your access to the Service without notice to you in the event that you do not use the Service for an extended period of time.</p>\r\n\r\n                                <h6>Proprietary Rights in Site Content; Limited License</h6>\r\n\r\n                                <p>All content on the Site and available through the Service, including but not limited to designs, text, graphics, pictures, video, information, applications, software, music, sound and other files, User Content (as defined below), and their selection and arrangement (the "Site Content"), are the proprietary property of the Company, its users or its licensors with all rights reserved. No Site Content may be modified, copied, distributed, framed, reproduced, republished, downloaded, displayed, posted, transmitted, or sold in any form or by any means, in whole or in part, without the Company\'s prior written permission, except that the foregoing does not apply to your own User Content that you legally post on the Site. Provided that you are eligible for use of the Site, you are granted a limited license to access and use the Site and the Site Content and to download or print a copy of any portion of the Site Content to which you have properly gained access solely for your personal, non-commercial use, provided that you keep all copyright or other proprietary notices intact. Except for your own User Content, you may not upload or republish Site Content on any Internet, Intranet or Extranet site or incorporate the information in any other database or compilation, and any other use of the Site Content is strictly prohibited. Such license is subject to these Terms of Use and does not include use of any data mining, robots or similar data gathering or extraction methods. Any use of the Site or the Site Content other than as specifically authorized herein, without the prior written permission of Company, is strictly prohibited and will terminate the license granted herein. Such unauthorized use may also violate applicable laws including without limitation copyright and trademark laws and applicable communications regulations and statutes. Unless explicitly stated herein, nothing in these Terms of Use shall be construed as conferring any license to intellectual property rights, whether by estoppel, implication or otherwise. This license is revocable at any time without notice and with or without cause.</p>  \r\n\r\n                                <h6>Trademarks</h6>\r\n\r\n                                <p>CourseNetworking, LLC, the CourseNetworking, LLC logo, and other Company graphics, logos, designs, page headers, icons, scripts and service names are registered trademarks, trademarks or trade dress of Company or its licensors in the U.S. and/or other countries. Company\'s trademarks and trade dress may not be used, including as part of trademarks and/or as part of domain names, in connection with any product or service in any manner that is likely to cause confusion and may not be copied, imitated, or used, in whole or in part, without the prior written permission of the Company.</p>  \r\n\r\n                                <h6>User Content Posted on the Site</h6>\r\n\r\n                                <p>You are solely responsible for the photos, profiles, messages, notes, text, information, music, video, advertisements, listings, and other content that you upload, publish or display (hereinafter, "post") on or through the Service or the Site, or transmit to or share with other users (collectively the "User Content"). You may not post, transmit, or share User Content on the Site or Service that you did not create or that you do not have permission to post, and you shall be solely responsible for obtaining such permission. You understand and agree that the Company may, but is not obligated to, review the Site and may delete or remove (without notice) any Site Content or User Content in its sole discretion, for any reason or no reason, including without limitation User Content that in the sole judgment of the Company violates this Agreement, or which might be offensive, illegal, or that might violate the rights, harm, or threaten the safety of users or others. You are solely responsible at your sole cost and expense for creating backup copies and replacing any User Content you post or store on the Site or provide to the Company.</p>\r\n\r\n                                <p>When you post User Content to the Site, you authorize and direct us to make such copies thereof as we deem necessary in order to facilitate the posting and storage of the User Content on the Site and delivery of the Service. By posting User Content to any part of the Site, you automatically grant, and you represent and warrant that you have the right to grant, to the Company an irrevocable, perpetual, non-exclusive, transferable, fully paid, worldwide license (with the right to sublicense) to use, copy, publicly perform, publicly display, reformat, translate, and distribute such User Content for any purpose that is in connection with delivery of the Service or the promotion thereof, and to grant and authorize sublicenses of the foregoing. You may remove your User Content from the Site at any time. If you choose to remove your User Content, the license granted above will automatically expire, however you acknowledge that the Company may retain archived copies of your User Content.</p>\r\n\r\n                                <p>If you feel your copyrighted material appears on the Site without proper authorization, please contact info@coursenetworking.com.</p>\r\n\r\n                                <h6>User Conduct</h6>\r\n\r\n                                <p>You represent, warrant and agree that no User Content submitted through your account or otherwise posted, transmitted, or shared by you on or through the Service will violate or infringe upon the rights of any third party, including copyright, trademark, privacy, publicity or other personal or proprietary rights; or contain libelous, defamatory or otherwise unlawful material. This means that you, and not CourseNetworking, LLC, are entirely responsible for all User Content that you upload, post, email, transmit or otherwise make available via the Service. CourseNetworking, LLC does not control the User Content posted via the Service and, as such, does not guarantee the accuracy, integrity or quality of such User Content. You understand that by using the Service, you may be exposed to Site Content that is offensive, indecent or objectionable. Under no circumstances will CourseNetworking, LLC be liable in any way for any Site Content, including, but not limited to, any errors or omissions in any Site Content, or any loss or damage of any kind incurred as a result of the use of any Site Content posted, emailed, transmitted or otherwise made available via the Service.</p>\r\n\r\n                                <p>You shall not use the Service to:</p>\r\n\r\n                                <p>a. upload, post, email, transmit or otherwise make available any content that is unlawful, harmful, threatening, abusive, harassing, tortuous, defamatory, vulgar, obscene, libelous, invasive of another\'s privacy, hateful, or racially, ethnically or otherwise objectionable;</p>\r\n                                <p>b. harm minors in any way;</p>\r\n                                <p>c. impersonate any person or entity, or falsely state or otherwise misrepresent yourself, your age or your affiliation with any person or entity;</p>\r\n                                <p>d. forge headers or otherwise manipulate identifiers in order to disguise the origin of any User Content transmitted through the Service;</p>\r\n                                <p>e. upload, post, email, transmit or otherwise make available any User Content that you do not have a right to make available under any law or under contractual or fiduciary relationships (such as intellectual property, inside information, proprietary and confidential information learned or disclosed as part of employment relationships or under nondisclosure agreements);</p>\r\n                                <p>f. upload, post, email, transmit or otherwise make available any User Content that infringes any patent, trademark, trade secret, copyright or other proprietary rights of any party;</p>\r\n                                <p>g. upload, post, email, transmit or otherwise make available any unsolicited or unauthorized advertising, promotional materials, "junk mail," "spam," "chain letters," "pyramid schemes," or any other form of solicitation, except in those areas (such as shopping) that are designated for such purpose.</p>\r\n                                <p>h. upload, post, email, transmit or otherwise make available any material that contains software viruses or any other computer code, files or programs designed to interrupt, destroy or limit the functionality of any computer software or hardware or telecommunications equipment;</p>\r\n                                <p>i. disrupt the normal flow of dialogue, cause a screen to "scroll" faster than other users of the Service are able to type, or otherwise act in a manner that negatively affects other users\' ability to engage in real time exchanges; </p>\r\n                                <p>j. interfere with or disrupt the Service or servers or networks connected to the Service, or disobey any requirements, procedures, policies or regulations of networks connected to the Service;</p> \r\n                                <p>k. intentionally or unintentionally violate any applicable local, state, national or international law, including, but not limited to, regulations promulgated by the U.S. Securities and Exchange Commission, any rules of any national or other securities exchange, including, without limitation, the New York Stock Exchange, the American Stock Exchange or the NASDAQ, and any regulations having the force of law;</p>\r\n                                <p>l. provide material support or resources (or to conceal or disguise the nature, location, source, or ownership of material support or resources) to any organization(s) designated by the United States government as a foreign terrorist organization pursuant to section 219 of the immigration and Nationality Act;</p> \r\n                                <p>m. "stalk" or otherwise harass another; and/or</p>\r\n                                <p>n. collect or store personal data about other users in connection with the prohibited conduct and activities set forth in paragraphs a through m above.</p>\r\n                                <p>You acknowledge that the Company may or may not pre-screen Site Content, but that the Company and its designees shall have the right (but not the obligation) in their sole discretion to pre-screen, refuse, or move any Site Content that is available via the Service. Without limiting the foregoing, the Company and its designees shall have the right to remove any Site Content that violates the Terms of Use or is otherwise objectionable. You acknowledge and agree that you must evaluate, and bear all risks associated with, the use of any Site Content, including any reliance on the accuracy, completeness, or usefulness of such Site Content. In this regard, you acknowledge that you may not rely on any Site Content created by the Company or submitted to the Company or the Service, including without limitation information in message boards and in all other parts of the Service.</p>\r\n                                <p>You acknowledge, consent and agree that the Company may access, preserve and disclose your account information and User Content if required to do so by law or in a good faith belief that such access preservation or disclosure is reasonably necessary to: (a) comply with legal process; (b) enforce the Terms of Use; (c) respond to claims that any User Content violates the rights of third parties; (d) respond to your requests for customer service; or (e) protect the rights, property or personal safety of the Company, its users and the public.</p>\r\n                                <p>You understand that the technical processing and transmission of the Service, including your User Content, may involve (a) transmissions over various networks; and (b) changes to conform and adapt to technical requirements of connecting networks or devices.</p>\r\n                                <p>You understand that the Service and software embodied within the Service may include security components that permit digital materials to be protected, and that use of these materials is subject to usage rules set by the Company and/or content providers who provide content to the Service. You may not attempt to override or circumvent any of the usage rules embedded into the Service. Any unauthorized reproduction, publication, further distribution or public exhibition of the materials provided on the Service, in whole or in part, is strictly prohibited.</p>\r\n\r\n                                <h6>Third Party Websites and Content</h6>\r\n\r\n                                <p>The Site contains (or you may be sent through the Site or the Service) links to other web sites ("Third Party Sites") as well as articles, photographs, text, graphics, pictures, designs, music, sound, video, information, applications, software and other content or items belonging to or originating from third parties (the "Third Party Applications, Software or Content"). Such Third Party Sites and Third Party Applications, Software or Content are not investigated, monitored or checked for accuracy, appropriateness, or completeness by us, and we are not responsible for any Third Party Sites accessed through the Site or any Third Party Applications, Software or Content posted on, available through or installed from the Site, including without limitation the content, accuracy, offensiveness, opinions, reliability, privacy practices or other policies of or contained in the Third Party Sites or the Third Party Applications, Software or Content. Inclusion of, linking to or permitting the use or installation of any Third Party Site or any Third Party Applications, Software or Content does not imply approval or endorsement thereof by us. If you decide to leave the Site and access the Third Party Sites or to use or install any Third Party Applications, Software or Content, you do so at your own risk and you should be aware that our terms and policies no longer govern. You should review the applicable terms and policies, including privacy and data gathering practices, of any site to which you navigate from the Site or relating to any applications you use or install from the site.</p>\r\n\r\n                                <h6>User Disputes</h6>\r\n\r\n                                <p>You are solely responsible for your interactions with other CourseNetworking, LLC users. We reserve the right, but have no obligation, to monitor or intervene in disputes between you and other users.</p>\r\n\r\n                                <h6>Disclaimers</h6>\r\n                                <p>The Company is not responsible or liable in any manner for any User Content or Third Party Applications, Software or Content posted on the Site or in connection with the Service, whether posted or caused by users of the Site, by CourseNetworking, LLC, by third parties or by any of the equipment or programming associated with or utilized in the Site or the Service. Although we provide rules for user conduct and postings, we do not control and are not responsible for what users post, transmit or share on the Site and are not responsible for any offensive, inappropriate, obscene, unlawful or otherwise objectionable content you may encounter on the Site or in connection with any User Content or Third Party Applications, Software or Content. The Company is not responsible for the conduct, whether online or offline, of any user of the Site or Service.</p>\r\n\r\n                                <p>The Site and the Service may be temporarily unavailable from time to time for maintenance or other reasons. Company assumes no responsibility for any error, omission, interruption, deletion, defect, delay in operation or transmission, communications line failure, theft or destruction or unauthorized access to, or alteration of, User communications. The Company is not responsible for any technical malfunction or other problems of any telephone network or service, computer systems, servers or providers, computer or mobile phone equipment, software, failure of email or players on account of technical problems or traffic congestion on the Internet or at any Site or combination thereof, including injury or damage to User\'s or to any other person\'s computer, mobile phone, or other hardware or software, related to or resulting from using or downloading materials in connection with the Web and/or in connection with the Service. Under no circumstances will the Company be responsible for any loss or damage, including any loss or damage to any User Content or personal injury or death, resulting from anyone\'s use of the Site or the Service, any User Content or Third Party Applications, Software or Content posted on or through the Site or the Service or transmitted to Users, or any interactions between users of the Site, whether online or offline.</p>\r\n\r\n                                <p>THE SITE, THE SERVICE, AND THE SITE CONTENT ARE PROVIDED "AS IS" AND "AS AVAILABLE" AND THE COMPANY DISCLAIMS ANY AND ALL REPRESENTATIONS AND WARRANTIES, WHETHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION IMPLIED WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. THE COMPANY CANNOT GUARANTEE AND DOES NOT PROMISE ANY SPECIFIC RESULTS FROM USE OF THE SITE AND/OR THE SERVICE AND/OR ANY SITE CONTENT. COMPANY DOES NOT REPRESENT OR WARRANT THAT SOFTWARE, SITE CONTENT OR MATERIALS ON THE SITE, OR THE SERVICE ARE ACCURATE, COMPLETE, RELIABLE, CURRENT OR ERROR-FREE OR THAT THE SITE, SITE CONTENT, SERVICE OR SERVERS ARE FREE OF VIRUSES OR OTHER HARMFUL COMPONENTS. THEREFORE, YOU SHOULD EXERCISE CAUTION IN THE USE AND DOWNLOADING OF ANY SUCH SOFTWARE, SITE CONTENT, SERVICES, OR MATERIALS AND USE INDUSTRY-RECOGNIZED SOFTWARE TO DETECT AND DISINFECT VIRUSES. WITHOUT LIMITING THE FOREGOING, YOU UNDERSTAND AND AGREE THAT YOU DOWNLOAD OR OTHERWISE OBTAIN CONTENT, MATERIAL, DATA OR SOFTWARE (INCLUDING ANY MOBILE CLIENT) FROM OR THROUGH THE SERVICE AT YOUR OWN DISCRETION AND RISK AND THAT YOU WILL BE SOLELY RESPONSIBLE FOR YOUR USE THEREOF AND ANY DAMAGES TO YOUR MOBILE DEVICE OR COMPUTER SYSTEM, LOSS OF DATA OR OTHER HARM OF ANY KIND THAT MAY RESULT.</p>\r\n\r\n                                <p>The Company reserves the right to change any and all Site Content, software and other items used or contained in the Site and any Services offered through the Site at any time without notice. Reference to any products, services, processes or other information, by trade name, trademark, manufacturer, supplier or otherwise does not constitute or imply endorsement, sponsorship or recommendation thereof, or any affiliation therewith, by Company.</p>\r\n\r\n                                <h6>Limitation on Liability</h6>\r\n\r\n                                <p>IN NO EVENT WILL COMPANY OR ITS DIRECTORS, EMPLOYEES OR AGENTS BE LIABLE TO CLIENT OR ANY THIRD PERSON FOR USER CONTENT OR CONTENT POSTED OR ANOTHER USER, OR ANY CLAIM RELATED THERETO. IN NO EVENT WILL COMPANY OR ITS DIRECTORS, EMPLOYEES OR AGENTS BE LIABLE TO YOU OR ANY THIRD PERSON FOR ANY INDIRECT, CONSEQUENTIAL, EXEMPLARY, INCIDENTAL, SPECIAL OR PUNITIVE DAMAGES, INCLUDING FOR ANY LOST PROFITS OR LOST DATA ARISING FROM YOUR USE OF THE SITE OR THE SERVICE, OR ANY OF THE SITE CONTENT OR OTHER MATERIALS ON, ACCESSED THROUGH OR DOWNLOADED FROM THE SITE, EVEN IF THE COMPANY IS AWARE OR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR SUCH DAMAGES WERE FORESEEABLE. NOTWITHSTANDING ANYTHING TO THE CONTRARY CONTAINED HEREIN, THE COMPANY\'S LIABILITY TO YOU FOR ANY CAUSE WHATSOEVER, AND REGARDLESS OF THE FORM OF THE ACTION, WILL AT ALL TIMES BE LIMITED TO THE AMOUNT PAID, IF ANY, BY YOU TO COMPANY FOR THE SERVICE DURING THE TERM OF MEMBERSHIP, AND IN NO CASE WILL THE COMPANY\'S LIABILITY TO YOU EXCEED $1000. YOU ACKNOWLEDGE THAT IF NO FEES ARE PAID TO COMPANY FOR THE SERVICE, YOUR REMEDIES SHALL BE LIMITED TO INJUNCTIVE RELIEF ONLY, UNLESS OTHERWISE PERMITTED BY LAW, AND SHALL NOT BE ENTITLED TO DAMAGES OF ANY KIND FROM COMPANY, REGARDLESS OF THE CAUSE OF ACTION.</p>\r\n\r\n                                <p>CERTAIN STATE LAWS DO NOT ALLOW LIMITATIONS ON IMPLIED WARRANTIES OR THE EXCLUSION OR LIMITATION OF CERTAIN DAMAGES. IF THESE LAWS APPLY TO YOU, SOME OR ALL OF THE ABOVE DISCLAIMERS, EXCLUSIONS OR LIMITATIONS MAY NOT APPLY TO YOU, AND YOU MAY HAVE ADDITIONAL RIGHTS.</p>\r\n\r\n                                <h6>Termination</h6>\r\n\r\n                                <p>The Company may terminate your membership, delete your profile and any User Content or information that you have posted on the Site and/or prohibit you from using or accessing the Service or the Site (or any portion, aspect or feature of the Service or the Site) for any reason, or no reason, at any time in its sole discretion, with or without notice, including without limitation if it believes that you do not meet the age requirements set forth above.</p>  \r\n\r\n                                <h6>Governing Law; Venue and Jurisdiction</h6>\r\n\r\n                                <p>By visiting or using the Site and/or the Service, you agree that the laws of the State of Indiana, without regard to principles of conflict of laws, will govern these Terms of Use and any dispute of any sort that might arise between you and the Company or any of our affiliates. With respect to any disputes or claims not subject to arbitration (as set forth below), you agree not to commence or prosecute any action in connection therewith other than in the state and federal courts situated in Marion County, Indiana, and you hereby consent to, and waive all defenses of lack of personal jurisdiction and forum non conveniens with respect to, venue and jurisdiction in the state and federal courts situated in Marion County, Indiana.</p>\r\n\r\n                                <h6>Dispute Resolution</h6>\r\n\r\n                                <p>YOU AND COMPANY AGREE THAT, EXCEPT AS MAY OTHERWISE BE PROVIDED IN REGARD TO SPECIFIC SERVICES ON THE SITE IN ANY SPECIFIC TERMS APPLICABLE TO THOSE SERVICES, THE SOLE AND EXCLUSIVE FORUM AND REMEDY FOR ANY AND ALL DISPUTES AND CLAIMS RELATING IN ANY WAY TO OR ARISING OUT OF THESE TERMS OF USE, THE SITE AND/OR THE SERVICE (INCLUDING YOUR VISIT TO OR USE OF THE SITE AND/OR THE SERVICE) SHALL BE FINAL AND BINDING ARBITRATION, except that, to the extent that either of us has in any manner infringed upon or violated or threatened to infringe upon or violate the other party\'s patent, copyright, trademark or trade secret rights, or you have otherwise violated any of the user conduct rules set forth above, then the parties acknowledge that arbitration is not an adequate remedy at law and that injunctive or other appropriate relief may be sought before, during or after the pendency of any arbitration proceeding brought pursuant to this Agreement, or in lieu of such proceedings.</p>\r\n\r\n                                <p>Arbitration under this Agreement shall be conducted by the American Arbitration Association (the "AAA") under its Commercial Arbitration Rules and, in the case of consumer disputes, the AAA\'s Supplementary Procedures for Consumer Related Disputes ( the "AAA Consumer Rules") (collectively the "AAA Rules"). The location of the arbitration and the allocation of costs and fees for such arbitration shall be determined in accordance with such AAA Rules and shall be subject to the limitations provided for in the AAA Consumer Rules (for consumer disputes) and in these Terms of Use. In rendering a decision, the arbitration panel shall follow the law of the United States and of the state of Indiana, and shall not use equitable or other principles which would permit the panel to ignore this Agreement or the law. The arbitration panel\'s award shall be binding and may be entered as a judgment in any court of competent jurisdiction, provided, however, that errors of law may be appealed to a court of competent jurisdiction for review. Any award in arbitration shall be subject to all dollar and other limitations set forth in this Agreement.</p>  \r\n\r\n                                <p>To the fullest extent permitted by applicable law, NO ARBITRATION OR CLAIM UNDER THESE TERMS OF USE SHALL BE JOINED TO ANY OTHER ARBITRATION OR CLAIM, INCLUDING ANY ARBITRATION OR CLAIM INVOLVING ANY OTHER CURRENT OR FORMER USER OF THE SERVICE, AND NO CLASS ARBITRATION PROCEEDINGS SHALL BE PERMITTED. In no event shall any claim, action or proceeding by you related in any way to the Site and/or the Service (including your visit to or use of the Site and/or the Service) be instituted more than one (1) year after the cause of action arose.</p>\r\n\r\n                                <h6>Indemnity</h6>\r\n\r\n                                <p>You shall indemnify and hold the Company, its subsidiaries and affiliates, and each of their directors, officers, agents, contractors, partners and employees, harmless from and against any loss, liability, claim, demand, damages, costs and expenses, including reasonable attorney\'s fees, arising out of or in connection with any User Content, any Third Party Applications, Software or Content you post or share on or through the Site, your use of the Service or the Site, your conduct in connection with the Service or the Site or with other users of the Service or the Site, or any violation of this Agreement or of any law or the rights of any third party.</p> \r\n\r\n                                <h6>Submissions</h6>\r\n\r\n                                <p>You acknowledge and agree that any questions, comments, suggestions, ideas, feedback or other information about the Site or the Service ("Submissions"), provided by you to Company are non-confidential and shall become the sole property of Company. Company shall own exclusive rights, including all intellectual property rights, and shall be entitled to the unrestricted use and dissemination of these Submissions for any purpose, commercial or otherwise, without acknowledgment or compensation to you.</p>\r\n\r\n                                <h6>Other</h6>\r\n\r\n                                <p>These Terms of Use constitute the entire agreement between you and Company regarding the use of the Site and/or the Service, superseding any prior agreements between you and Company relating to your use of the Site or the Service. The failure of Company to exercise or enforce any right or provision of these Terms of Use shall not constitute a waiver of such right or provision in that or any other instance. If any provision of this Agreement is held invalid, the remainder of this Agreement shall continue in full force and effect. If any provision of these Terms of Use shall be deemed unlawful, void or for any reason unenforceable, then that provision shall be deemed severable from these Terms of Use and shall not affect the validity and enforceability of any remaining provisions.</p>\r\n\r\n			</div>\r\n		</div>\r\n\r\n</div>'
}),define("views/text/translate-institution",["tools/pop-up-window","text!templates/text/terms-of-use.html"],function(e,t){return e.get("view").extend({className:"pop-up-window block-window-translate-institution",template:t})}),define("text!templates/common/pop-up-window/translate.html",[],function(){return'<div class="head">\r\n	<h4>Translate</h4>\r\n</div>\r\n<div class="main">\r\n	<form>\r\n		<div class="center">\r\n			<div class="title">\r\n				<span class="l-float">Source</span>\r\n				<select class="r-float" id="from_lang" name="">\r\n					<option value="">Please Select One</option>\r\n				</select>\r\n                <div class="clear"></div>\r\n			</div>\r\n			<div class="body">\r\n				<textarea id="input_text">{{text}}</textarea>\r\n			</div>\r\n		</div>\r\n		<div class="center">\r\n			<div class="title">\r\n				<span class="l-float">Translate <img id="img_loading" style="display: none;" src="img/com/frontend/loading/horizontal.gif"/></span>\r\n                <div id="to_lang_wrap"></div>\r\n				<select class="r-float" id="to_lang" name="">\r\n					<option value="">Please Select One</option>\r\n				</select>\r\n				<div class="clear"></div>\r\n			</div>\r\n			<div class="body">\r\n				<textarea id="output_text"></textarea>\r\n			</div>\r\n		</div>\r\n		<div class="bottom">\r\n			<p class="l-float">\r\n				This CN translation was sponsored by <a id="institution" href="javascript:;">your institution</a>.\r\n			</p>\r\n			<button class="r-float bt bt-red cancel" type="button">CLOSE</button>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</form>\r\n</div>'}),define("views/common/pop-up-window/translate",["jquery","underscore","backbone","modules/translation","modules/user-translation-setting","modules/translation-language-detection","tools/pop-up-window","views/common/option","views/text/translate-institution","text!templates/common/pop-up-window/translate.html"],function(e,t,n,i,o,a,r,s,l,c){return r.get("view").extend({className:"block-window-translate pop-up-window",template:c,serialize:function(){return this.data},events:{"click .cancel":"deleted","change #from_lang":"changeFromLang","change #to_lang":"changeToLang","click #institution":"showInstitution"},showInstitution:function(){r.get("function").open((new l).render().view.el)},translate:function(e,t,n){var o=this;this.$("#img_loading").show();var a=new i;a.save({text:e,to_lang:t,from_lang:n},{resultTrue:function(e,t){o.$("#output_text").val(t.data.text)},resultFalse:function(){alert("The Source text is too long to translate.")},completeCallback:function(){o.$("#img_loading").hide()}})},translateSetting:function(e){var t=new o;t.save({lang:e},{resultTrue:function(){},resultFalse:function(){}})},changeFromLang:function(t){var n=e.trim(this.$(t.currentTarget).find("option:selected").val());n.length>0&&(this.fromLang=n)},changeToLang:function(t){var n=e.trim(this.$(t.currentTarget).find("option:selected").val()),i=e.trim(this.$("#input_text").val());n.length>0&&i.length>0&&(this.translate(i,n),this.translateSetting(n))},insertOption:function(t){var n=this,i=new o;i.fetch({resultTrue:function(i,o){for(var a in t){var r=new s({attrs:{display_value:t[a].language,display_name:t[a].name}}),l=new s({attrs:{display_value:t[a].language,display_name:t[a].name},params:{selected:o.data.lang}});this.$("#from_lang").append(r.render().view.el),this.$("#to_lang").append(l.render().view.el)}var c=e.trim(this.$("#input_text").val());o.data.lang.length>0&&c.length>0&&n.translate(c,o.data.lang)},resultFalse:function(){for(var e in t){var n=new s({attrs:{display_value:t[e].language,display_name:t[e].name}}),i=new s({attrs:{display_value:t[e].language,display_name:t[e].name}});this.$("#from_lang").append(n.render().view.el),this.$("#to_lang").append(i.render().view.el)}}})},afterRender_:function(){var e=[{language:"af",name:"Afrikaans"},{language:"sq",name:"Albanian"},{language:"ar",name:"Arabic"},{language:"be",name:"Belarusian"},{language:"bg",name:"Bulgarian"},{language:"ca",name:"Catalan"},{language:"zh",name:"Chinese (Simplified)"},{language:"zh-CN",name:"Chinese (Simplified)"},{language:"zh-TW",name:"Chinese (Traditional)"},{language:"hr",name:"Croatian"},{language:"cs",name:"Czech"},{language:"da",name:"Danish"},{language:"nl",name:"Dutch"},{language:"en",name:"English"},{language:"eo",name:"Esperanto"},{language:"et",name:"Estonian"},{language:"tl",name:"Filipino"},{language:"fi",name:"Finnish"},{language:"fr",name:"French"},{language:"gl",name:"Galician"},{language:"de",name:"German"},{language:"el",name:"Greek"},{language:"ht",name:"Haitian Creole"},{language:"iw",name:"Hebrew"},{language:"hi",name:"Hindi"},{language:"hu",name:"Hungarian"},{language:"is",name:"Icelandic"},{language:"id",name:"Indonesian"},{language:"ga",name:"Irish"},{language:"it",name:"Italian"},{language:"ja",name:"Japanese"},{language:"ko",name:"Korean"},{language:"lv",name:"Latvian"},{language:"lt",name:"Lithuanian"},{language:"mk",name:"Macedonian"},{language:"ms",name:"Malay"},{language:"mt",name:"Maltese"},{language:"no",name:"Norwegian"},{language:"fa",name:"Persian"},{language:"pl",name:"Polish"},{language:"pt",name:"Portuguese"},{language:"ro",name:"Romanian"},{language:"ru",name:"Russian"},{language:"sr",name:"Serbian"},{language:"sk",name:"Slovak"},{language:"sl",name:"Slovenian"},{language:"es",name:"Spanish"},{language:"sw",name:"Swahili"},{language:"sv",name:"Swedish"},{language:"th",name:"Thai"},{language:"tr",name:"Turkish"},{language:"uk",name:"Ukrainian"},{language:"vi",name:"Vietnamese"},{language:"cy",name:"Welsh"},{language:"yi",name:"Yiddish"}],t="";if(this.insertOption(e),this.data.text.length>0){var n=50>this.data.text.length?this.data.text.length:50;t=this.data.text.substr(0,n)}var i=this,o=new a;o.addUrlParam({text:t}),o.fetch({resultTrue:function(e,t){i.$("#from_lang").find('option[value="'+t.data.lang+'"]').prop("selected",!0)}})}})}),define("text!templates/content/relation/comment-operation.html",[],function(){return'\r\n	<ul>\r\n		<li>\r\n			{{#has_set_good}}\r\n			<a class="unlike" href="javascript:;">Unlike</a>\r\n			{{/has_set_good}}\r\n			{{^has_set_good}}\r\n				<a class="like" href="javascript:;">Like</a>\r\n			{{/has_set_good}}\r\n			({{#count_good}}<a class="font-bold load_comment_like_users_window" href="javascript:;">{{count_good}}</a>{{/count_good}}{{^count_good}}<b>{{count_good}}</b>{{/count_good}}),\r\n		</li>\r\n		<li>\r\n			<a class="comment_reflect" href="javascript:;">\r\n				Reflect\r\n			</a>\r\n			(<b class="count_comment {{#count_comment}}font-bold{{/count_comment}}">{{count_comment}}</b>)\r\n			{{#count_comment}}\r\n            <a class="operation_sub_comments text-hide icon-blue-down" href="javascript:;" title="Show Comments" data-off="1">\r\n				&darr;\r\n			</a>\r\n            {{/count_comment}}\r\n            ,\r\n		</li>\r\n		{{#can_set_best}}\r\n		<li>\r\n			{{#has_set_best}}\r\n			<a class="unbest" href="javascript:;">\r\n				Unbest\r\n			</a>\r\n			{{/has_set_best}}\r\n			{{^has_set_best}}\r\n				{{#has_one_set_best}}\r\n				<em>\r\n					Best\r\n				</em>\r\n				{{/has_one_set_best}}\r\n				{{^has_one_set_best}}\r\n				<a class="best" href="javascript:;">\r\n					Best\r\n				</a>\r\n				{{/has_one_set_best}}\r\n			{{/has_set_best}}\r\n			(<b {{#count_best}}class="font-bold"{{/count_best}}>{{count_best}}</b>),\r\n		</li>\r\n		{{/can_set_best}}\r\n		<li>\r\n			<a class="laod_translate_comment_window" href="javascript:;">\r\n				Translate{{#is_owner}},{{/is_owner}}\r\n			</a>\r\n		</li>\r\n		{{#is_owner}}\r\n		<li>\r\n			<a class="delete_comment" href="javascript:;">\r\n				Delete\r\n			</a>\r\n		</li>\r\n		{{/is_owner}}\r\n	</ul>\r\n'}),define("views/content/relation/comment-operation",["jquery","underscore","backbone","tools/pop-up-window","tools/view/content-tools","modules/content/sub-comment","modules/content/comment-good","modules/content/comment-best","collections/content/comment-goods","views/content/relation/comment-reflection","views/common/pop-up-window/translate","text!templates/content/relation/comment-operation.html"],function(e,t,n,i,o,a,r,s,l,c,d,u){var m=i.get("function");return n.View.extend({className:"block-post-operate",template:u,initialize:function(e){t.bindAll(this,"resetComment"),this.model.on("change:count_comment",this.resetComment,this),this.model.on("change:count_good",this.render,this),this.model.on("change:count_best",this.render,this),this.parent=e.parent,this.data=e.data||{}},serialize:function(){return{count_comment:this.model.get("count_comment"),count_good:this.model.get("count_good"),count_best:this.model.get("count_best"),has_set_good:this.model.get("has_set_good"),has_set_best:this.model.get("has_set_best"),is_owner:this.model.get("is_owner"),can_set_best:this.data.content&&this.data.content.get("can_set_best"),has_one_set_best:this.data.hasOneSetBest}},events:{"click .like":"setLike","click .unlike":"unLike","click .best":"setBest","click .unbest":"unBest","click .delete_comment":"deleted","click .comment_reflect":"insertReflectionForm","click .operation_sub_comments":"operationSubComments","click .laod_translate_comment_window":"laodTranslateWindow","click .load_comment_like_users_window":"loadLikeUsersWindow"},operationSubComments:function(t){var n=e(t.currentTarget).attr("data-off");"1"==n?this.model.get("count_comment")&&(this.data.subComments.addUrlParam({content_comment_id:this.model.get("id"),with_content_comment_user:1,with_user_profile:1,with_user_country:1}),this.data.subComments.fetch({resultTrue:function(){e(t.currentTarget).attr({"data-off":"0",title:"Hide Comments"}),e(t.currentTarget).html("&uarr;").removeClass("icon-blue-down").addClass("icon-blue-up")}})):this.data.subComments.clear(function(){e(t.currentTarget).attr({"data-off":"1",title:"Show Comments"}),e(t.currentTarget).html("&darr;").removeClass("icon-blue-up").addClass("icon-blue-down")})},resetComment:function(){this.$(".count_comment").html(this.model.get("count_comment"))},deleted:function(){var e=this;m.confirm({content:"Are you sure you want to delete this reflection?",yesCallBack:function(){e.model.deleted({success:function(){e.data.content instanceof n.Model&&e.data.content.set("count_comment",e.data.content.get("count_comment")-1),e.data.comments instanceof n.Collection&&e.data.comments.trigger("remove")}})}})},setLike:function(t){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this,i=new r;i.save({content_comment_id:n.model.get("id")},{resultTrue:function(){n.model.set("has_set_good",1),n.model.set("count_good",n.model.get("count_good")+1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})},unLike:function(t){if(this.model.get("has_set_good")){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this;n.good=new r({id:n.model.get("id")}),n.good.destroy({resultTrue:function(){n.model.set("has_set_good",0),n.model.set("count_good",n.model.get("count_good")-1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})}},setBest:function(t){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this,i=new s;i.save({content_comment_id:n.model.get("id")},{resultTrue:function(){n.model.set("has_set_best",1),n.model.set("count_best",n.model.get("count_best")+1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})},unBest:function(t){if(this.model.get("has_set_best")){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this;n.best=new s({id:n.model.get("id")}),n.best.destroy({resultTrue:function(){n.model.set("has_set_best",0),n.model.set("count_best",n.model.get("count_best")-1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})}},insertReflectionForm:function(){var e=this;e.parent.$(".block_comment_reflection").html(new c({commentId:e.model.get("id"),data:{model:e.model},_model:a,collection:e.data.subComments}).render().view.el)},laodTranslateWindow:function(){var t=this;m.open(new d({data:{text:e.trim(t.parent.$(".translate_comment_text").text())}}).render().view.el)},loadLikeUsersWindow:function(){var e=new l;e.addUrlParam({content_comment_id:this.model.get("id")}),o.loadLikeUsersWindow(e)}})}),define("text!templates/content/relation/sub-comment-operation.html",[],function(){return'<ul>\r\n	<li>\r\n		{{#has_set_good}}\r\n		<a class="unlike" href="javascript:;">Unlike</a>\r\n		{{/has_set_good}}\r\n		{{^has_set_good}}\r\n			<a class="like" href="javascript:;">Like</a>\r\n		{{/has_set_good}}\r\n		({{#count_good}}<a class="font-bold load_sub_comment_like_users_window" href="javascript:;">{{count_good}}</a>{{/count_good}}{{^count_good}}<b>{{count_good}}</b>{{/count_good}}),\r\n	</li>\r\n	{{#can_set_best}}\r\n	<li>\r\n		<a class="not_completed" href="javascript:;">\r\n			Best\r\n		</a>\r\n		(<b>{{best}}</b>),\r\n	</li>\r\n	{{/can_set_best}}\r\n	<li>\r\n		<a class="laod_translate_s_coment_window" href="javascript:;">\r\n			Translate{{#is_owner}},{{/is_owner}}\r\n		</a>\r\n	</li>\r\n	{{#is_owner}}\r\n	<li>\r\n		<a class="delete_sub_comment" href="javascript:;">\r\n			Delete\r\n		</a>\r\n	</li>\r\n	{{/is_owner}}\r\n</ul>\r\n'}),define("views/content/relation/sub-comment-operation",["jquery","underscore","backbone","tools/pop-up-window","tools/view/content-tools","collections/content/comment-goods","modules/content/comment-good","views/common/pop-up-window/translate","text!templates/content/relation/sub-comment-operation.html"],function(e,t,n,i,o,a,r,s,l){var c=i.get("function");return n.View.extend({className:"block-post-operate",template:l,serialize:function(){return{count_good:this.model.get("count_good"),has_set_good:this.model.get("has_set_good"),is_owner:this.model.get("is_owner"),can_set_best:0}},initialize:function(e){this.data=e.data,this.view=e.view,this.model.on("change:count_good",this.render,this)},events:{"click .like":"setLike","click .unlike":"unLike","click .delete_sub_comment":"deleted","click .laod_translate_s_coment_window":"laodTranslateWindow","click .load_sub_comment_like_users_window":"loadLikeUsersWindow"},deleted:function(){var e=this;c.confirm({content:"Are you sure you want to delete this reflection?",yesCallBack:function(){e.model.deleted({success:function(){e.data.comment.set("count_comment",e.data.comment.get("count_comment")-1)}})}})},setLike:function(t){var n=this;if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var i=new r;i.save({content_comment_id:n.model.get("id")},{resultTrue:function(){n.model.set("has_set_good",1),n.model.set("count_good",n.model.get("count_good")+1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})},unLike:function(t){if(this.model.get("has_set_good")){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this,i=new r({id:n.model.get("id")});i.destroy({resultTrue:function(){n.model.set("has_set_good",0),n.model.set("count_good",n.model.get("count_good")-1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})}},laodTranslateWindow:function(){var t=e.trim(this.view.parent.$(".translate_s_comment_text").text());c.open(new s({data:{text:t}}).render().view.el)},loadLikeUsersWindow:function(){var e=new a;e.addUrlParam({content_comment_id:this.model.get("id")}),o.loadLikeUsersWindow(e)}})}),define("text!templates/content/relation/sub-comment.html",[],function(){return'<div class="block-post-comment-item block-post-comment-sub-item block_post_comment_sub_item">\r\n	{{#user}}\r\n	<div class="sidebar l-float">\r\n		{{#avatar}}\r\n		<a class="avatar avatar-34 show_avatar link_bypass" href="{{view_url}}" title="{{display_name}}">\r\n			<img class="avatar_url_{{user.id}}" src="{{view_url}}" alt="{{display_name}}" title="{{fullname}}" />\r\n		</a>\r\n		{{/avatar}}\r\n	</div>\r\n	{{/user}}\r\n	<div class="content l-float">\r\n		<div class="block-post-relations block_sub_comment_relations">\r\n			{{#user}}\r\n				<div class="item">\r\n                    <div class="title">\r\n                        <a class="show_card" href="{{cn_number}}" data-type="user" data-id="{{id}}">\r\n                            {{display_name}}\r\n                        </a>\r\n                        <span class="comma _comma">,</span>\r\n                        <div class="clear"></div>\r\n                    </div>\r\n				</div>\r\n            {{/user}}\r\n            {{#user}}\r\n                {{#profile}}\r\n                    {{#position}}\r\n                        {{#school_name}}\r\n                        <div class="item">\r\n                            <div class="title">\r\n                                <a class="link_bypass" {{#web_address}}href="{{web_address}}"{{/web_address}} target="_blank" title="{{school_name}}">\r\n                                    {{school_name}}\r\n                                </a>\r\n                                <span class="comma _comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                        </div>\r\n                        {{/school_name}}\r\n                    {{/position}}\r\n                {{/profile}}\r\n				{{#country}}\r\n                {{#flag_url}}\r\n				<a class="r-float flag-s">\r\n					<img src="{{flag_url}}" title="{{name}}" alt="{{name}}" />\r\n				</a>\r\n                {{/flag_url}}\r\n				{{/country}}\r\n			{{/user}}\r\n			<span class="r-float time">\r\n				[{{display_time}}]\r\n			</span>\r\n			<div class="clear"></div>\r\n		</div>\r\n		<div class="body">\r\n			<div class="break-word translate_s_comment_text">\r\n				{{{text}}}\r\n			</div>\r\n		</div>\r\n		<div class="block-post-sub-comment-wrap">\r\n			<div class="operate visibility-hidden sub_comment_count content_operate">\r\n				\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>\r\n'}),define("views/content/relation/sub-comment",["jquery","underscore","backbone","views/content/relation/sub-comment-operation","text!templates/content/relation/sub-comment.html"],function(e,t,n,i,o){return n.View.extend({tagName:"li",template:o,serialize:function(){return this.model.toJSON()},initialize:function(e){this.data=e.data,this.model.view=this},beforeRender:function(){var e=this;this.setViews({".sub_comment_count":new i({model:this.model,data:{comment:e.data.comment},view:{parent:e}})})},afterRender:function(){this.$(".block_sub_comment_relations").find("._comma").last().remove()}})}),define("views/content/relation/sub-comments",["jquery","underscore","backbone","views/content/relation/sub-comment"],function(e,t,n,i){return n.View.extend({tagName:"ul",initialize:function(e){t.bindAll(this,"add","appOne","preOne","addAll"),this.collection.on("add",this.appOne,this),this.collection.on("reset",this.addAll,this),this.data=e.data,this.collection.view=this},addAll:function(){this.$el.empty(),this.collection.each(this.appOne)},add:function(e){var t=new i({model:e,data:{comment:this.data.comment}});return t},appOne:function(e){this.$el.append(this.add(e).render().view.el)},preOne:function(e){this.$el.prepend(this.add(e).render().view.el)}})}),define("collections/content/comment-comments",["jquery","underscore","backbone","modules/content/sub-comment"],function(e,t,n,i){return n.Collection.extend({model:i,urlRoot:"/api/content_sub_comment/",allowSetBest:function(){return this.length>3},clear:function(t){this.reset({silent:!0}),this.view.$el.empty(),e.isFunction(t)&&t()}})}),define("tools/summary-show-more",["jquery"],function(e){var t=function(){var t=this;this.defaults={contentObj:"",defaultHeight:96,isMix:!0},this.init=function(n){return t.settings=e.extend(!0,{},t.defaults,n),t},this.getButtonHtml=function(){return'<div class="show_more_button_wrapper" style="font-size: 14px; text-align: right; padding:5px;"><a class="summary_text_slide_up" href="javascript:;" style="display:none;">&uarr; slide up</a><a class="summary_text_show_more" href="javascript:;">...more</a></div>'},this.getPart1=function(e){return e&&e.indexOf("<br>")?e.substr(0,e.indexOf("<br>")):""},this.getPart2=function(e){return e&&e.indexOf("<br>")?e.substr(e.indexOf("<br>"),e.length):""},this.hasAttachment=function(){return e(t.settings.contentObj).find(".item_attachments_image_and_video").length>0},this.breakText=function(n){if(t.settings.isMix&&t.hasAttachment()){var i=e(t.settings.contentObj).find(".block_content_wrap"),o=i.find(".summary_text").html();o&&o.indexOf("<br>")>0&&(i.find(".summary_text").html(t.getPart1(o)),e(t.settings.contentObj).find(".item_attachments_image_and_video").css({"float":"left"}),e(t.settings.contentObj).append('<div class="summary_extra_text translate_text break-word" style="font-size: 1.4em; line-height: 16px;">'+t.getPart2(o)+'</div><div class="clear"></div'))}"function"==typeof n&&n()},this.getAttachmentHeight=function(){return t.hasAttachment()&&t.settings.isMix?e(t.settings.contentObj).find(".item_attachments_image_and_video").height()-5:0},this.getSummaryExtraText=function(){return t.settings.isMix&&e(t.settings.contentObj).find(".summary_extra_text").length>0?e(t.settings.contentObj).find(".summary_extra_text").height():0},this.insert=function(){e(t.settings.contentObj).after(t.getButtonHtml())},this.bindButton=function(){e(t.settings.contentObj).siblings(".show_more_button_wrapper").find(".summary_text_slide_up").click(function(){e(t.settings.contentObj).animate({height:t.settings.defaultHeight,overflow:"hidden"},500,"swing"),e(this).hide(),e(this).parent().find(".summary_text_show_more").show()}),e(t.settings.contentObj).siblings(".show_more_button_wrapper").find(".summary_text_show_more").click(function(){e(t.settings.contentObj).animate({height:e(t.settings.contentObj).attr("origin_height")},500,"swing"),e(this).hide(),e(this).parent().find(".summary_text_slide_up").show()})},this.removeButton=function(){e(t.settings.contentObj).siblings(".show_more_button_wrapper").remove()},this.setContentHeight=function(){e(t.settings.contentObj).attr({origin_height:t.originHeight}).css({height:t.settings.defaultHeight,overflow:"hidden"})},this.afterLoadTarget=function(n,i,o){var a=0,r=function(){setTimeout(function(){e(n).length>0&&t.settings.defaultHeight<e(n).height()?"function"==typeof i&&i():100>a&&(++a,r())},o)};r()},this.run=function(){t.afterLoadTarget(t.settings.contentObj,function(){t.settings.attachmentHeight=t.getAttachmentHeight();var n=e(t.settings.contentObj),i=n.height();t.originHeight=i;var o=t.settings.defaultHeight;i>o+t.settings.attachmentHeight&&(t.setContentHeight(),t.insert(),t.bindButton())},300),t.afterLoadTarget(e(t.settings.contentObj).find(".item_attachments_image_and_video"),function(){t.breakText(function(){t.settings.attachmentHeight=t.getAttachmentHeight(),t.settings.defaultHeight=t.settings.attachmentHeight+e(t.settings.contentObj).find(".block_content_wrap").height(),t.originHeight=t.getSummaryExtraText()+e(t.settings.contentObj).find(".block_content_wrap").height(),t.settings.defaultHeight>t.originHeight&&t.removeButton(),t.setContentHeight(),t.bindButton()})},300)}};return{init:function(e){(new t).init(e).run()}}}),define("text!templates/content/relation/comment.html",[],function(){return'<div class="block-post-comment-item block_post_comment_item">\r\n	{{#user}}\r\n	<div class="sidebar l-float">\r\n		{{#avatar}}\r\n		<a class="avatar avatar-34 show_avatar link_bypass" href="{{view_url}}" title="{{display_name}}">\r\n			<img class="avatar_url_{{user.id}}" src="{{view_url}}" alt="{{display_name}}" title="{{fullname}}" />\r\n		</a>\r\n		{{/avatar}}\r\n        <b>{{cn_number}}</b>\r\n	</div>\r\n	{{/user}}\r\n	<div class="content l-float">\r\n		<div class="block-post-relations block_comment_relations">\r\n			{{#user}}\r\n			<div class="item">\r\n                <div class="title">\r\n                    <a class="show_card" href="{{cn_number}}" data-type="user" data-id="{{id}}">\r\n                        {{display_name}}\r\n                    </a>\r\n                    <span class="comma _comma">,</span>\r\n                    <div class="clear"></div>\r\n                </div>\r\n			</div>\r\n			{{/user}}\r\n            {{#user}}\r\n                {{#profile}}\r\n                    {{#position}}\r\n                        {{#school_name}}\r\n                        <div class="item">\r\n                            <div class="title">\r\n                                <a class="link_bypass" {{#web_address}}href="{{web_address}}"{{/web_address}} target="_blank" title="{{school_name}}">\r\n                                    {{school_name}}\r\n                                </a>\r\n                                <span class="comma _comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                        </div>\r\n                        {{/school_name}}\r\n                    {{/position}}\r\n                {{/profile}}\r\n                {{#country}}\r\n                {{#flag_url}}\r\n                <a class="r-float flag-s">\r\n					<img src="{{flag_url}}" title="{{name}}" alt="{{name}}" />\r\n				</a>\r\n                {{/flag_url}}\r\n				{{/country}}\r\n			{{/user}}\r\n			<span class="r-float time">\r\n				[{{display_time}}]\r\n			</span>\r\n			<div class="clear"></div>\r\n		</div>\r\n		<div class="body">\r\n			<div class="break-word translate_comment_text">\r\n				{{{text}}}\r\n			</div>\r\n		</div>\r\n		<div class="block-post-sub-comment-wrap">\r\n			<div class="operate visibility-hidden comment_count content_operate">\r\n	\r\n			</div>\r\n			<div class="reflect">\r\n				<div class="head">\r\n					<div class="block-post-comment-list block-post-comment-sub-list block_post_sub_comment_list">\r\n					</div>\r\n				</div>\r\n				<div class="foot block_comment_reflection">\r\n					\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>\r\n'}),define("views/content/relation/comment",["jquery","underscore","backbone","views/content/relation/comment-operation","views/content/relation/sub-comments","collections/content/comment-comments","tools/summary-show-more","text!templates/content/relation/comment.html"],function(e,t,n,i,o,a,r,s){return n.View.extend({tagName:"li",template:s,serialize:function(){return this.model.toJSON()},initialize:function(e){this.pass=e.pass||{},this.model.view=this},events:{"mouseenter .block_post_comment_item":"displayOperate","mouseleave .block_post_comment_item":"hideOperate"},beforeRender:function(){var e=new a;this.setViews({".block_post_sub_comment_list":new o({collection:e,data:{comment:this.model}}),".comment_count":new i({model:this.model,parent:this,data:t.extend(this.pass,{subComments:e})})})},afterRender:function(){this.$(".block_comment_relations").find("._comma").last().remove(),r.init({contentObj:this.$(".translate_comment_text"),defaultHeight:65})},displayOperate:function(e){this.$(e.currentTarget).find(".content_operate").css("visibility","visible")},hideOperate:function(e){this.$(e.currentTarget).find(".content_operate").css("visibility","hidden")}})}),define("text!templates/common/home-head/alert-box/quick-look.html",[],function(){return'<span class="text-hide arrow icon-float-tip-arrow-5-quick-look">Arrow</span>\n<a class="text-hide bt-close-17-left bt-close-17 hide_float_box" href="javascript:;" title="close">Close</a>\n<div class="main">\n    <div class="center _center">\n        <div class="block-post-comment-list block_post_comment_list">\n            <ul class="_list">\n                \n            </ul>\n        </div>\n        <div class="error-wrap _error">\n            \n        </div>\n    </div>\n</div>\n\n'}),define("views/common/home-head/alert-box/notification/quick-look",["jquery","underscore","backbone","text!templates/common/home-head/alert-box/quick-look.html"],function(e,t,n,i){return n.View.extend({className:"float-box block-float-down-box float-box-quick-look",template:i,initialize:function(){},afterRender:function(){var e=this.model.view;this.$("._list").append(e.render().view.el)}})}),define("text!templates/common/home-head/alert-box/item/notification/item-others-add-content-comment.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>reflected</b> on a <a href="content/view/{{value.id}}">{{value.type}}</a> you also <b>reflected</b> on.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>reflected</b> on a {{type}} you also <b>reflected</b> on\n            , but this {{type}} has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        {{^value.content_comment_id}}\n            <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n        {{/value.content_comment_id}}\n        {{#value.content_comment_id}}\n            <a class="bt bt-blue bt-agree r-float quick_look" href="javascript:;" data-id="{{value.content_comment_id}}">VIEW</a>\n        {{/value.content_comment_id}}\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/others-add-content-comment",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","views/content/relation/comment","views/content/relation/sub-comment","views/common/home-head/alert-box/notification/quick-look","modules/content/comment","text!templates/common/home-head/alert-box/item/notification/item-others-add-content-comment.html"],function(e,t,n,i,o,a,r,s,l){_cache={};var c=n.View.extend({className:"message-wrap",template:l,events:{"click .quick_look":"showQuickLook"},serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};if(o){var l=this.model.get("extra_data");l&&l[1]&&(s.value.content_comment_id=l[1].value.id)}return s},initialize:function(e){this.parent={},e&&e.parent&&(this.parent=e.parent)},showQuickLook:function(n){var i=e(n.currentTarget),l=this.parent.$(".quick_look_wrap"),c=i.attr("data-id"),d={};if(c in _cache)d=_cache[c];else{d=new s;var u=this.model.get("extra_data"),m=t.first(this.model.get("users"));for(var h in u)if("content_comment"==u[h].data_model_name){d.set(u[h].value),d.set({user:m});var p=d.get("count");for(var f in p)d.set("count_"+f,p[f]);d.view=""==d.get("parent_id")?new o({model:d}):new a({model:d,data:{comment:new s}});break}_cache[d.get("id")]=d}var v=function(e){var t=i.closest("li").position().top,n=new r({model:e});l.attr({"data-id":e.get("id")}).css({top:t}).html(n.render().view.el).animate({left:-l.width()-10,opacity:1},"slow")};0==l.css("opacity")?v(d):l.animate({left:"+10px",opacity:0},"slow",function(){l.attr("data-id")!=d.get("id")&&v(d)})}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new c(this.options))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-system-message.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a> {{/first_user}}{{value}}.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a> {{/first_user}}sent you a system message\n            , but this message has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    <a class="bt bt-blue bt-agree r-float check_notification" href="user/notification/{{id}}">View</a>\n    <div class="clear"></div>\n</div>'
}),define("views/common/home-head/alert-box/notification/items/system-message",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-system-message.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-join-conexus.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>joined</b> your Conexus.\n            <a href="{{value.conexus_id}}">{{value.name}}</a>\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>joined</b> your Conexus.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="{{value.conexus_id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/join-conexus",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-join-conexus.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-accept-course-invite.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>accepted</b> your invitation to join the Course \n        {{#value}}<a href="{{value.course_id}}">({{value.name}})</a>{{/value}}.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="{{value.course_id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/accept-course-invite",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-accept-course-invite.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-accept-conexus-invite.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>accepted</b> your invitation to join the Conexus \n        {{#value}}<a href="{{value.conexus_id}}">({{value.name}})</a>{{/value}}.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="{{value.course_id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/accept-conexus-invite",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-accept-conexus-invite.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-join-course.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>joined</b> your Course.\n            <a href="{{value.course_id}}">{{value.name}}</a>\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>joined</b> your Course.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="{{value.course_id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/join-course",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-join-course.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-submit-quiz.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} {{value.text}}.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} send you a system message\n            , but this message has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/submit-quiz",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-submit-quiz.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-publish-quiz.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>published</b> a <a href="content/view/{{value.id}}">quiz</a>.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>published</b> a quiz\n            , but this quiz has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/publish-quiz",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-publish-quiz.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-expired-remind.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value.assignment}}\n            The <a href="content/view/{{id}}">task</a> {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} created in {{#value.model}}<a href="{{#conexus_id}}{{conexus_id}}{{/conexus_id}}{{#course_id}}{{course_id}}{{/course_id}}">{{name}}</a>{{/value.model}} is <b>approaching</b>.\n        {{/value.assignment}}\n        {{#value.event}}\n            The <a href="content/view/{{id}}">event</a> {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} created in {{#value.model}}<a href="{{#conexus_id}}{{conexus_id}}{{/conexus_id}}{{#course_id}}{{course_id}}{{/course_id}}">{{name}}</a>{{/value.model}} is <b>coming</b> due.\n        {{/value.event}}\n        {{^value}}\n            Your {{type}} is <b>coming</b> due, but this {{type}} has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value.assignment}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{id}}">View</a>\n    {{/value.assignment}}\n    {{#value.event}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{id}}">View</a>\n    {{/value.event}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/expired-remind",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-expired-remind.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r},l={};return this.model.get("extra_data").length>1&&(l=t.last(this.model.get("extra_data"))),s.value="assignment"==o.data_model_name?{assignment:o.value,model:l.value}:"event"==o.data_model_name?{event:o.value,model:l.value}:[],s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-grade-quiz.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>graded</b> your <a href="content/view/{{value.id}}">quiz</a>.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>graded</b> your quiz\n            , but this quiz has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/grade-quiz",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-grade-quiz.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-accept-join-course.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>accepts</b> your request to join the Course \n        {{#value}}<a href="{{value.course_id}}">({{value.name}})</a>{{/value}}.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="{{value.course_id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/accept-join-course",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-accept-join-course.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-mentioned.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>mentioned</b> you in a <a href="content/view/{{value.id}}">{{value.type}}</a>.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>mentioned</b> you in a <b>{{type}}</b>\n            , but this {{type}} has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/mentioned",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-mentioned.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-after-register.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} Hello, new CN member!\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    <a class="bt bt-blue bt-agree r-float check_notification" href="{{first_user.cn_number}}">View</a>\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/after-register",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-after-register.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-add-content-comment.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>reflected</b> on your <a href="content/view/{{value.id}}">{{value.type}}</a>.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>reflected</b> on your {{type}}, but this {{type}} has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        {{^value.content_comment_id}}\n            <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n        {{/value.content_comment_id}}\n        {{#value.content_comment_id}}\n            <a class="bt bt-blue bt-agree r-float quick_look" href="javascript:;" data-id="{{value.content_comment_id}}">VIEW</a>\n        {{/value.content_comment_id}}\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/add-content-comment",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","views/content/relation/comment","views/content/relation/sub-comment","views/common/home-head/alert-box/notification/quick-look","modules/content/comment","text!templates/common/home-head/alert-box/item/notification/item-add-content-comment.html"],function(e,t,n,i,o,a,r,s,l){var c={},d=n.View.extend({className:"message-wrap",template:l,events:{"click .quick_look":"showQuickLook"},serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};if(o){var l=this.model.get("extra_data");l&&l[1]&&(s.value.content_comment_id=l[1].value.id)}return s},initialize:function(e){this.parent={},e&&e.parent&&(this.parent=e.parent)},showQuickLook:function(n){var i=e(n.currentTarget),l=this.parent.$(".quick_look_wrap"),d=i.attr("data-id"),u={};if(d in c)u=c[d];else{u=new s;var m=this.model.get("extra_data"),h=t.first(this.model.get("users"));for(var p in m)if("content_comment"==m[p].data_model_name){u.set(m[p].value),u.set({user:h});var f=u.get("count");for(var v in f)u.set("count_"+v,f[v]);u.view=""==u.get("parent_id")?new o({model:u}):new a({model:u,data:{comment:new s}});break}c[u.get("id")]=u}var _=function(e){var t=i.closest("li").position().top,n=new r({model:e});l.attr({"data-id":e.get("id")}).css({top:t}).html(n.render().view.el).animate({left:-l.width()-10,opacity:1},"slow")};0==l.css("opacity")?_(u):l.animate({left:"+10px",opacity:0},"slow",function(){l.attr("data-id")!=u.get("id")&&_(u)})}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new d(this.options))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-accept-colleague.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>accepted</b> your colleague request.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    <a class="bt bt-blue bt-agree r-float check_notification" href="{{first_user.cn_number}}">View</a>\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/accept-colleague",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-accept-colleague.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-add-attachment-comment.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>reflected</b> on your attachment.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/attachment/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/add-attachment-comment",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-add-attachment-comment.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-answer-survey.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>answered</b> your <a href="content/view/{{value.id}}">survey</a>.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} <b>answered</b> your survey\n            , but this survey has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/answer-survey",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-answer-survey.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-others-like-content.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>liked</b> a <a href="content/view/{{value.id}}">{{value.type}}</a> you <b>reflected</b> on.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>liked</b> a {{type}} you <b>reflected</b> on\n            , but this {{type}} has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/view/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/others-like-content",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-others-like-content.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-inform-instructor-handle-join-course.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>requests</b> to join your Course.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="{{value.course_id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'
}),define("views/common/home-head/alert-box/notification/items/inform-instructor-handle-join-course",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-inform-instructor-handle-join-course.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-like-attachment.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>liked</b> your attachment.\n        {{/value}}\n        {{^value}}\n            {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>{{/first_user}} <b>liked</b> your attachment\n            , but this attachment has been deleted.\n        {{/value}}\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    {{#value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="content/attachment/{{value.id}}">View</a>\n    {{/value}}\n    {{^value}}\n        <a class="bt bt-blue bt-agree r-float check_notification" href="user">View</a>\n    {{/value}}\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/like-attachment",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-like-attachment.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/item/notification/item-add-follow.html",[],function(){return'<div class="main main-notification">\n    <div class="center">\n        {{#first_user}}<a href="{{cn_number}}">{{display_name}}</a>,{{/first_user}} is now <b>following</b> you.\n    </div>\n    <div class="bottom">\n        <span>{{display_time}}</span>\n    </div>\n</div>\n<div class="foot display-none display_operation">\n    <a class="bt bt-gray r-float delete_notification" href="javascript:;">CLEAR</a>\n    <a class="bt bt-blue bt-agree r-float check_notification" href="{{first_user.cn_number}}">View</a>\n    <div class="clear"></div>\n</div>'}),define("views/common/home-head/alert-box/notification/items/add-follow",["jquery","underscore","backbone","views/common/home-head/alert-box/notification/items/master_","text!templates/common/home-head/alert-box/item/notification/item-add-follow.html"],function(e,t,n,i,o){var a=n.View.extend({className:"message-wrap",template:o,serialize:function(){var e=t.first(this.model.get("users")),n=this.model.get("display_time"),i=this.model.get("id"),o=t.first(this.model.get("extra_data")),a="";t.isUndefined(o)||(a=o.data_model_name);var r=[];t.isUndefined(o)||!t.has(o,"value")||t.isEmpty(o.value)||(r=o);var s={id:i,first_user:e,display_time:n,type:a,value:r};return s}});return i.extend({beforeRender_:function(){this.insertView(".block_message_wrap",new a({model:this.model}))}})}),define("text!templates/common/home-head/alert-box/index/notification.html",[],function(){return'    <span class="text-hide icon-float-tip-arrow">\r\n        Arrow\r\n    </span>\r\n    <a class=" text-hide bt-close-17 close_box" href="javascript:;" title="close">\r\n        Close\r\n    </a>\r\n	<div class="main">\r\n		<div class="top">\r\n			<h4 class="l-float">\r\n				<span class="">New Notifications</span>\r\n			</h4>\r\n            <div class="clear"></div>\r\n		</div>\r\n		<div class="center center-relative block_opera_wrap">\r\n			<ul id="block_alert_box_notification_list" class="_list">\r\n				<li>\r\n                    <div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n                </li>\r\n			</ul>\r\n            <div class="quick-look-wrap quick_look_wrap">\r\n                \r\n            </div>\r\n		</div>\r\n	</div>\r\n'}),define("text!templates/common/home-head/alert-box/item/notification/opera-wrap.html",[],function(){return'{{#number}}\n    <a id="alert_box_notification_clear_all" class="l-float" href="javascript:;">Clear All</a>\n{{/number}}\n<a class="r-float" href="user/notification">Show History</a>\n<div class="clear"></div>'}),define("views/common/home-head/alert-box/notification/index",["jquery","underscore","backbone","tools/pop-up-window","views/common/home-head/alert-box/notification/items/like-content","views/common/home-head/alert-box/notification/items/others-add-content-comment","views/common/home-head/alert-box/notification/items/system-message","views/common/home-head/alert-box/notification/items/join-conexus","views/common/home-head/alert-box/notification/items/accept-course-invite","views/common/home-head/alert-box/notification/items/accept-conexus-invite","views/common/home-head/alert-box/notification/items/join-course","views/common/home-head/alert-box/notification/items/submit-quiz","views/common/home-head/alert-box/notification/items/publish-quiz","views/common/home-head/alert-box/notification/items/expired-remind","views/common/home-head/alert-box/notification/items/grade-quiz","views/common/home-head/alert-box/notification/items/accept-join-course","views/common/home-head/alert-box/notification/items/mentioned","views/common/home-head/alert-box/notification/items/after-register","views/common/home-head/alert-box/notification/items/add-content-comment","views/common/home-head/alert-box/notification/items/accept-colleague","views/common/home-head/alert-box/notification/items/add-attachment-comment","views/common/home-head/alert-box/notification/items/answer-survey","views/common/home-head/alert-box/notification/items/others-like-content","views/common/home-head/alert-box/notification/items/inform-instructor-handle-join-course","views/common/home-head/alert-box/notification/items/like-attachment","views/common/home-head/alert-box/notification/items/add-follow","views/common/home-head/alert-box/no-message","views/common/home-head/alert-box/notification/quick-look","collections/message-system/message-system-collections","text!templates/common/home-head/alert-box/index/notification.html","text!templates/common/home-head/alert-box/item/notification/opera-wrap.html"],function(e,t,n,i,o,a,r,s,l,c,d,u,m,h,p,f,v,_,g,b,y,w,x,k,C,E,A,S,T,N,R){var D=i.get("function"),O=T.get("NotificationMessages"),I={like_content:o,others_add_content_comment:a,system_message:r,join_conexus:s,accept_course_invite:l,accept_conexus_invite:c,join_course:d,submit_quiz:u,publish_quiz:m,expired_remind:h,grade_quiz:p,accept_join_course:f,mentioned:v,after_register:_,add_content_comment:g,accept_colleague:b,add_attachment_comment:y,answer_survey:w,others_like_content:x,inform_instructor_handle_join_course:k,like_attachment:C,add_follow:E},j=n.View.extend({template:R,className:"opera-wrap",events:{"click #alert_box_notification_clear_all":"clearAll"},initialize:function(e){this.model.on("change",this.render,this),this.parent=e.parent},serialize:function(){return this.model.toJSON()},clearAll:function(){var e=this;D.confirm({content:"Are you sure you want to clear all of the notifications?",yesCallBack:function(){e.collection.clearAll(function(){e.parent.deleted(),e.model.set({number:0})})}})}});return n.View.extend({className:"body block-float-down-box block-float-down-left-box block-alert-float-box",template:N,events:{"click .close_box":"deleted","mouseenter .block_alert_box_notification_item":"displayOperate","mouseleave .block_alert_box_notification_item":"hideOperate","click .hide_float_box":"closeQuickLook"},initialize:function(e){t.bindAll(this,"addAll","addOne","removeOne"),this.collection=new O,this.collection.on("all",this.refresh,this),this.collection.on("reset",this.addAll,this),this.collection.on("remove",this.removeOne,this),this.collection.on("remove",this.checkIsEmpty,this),this.parent=e.parent},afterRender:function(){var e=this,t=new j({model:this.model,collection:this.collection,parent:e});this.$("#block_alert_box_notification_list").before(t.render().view.el),this.collection.addUrlParam({with_user_notification_extra_data:1,user_notification_list_mark:"unread"}),this.collection.fetch({resultFalse:function(){e.refresh()}})},deleted:function(){this.remove()},checkIsEmpty:function(){this.collection.isEmpty()&&this.remove()},refresh:function(){if(this.collection.isEmpty()){var e=new A({message:"There are no new notifications."});this.$("._list").empty().append(e.render().view.el)}else this.$(".opera_wrap").show();this.model.set({number:this.collection.length}),this.closeQuickLook()},addOne:function(e){var t=new(I[e.get("type")])({model:e,parent:this});this.$("._list").append(t.render().view.el)},addAll:function(){this.$("._list").empty(),this.collection.each(this.addOne)},removeOne:function(){this.model.sub(1),this.closeQuickLook()},closeQuickLook:function(){var e=this.$(".quick_look_wrap");e.css({opacity:0}).empty()},displayOperate:function(t){var n=e(t.currentTarget).find(".display_operation");n.show()},hideOperate:function(t){var n=e(t.currentTarget).find(".display_operation");n.hide()}})}),define("text!templates/common/home-head/alert-box/button/notification.html",[],function(){return'<div class="head _head">\n    <a class="text-hide icon-alert icon-alert-notification load_message always_allow" href="javascript:;" data-type="notification" >\n        notification\n    </a>\n    <div class="alert-box-item-count-wrap alert_box_item_count_wrap">\n        \n    </div>\n</div>\n<div class="main notification-main _main">\n\n</div>\n'}),define("views/common/home-head/alert-box/notification/button",["jquery","underscore","backbone","tools/auto-close-view-window","views/common/home-head/alert-box/notification/index","views/common/home-head/alert-box/count","modules/message-system/message-count-notification","text!templates/common/home-head/alert-box/button/notification.html"],function(e,t,n,i,o,a,r,s){return n.View.extend({className:"item _item",template:s,events:{"click .load_message":"loadMessage"},initialize:function(){t.bindAll(this,"refresh"),this.model=r,this.model.on("change",this.refresh,this)},afterRender:function(){this.refresh()},loadMessage:function(t){var n=this,a=e(t.currentTarget),r=a.closest("#block_head");r.find("._main, ._box").fadeOut(),this.$("._item ._main").empty();var s=new o({parent:n,model:this.model});a.closest("._item").find("._main").hide().html(s.render().view.el).fadeIn(),i(t,s)},refresh:function(){if(this.model.get("number")){var e=new a({model:this.model});this.$("._head .alert_box_item_count_wrap").html(e.render().view.el).fadeIn()}else this.$("._head .alert_box_item_count_wrap").fadeOut()}})}),define("text!templates/common/home-head/alert-box.html",[],function(){return'<div class="block-alert-item-wrap block_alert_item_wrap">\r\n    \r\n    <div class="item" title="RememberIt">\r\n        <div class="head no-border-r">\r\n            <a class="text-hide icon-alert icon-alert-remember" href="content/remember" >\r\n                remember\r\n            </a>\r\n    <!--		 <b>8</b> -->\r\n        </div>\r\n        <div class="main">\r\n\r\n        </div>\r\n    </div>\r\n    <div class="clear"></div>\r\n</div>'}),define("views/common/home-head/alert-box",["jquery","underscore","backbone","views/common/home-head/alert-box/chat/button","views/common/home-head/alert-box/request/button","views/common/home-head/alert-box/email/button","views/common/home-head/alert-box/notification/button","text!templates/common/home-head/alert-box.html"],function(e,t,n,i,o,a,r,s){var l={notification:r,email:a,request:o,chat:i};return n.View.extend({className:"block-alert",template:s,afterRender:function(){for(var e in l)l.hasOwnProperty(e)&&this.$(".block_alert_item_wrap").prepend((new l[e]).render().view.el)},serialize:function(){return this.model.toJSON()}})}),define("text!templates/common/head.html",[],function(){return'<div class="head">\r\n	<div class="center web-fixed-width">\r\n		<h1 class="l-float sidebar-fixed-width">\r\n			<a  class="logo text-hide" href="" title="Go to CN home">\r\n				theCN logo\r\n			</a>\r\n		</h1>\r\n		<div class="r-float content-fixed-width">\r\n			<div class="l-float" id="block_search_box">\r\n				\r\n			</div>\r\n			<div class="l-float" id="block_alert_box">\r\n				\r\n			</div>\r\n			<div class="r-float" id="block_master_menu">\r\n				\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n		<div class="clear"></div>\r\n	</div>\r\n</div>\r\n'}),define("views/common/head",["jquery","underscore","backbone","views/common/home-head/search-box","views/common/home-head/master-menu","views/common/home-head/alert-box","modules/me","text!templates/common/head.html"],function(e,t,n,i,o,a,r,s){return n.View.extend({className:"block-head",template:s,beforeRender:function(){this.setViews({"#block_search_box":new i})},afterRender:function(){var e=this;this.model.setUrlParam({}),this.model.fetch({resultTrue:function(t){var n=new o({model:t});e.$("#block_master_menu").html(n.render().view.el);var i=new a({model:t});e.$("#block_alert_box").html(i.render().view.el)}})},initialize:function(){this.model=new r}})}),define("text!templates/common/foot.html",[],function(){return'<div class="head">\r\n	<div class="web-fixed-width">\r\n		<ul class="l-float">\r\n			<li>\r\n				<a class="text_terms_of_use" href="javascript:;">\r\n					Terms of Use\r\n				</a>\r\n			</li>\r\n			<li>\r\n				<a class="text_privacy_policy" href="javascript:;">\r\n					Privacy Policy\r\n				</a>\r\n			</li>\r\n			<li>\r\n				<a href="mailto:help@theCN.com">\r\n					help@theCN.com\r\n				</a>\r\n			</li>\r\n		</ul>\r\n		<p class="r-float">\r\n			Copyright &copy; 2011-13.  CourseNetworking LLC.  All rights reserved.\r\n		</p>\r\n		<div class="clear"></div>\r\n	</div>\r\n</div>\r\n<div class="foot">\r\n	<div class="web-fixed-width">\r\n		<p class="r-float">\r\n			Rumi: V3.1.6 Beta,  Apr 3, 2013\r\n		</p>\r\n		<div class="clear"></div>\r\n	</div>\r\n</div>'}),define("views/common/foot",["backbone","text!templates/common/foot.html"],function(e,t){return e.View.extend({className:"block-foot",template:t})}),define("text!templates/layout/home.html",[],function(){return'<div class="wrap-web wrap-home" id="wrap_home">\n    <!-- head -->\n    <div class="head" id="block_head">\n        \n    </div>\n    <!-- /head -->\n\n    <!-- main -->\n    <div class="main">\n\n        <!-- center -->\n        <div class="center">\n            <div class="web-fixed-width">\n                <div class="l-float" id="block_sidebar">\n                    \n                </div>\n                <div class="l-float" id="block_content">\n\n                </div>\n                <div class="clear"></div>\n            </div>\n        </div>\n        <!-- /center -->\n        \n        <!-- bottom -->\n        <div id="block_foot">\n            \n        <div>\n        <!-- /bottom -->\n        \n    </div>\n    <!-- /main -->\n</div>'}),define("views/layout/home",["app","views/common/head","views/common/foot","text!templates/layout/home.html"],function(e,t,n,i){return e.useLayout({template:i,views:{"#block_head":new t,"#block_foot":new n}})}),define("text!templates/common/member-wall-item.html",[],function(){return'<a class="avatar show_card" href="{{cn_number}}" data-online="{{is_online}}" data-id="{{cn_number}}" data-type="cn_number">\r\n	<img class="avatar_url_{{id}}" src="{{avatar.view_url}}" alt="{{display_name}}" />\r\n    {{#is_online}}\r\n    <span class="icon-online">online</span>\r\n    {{/is_online}}\r\n</a>\r\n<a class="show_card" href="{{cn_number}}" data-type="cn_number" data-id="{{cn_number}}"><b>{{cn_number}}</b></a>\r\n'}),define("text!templates/common/member-wall.html",[],function(){return'\r\n	<div class="head">\r\n		<span class="l-float">MOST RECENT</span>\r\n		<span class="right r-float">\r\n			<i class="icon-online"></i>\r\n			<b>STATUS:</b>\r\n			<a id="member_wall_refresh_btn" href="javascript:;">ONLINE</a>\r\n		</span>\r\n		<div class="clear"></div>\r\n	</div>\r\n	<div class="main">\r\n		<div class="top">\r\n			<ul id="block_member_wall_list">\r\n				<li>\r\n                    <div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n                </li>\r\n			</ul>\r\n		</div>\r\n		<div class="bottom">\r\n			<a id="member_wall_show_more_btn" href="javascript:;">SHOW MORE</a>\r\n		</div>\r\n	</div>\r\n'}),define("views/common/member-wall",["jquery","underscore","backbone","text!templates/loading/head-horizontal.html","text!templates/common/member-wall-item.html","text!templates/common/member-wall.html"],function(e,t,n,i,o,a){var r=n.View.extend({tagName:"li",template:o,serialize:function(){return this.model.toJSON()}});return n.View.extend({className:"block-member-wall",template:a,events:{"click #member_wall_show_more_btn":"showMore","click #member_wall_refresh_btn":"refresh"},data:{},initialize:function(n){"undefined"!==e.type(n)&&"undefined"!==e.type(n.data)&&(this.data=n.data),t.bindAll(this,"addOne","addAll")},afterRender:function(){var e=this;this.collection.on("reset",this.addAll,this),this.collection.on("add",this.addOne,this),e.data.limit=25,this.collection.addUrlParam(e.data),this.collection.fetch({resultFalse:function(){e.$el.empty()}})},addAll:function(){var e=this.$("#block_member_wall_list");e.empty(),e.hide(),this.collection.each(this.addOne),e.fadeIn("slow")},addOne:function(e){this.user=e;var t=new r({model:e});this.$("#block_member_wall_list").append(t.render().view.el)},showMore:function(t){var n=this,o=e(t.currentTarget);return o.attr("locked")?!1:(o.attr("locked","locked"),n.$el.find(".bottom").before(i),n.data.limit+=25,this.collection.addUrlParam(n.data),this.collection.fetch({resultTrue:function(e,t){n.$(".block_loading").remove(),n.data.limit>t.data.length?o.html("NO MORE"):100==t.data.length?o.hide():o.removeAttr("locked")},resultFalse:function(){o.removeAttr("locked")}}),void 0)},refresh:function(t){var n=this,o=e(t.currentTarget);return o.attr("locked")?!1:(o.attr("locked","locked"),this.$("#block_member_wall_list").empty(),this.$("#block_member_wall_list").prepend(i),this.collection.addUrlParam(n.data),this.collection.fetch({resultTrue:function(){n.$(".block_loading").remove(),o.removeAttr("locked")},resultFalse:function(){o.removeAttr("locked")}}),void 0)}})}),define("modules/user-avatar",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/user_avatar/",urlParam:{as_current_user_avatar:1},defaults:function(){return{type:"",value:""}}})}),define("modules/attachment-picture-thumb",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/attachment_picture_thumb/",defaults:function(){return{width:0,height:0,top:0,left:0,do_replace:0}}})}),define("text!templates/common/crop-picture.html",[],function(){return'<link rel="stylesheet" href="js/ui/jcrop/css/jquery.Jcrop.min.css" type="text/css" />\n<style>\n	.crop-wrap{\n        max-width: 680px;\n        overflow: hidden;\n	}\n	.crop-wrap > .sidebar{\n		border: 1px solid #ccc;\n		padding: 1px;\n	}\n	.crop-wrap > .sidebar img{\n		max-width: 500px;\n	}\n	.crop-wrap > .lateral{\n		max-width: 160px;\n		margin-left: 10px;\n		padding: 1px;\n	}\n	.crop-wrap > .lateral > .top{\n		border: 1px solid #ccc;\n        overflow: hidden;\n        max-width: 150px;\n	}\n	.crop-wrap > .lateral > .bottom{\n		margin: 30px 0 0 0;  \n		text-align: center;\n	}\n	.btn-crop{\n		padding: 5px 7px; \n		font-weight: bold;\n	}\n</style>\n<input type="hidden" id="origin_id"/>\n<div class="l-float sidebar">\n	<img id="target" src="{{view_url}}" alt="Flowers" />\n</div>\n<div class="l-float lateral">\n	<div class="top" id="preview_wrap">\n		<img id="preview" src="{{view_url}}" alt="Preview" />\n	</div>\n	<div class="bottom">\n		<button class="btn-crop bt bt-gray" id="crop_btn">Done Cropping</button>\n	</div>\n</div>\n<div class="clear"></div>\n'}),function(e){e.Jcrop=function(t,n){function i(e){return Math.round(e)+"px"}function o(e){return F.baseClass+"-"+e}function a(){return e.fx.step.hasOwnProperty("backgroundColor")}function r(t){var n=e(t).offset();return[n.left,n.top]}function s(e){return[e.pageX-j[0],e.pageY-j[1]]}function l(t){"object"!=typeof t&&(t={}),F=e.extend(F,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof F[t]&&(F[t]=function(){})})}function c(e,t,n){if(j=r(V),pt.setCursor("move"===e?e:e+"-resize"),"move"===e)return pt.activateHandlers(u(t),v,n);var i=ut.getFixed(),o=m(e),a=ut.getCorner(m(o));ut.setPressed(ut.getCorner(o)),ut.setCurrent(a),pt.activateHandlers(d(e,i),v,n)}function d(e,t){return function(n){if(F.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}ut.setCurrent(n),ht.update()}}function u(e){var t=e;return ft.watchKeys(),function(e){ut.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ht.update()}}function m(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function h(e){return function(t){return F.disabled?!1:"move"!==e||F.allowMove?(j=r(V),it=!0,c(e,s(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function p(e,t,n){var i=e.width(),o=e.height();i>t&&t>0&&(i=t,o=t/e.width()*e.height()),o>n&&n>0&&(o=n,i=n/e.height()*e.width()),tt=e.width()/i,nt=e.height()/o,e.width(i).height(o)}function f(e){return{x:e.x*tt,y:e.y*nt,x2:e.x2*tt,y2:e.y2*nt,w:e.w*tt,h:e.h*nt}}function v(){var e=ut.getFixed();e.w>F.minSelect[0]&&e.h>F.minSelect[1]?(ht.enableHandles(),ht.done()):ht.release(),pt.setCursor(F.allowSelect?"crosshair":"default")}function _(e){if(F.disabled)return!1;if(!F.allowSelect)return!1;it=!0,j=r(V),ht.disableHandles(),pt.setCursor("crosshair");var t=s(e);return ut.setPressed(t),ht.update(),pt.activateHandlers(g,v,"touch"===e.type.substring(0,5)),ft.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function g(e){ut.setCurrent(e),ht.update()}function b(){var t=e("<div></div>").addClass(o("tracker"));return B&&t.css({opacity:0,backgroundColor:"white"}),t}function y(e){Y.removeClass().addClass(o("holder")).addClass(e)}function w(e,t){function n(){window.setTimeout(g,u)}var i=e[0]/tt,o=e[1]/nt,a=e[2]/tt,r=e[3]/nt;if(!ot){var s=ut.flipCoords(i,o,a,r),l=ut.getFixed(),c=[l.x,l.y,l.x2,l.y2],d=c,u=F.animationDelay,m=s[0]-c[0],h=s[1]-c[1],p=s[2]-c[2],f=s[3]-c[3],v=0,_=F.swingSpeed;i=d[0],o=d[1],a=d[2],r=d[3],ht.animMode(!0);var g=function(){return function(){v+=(100-v)/_,d[0]=Math.round(i+v/100*m),d[1]=Math.round(o+v/100*h),d[2]=Math.round(a+v/100*p),d[3]=Math.round(r+v/100*f),v>=99.8&&(v=100),100>v?(k(d),n()):(ht.done(),ht.animMode(!1),"function"==typeof t&&t.call(vt))}}();n()}}function x(e){k([e[0]/tt,e[1]/nt,e[2]/tt,e[3]/nt]),F.onSelect.call(vt,f(ut.getFixed())),ht.enableHandles()}function k(e){ut.setPressed([e[0],e[1]]),ut.setCurrent([e[2],e[3]]),ht.update()}function C(){return f(ut.getFixed())}function E(){return ut.getFixed()}function A(e){l(e),I()}function S(){F.disabled=!0,ht.disableHandles(),ht.setCursor("default"),pt.setCursor("default")}function T(){F.disabled=!1,I()}function N(){ht.done(),pt.activateHandlers(null,null)}function R(){Y.remove(),M.show(),M.css("visibility","visible"),e(t).removeData("Jcrop")}function D(e,t){ht.release(),S();var n=new Image;n.onload=function(){var i=n.width,o=n.height,a=F.boxWidth,r=F.boxHeight;V.width(i).height(o),V.attr("src",e),W.attr("src",e),p(V,a,r),$=V.width(),H=V.height(),W.width($).height(H),st.width($+2*rt).height(H+2*rt),Y.width($).height(H),mt.resize($,H),T(),"function"==typeof t&&t.call(vt)},n.src=e}function O(e,t,n){var i=t||F.bgColor;F.bgFade&&a()&&F.fadeTime&&!n?e.animate({backgroundColor:i},{queue:!1,duration:F.fadeTime}):e.css("backgroundColor",i)}function I(e){F.allowResize?e?ht.enableOnly():ht.enableHandles():ht.disableHandles(),pt.setCursor(F.allowSelect?"crosshair":"default"),ht.setCursor(F.allowMove?"move":"default"),F.hasOwnProperty("trueSize")&&(tt=F.trueSize[0]/$,nt=F.trueSize[1]/H),F.hasOwnProperty("setSelect")&&(x(F.setSelect),ht.done(),delete F.setSelect),mt.refresh(),F.bgColor!=lt&&(O(F.shade?mt.getShades():Y,F.shade?F.shadeColor||F.bgColor:F.bgColor),lt=F.bgColor),ct!=F.bgOpacity&&(ct=F.bgOpacity,F.shade?mt.refresh():ht.setBgOpacity(ct)),Q=F.maxSize[0]||0,X=F.maxSize[1]||0,Z=F.minSize[0]||0,et=F.minSize[1]||0,F.hasOwnProperty("outerImage")&&(V.attr("src",F.outerImage),delete F.outerImage),ht.refresh()}var j,F=e.extend({},e.Jcrop.defaults),U=navigator.userAgent.toLowerCase(),B=/msie/.test(U),L=/msie [1-6]\./.test(U);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),l(n);var P={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},M=e(t),q=!0;if("IMG"==t.tagName){if(0!=M[0].width&&0!=M[0].height)M.width(M[0].width),M.height(M[0].height);else{var z=new Image;z.src=M[0].src,M.width(z.width),M.height(z.height)}var V=M.clone().removeAttr("id").css(P).show();V.width(M.width()),V.height(M.height()),M.after(V).hide()}else V=M.css(P).show(),q=!1,null===F.shade&&(F.shade=!0);p(V,F.boxWidth,F.boxHeight);var $=V.width(),H=V.height(),Y=e("<div />").width($).height(H).addClass(o("holder")).css({position:"relative",backgroundColor:F.bgColor}).insertAfter(M).append(V);F.addClass&&Y.addClass(F.addClass);var W=e("<div />"),G=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),J=e("<div />").width("100%").height("100%").css("zIndex",320),K=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=ut.getFixed();F.onDblClick.call(vt,e)}).insertBefore(V).append(G,J);q&&(W=e("<img />").attr("src",V.attr("src")).css(P).width($).height(H),G.append(W)),L&&K.css({overflowY:"hidden"});var Q,X,Z,et,tt,nt,it,ot,at,rt=F.boundary,st=b().width($+2*rt).height(H+2*rt).css({position:"absolute",top:i(-rt),left:i(-rt),zIndex:290}).mousedown(_),lt=F.bgColor,ct=F.bgOpacity;j=r(V);var dt=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(e=0;n.length>e;e++){var o=n[e];o="on"+o;var a=o in i;a||(i.setAttribute(o,"return;"),a="function"==typeof i[o]),t[n[e]]=a}return t.touchstart&&t.touchend&&t.touchmove}catch(r){return!1}}function t(){return F.touchSupport===!0||F.touchSupport===!1?F.touchSupport:e()}return{createDragger:function(e){return function(t){return F.disabled?!1:"move"!==e||F.allowMove?(j=r(V),it=!0,c(e,s(dt.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return _(dt.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),ut=function(){function e(e){e=r(e),p=m=e[0],f=h=e[1]}function t(e){e=r(e),d=e[0]-p,u=e[1]-f,p=e[0],f=e[1]}function n(){return[d,u]}function i(e){var t=e[0],n=e[1];0>m+t&&(t-=t+m),0>h+n&&(n-=n+h),f+n>H&&(n+=H-(f+n)),p+t>$&&(t+=$-(p+t)),m+=t,p+=t,h+=n,f+=n}function o(e){var t=a();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function a(){if(!F.aspectRatio)return l();var e,t,n,i,o=F.aspectRatio,a=F.minSize[0]/tt,r=F.maxSize[0]/tt,d=F.maxSize[1]/nt,u=p-m,v=f-h,_=Math.abs(u),g=Math.abs(v),b=_/g;return 0===r&&(r=10*$),0===d&&(d=10*H),o>b?(t=f,n=g*o,e=0>u?m-n:n+m,0>e?(e=0,i=Math.abs((e-m)/o),t=0>v?h-i:i+h):e>$&&(e=$,i=Math.abs((e-m)/o),t=0>v?h-i:i+h)):(e=p,i=_/o,t=0>v?h-i:h+i,0>t?(t=0,n=Math.abs((t-h)*o),e=0>u?m-n:n+m):t>H&&(t=H,n=Math.abs(t-h)*o,e=0>u?m-n:n+m)),e>m?(a>e-m?e=m+a:e-m>r&&(e=m+r),t=t>h?h+(e-m)/o:h-(e-m)/o):m>e&&(a>m-e?e=m-a:m-e>r&&(e=m-r),t=t>h?h+(m-e)/o:h-(m-e)/o),0>e?(m-=e,e=0):e>$&&(m-=e-$,e=$),0>t?(h-=t,t=0):t>H&&(h-=t-H,t=H),c(s(m,h,e,t))}function r(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>$&&(e[0]=$),e[1]>H&&(e[1]=H),[Math.round(e[0]),Math.round(e[1])]}function s(e,t,n,i){var o=e,a=n,r=t,s=i;return e>n&&(o=n,a=e),t>i&&(r=i,s=t),[o,r,a,s]}function l(){var e,t=p-m,n=f-h;return Q&&Math.abs(t)>Q&&(p=t>0?m+Q:m-Q),X&&Math.abs(n)>X&&(f=n>0?h+X:h-X),et/nt&&et/nt>Math.abs(n)&&(f=n>0?h+et/nt:h-et/nt),Z/tt&&Z/tt>Math.abs(t)&&(p=t>0?m+Z/tt:m-Z/tt),0>m&&(p-=m,m-=m),0>h&&(f-=h,h-=h),0>p&&(m-=p,p-=p),0>f&&(h-=f,f-=f),p>$&&(e=p-$,m-=e,p-=e),f>H&&(e=f-H,h-=e,f-=e),m>$&&(e=m-H,f-=e,h-=e),h>H&&(e=h-H,f-=e,h-=e),c(s(m,h,p,f))}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var d,u,m=0,h=0,p=0,f=0;return{flipCoords:s,setPressed:e,setCurrent:t,getOffset:n,moveOffset:i,getCorner:o,getFixed:a}}(),mt=function(){function t(e,t){p.left.css({height:i(t)}),p.right.css({height:i(t)})}function n(){return o(ut.getFixed())}function o(e){p.top.css({left:i(e.x),width:i(e.w),height:i(e.y)}),p.bottom.css({top:i(e.y2),left:i(e.x),width:i(e.w),height:i(H-e.y2)}),p.right.css({left:i(e.x2),width:i($-e.x2)}),p.left.css({width:i(e.x)})}function a(){return e("<div />").css({position:"absolute",backgroundColor:F.shadeColor||F.bgColor}).appendTo(h)}function r(){m||(m=!0,h.insertBefore(V),n(),ht.setBgOpacity(1,0,1),W.hide(),s(F.shadeColor||F.bgColor,1),ht.isAwake()?c(F.bgOpacity,1):c(1,1))}function s(e,t){O(u(),e,t)}function l(){m&&(h.remove(),W.show(),m=!1,ht.isAwake()?ht.setBgOpacity(F.bgOpacity,1,1):(ht.setBgOpacity(1,1,1),ht.disableHandles()),O(Y,0,1))}function c(e,t){m&&(F.bgFade&&!t?h.animate({opacity:1-e},{queue:!1,duration:F.fadeTime}):h.css({opacity:1-e}))}function d(){F.shade?r():l(),ht.isAwake()&&c(F.bgOpacity)}function u(){return h.children()}var m=!1,h=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),p={top:a(),left:a().height(H),right:a().height(H),bottom:a()};return{update:n,updateRaw:o,getShades:u,setBgColor:s,enable:r,disable:l,resize:t,refresh:d,opacity:c}}(),ht=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:F.borderOpacity}).addClass(o(t));return G.append(n),n}function n(t,n){var i=e("<div />").mousedown(h(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return dt.support&&i.bind("touchstart.jcrop",dt.createDragger(t)),J.append(i),i}function a(e){var t=F.handleSize,i=n(e,S++).css({opacity:F.handleOpacity}).addClass(o("handle"));return t&&i.width(t).height(t),i}function r(e){return n(e,S++).addClass("jcrop-dragbar")}function s(e){var t;for(t=0;e.length>t;t++)R[e[t]]=r(e[t])}function l(e){var n,i;for(i=0;e.length>i;i++){switch(e[i]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}T[e[i]]=t(n)}}function c(e){var t;for(t=0;e.length>t;t++)N[e[t]]=a(e[t])}function d(e,t){F.shade||W.css({top:i(-t),left:i(-e)}),K.css({top:i(t),left:i(e)})
}function u(e,t){K.width(Math.round(e)).height(Math.round(t))}function m(){var e=ut.getFixed();ut.setPressed([e.x,e.y]),ut.setCurrent([e.x2,e.y2]),p()}function p(e){return A?v(e):void 0}function v(e){var t=ut.getFixed();u(t.w,t.h),d(t.x,t.y),F.shade&&mt.updateRaw(t),A||g(),e?F.onSelect.call(vt,f(t)):F.onChange.call(vt,f(t))}function _(e,t,n){(A||t)&&(F.bgFade&&!n?V.animate({opacity:e},{queue:!1,duration:F.fadeTime}):V.css("opacity",e))}function g(){K.show(),F.shade?mt.opacity(ct):_(ct,!0),A=!0}function y(){k(),K.hide(),F.shade?mt.opacity(1):_(1),A=!1,F.onRelease.call(vt)}function w(){D&&J.show()}function x(){return D=!0,F.allowResize?(J.show(),!0):void 0}function k(){D=!1,J.hide()}function C(e){e?(ot=!0,k()):(ot=!1,x())}function E(){C(!1),m()}var A,S=370,T={},N={},R={},D=!1;F.dragEdges&&e.isArray(F.createDragbars)&&s(F.createDragbars),e.isArray(F.createHandles)&&c(F.createHandles),F.drawBorders&&e.isArray(F.createBorders)&&l(F.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var O=b().mousedown(h("move")).css({cursor:"move",position:"absolute",zIndex:360});return dt.support&&O.bind("touchstart.jcrop",dt.createDragger("move")),G.append(O),k(),{updateVisible:p,update:v,release:y,refresh:m,isAwake:function(){return A},setCursor:function(e){O.css("cursor",e)},enableHandles:x,enableOnly:function(){D=!0},showHandles:w,disableHandles:k,animMode:C,setBgOpacity:_,done:E}}(),pt=function(){function t(t){st.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",r).bind("touchend.jcrop",l):m&&e(document).bind("mousemove.jcrop",i).bind("mouseup.jcrop",o)}function n(){st.css({zIndex:290}),e(document).unbind(".jcrop")}function i(e){return d(s(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),it&&(it=!1,u(s(e)),ht.isAwake()&&F.onSelect.call(vt,f(ut.getFixed())),n(),d=function(){},u=function(){}),!1}function a(e,n,i){return it=!0,d=e,u=n,t(i),!1}function r(e){return d(s(dt.cfilter(e))),!1}function l(e){return o(dt.cfilter(e))}function c(e){st.css("cursor",e)}var d=function(){},u=function(){},m=F.trackDocument;return m||st.mousemove(i).mouseup(o).mouseout(o),V.before(st),{activateHandlers:a,setCursor:c}}(),ft=function(){function t(){F.keySupport&&(a.show(),a.focus())}function n(){a.hide()}function i(e,t,n){F.allowMove&&(ut.moveOffset([t,n]),ht.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function o(e){if(e.ctrlKey||e.metaKey)return!0;at=e.shiftKey?!0:!1;var t=at?10:1;switch(e.keyCode){case 37:i(e,-t,0);break;case 39:i(e,t,0);break;case 38:i(e,0,-t);break;case 40:i(e,0,t);break;case 27:F.allowSelect&&ht.release();break;case 9:return!0}return!1}var a=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),r=e("<div />").css({position:"absolute",overflow:"hidden"}).append(a);return F.keySupport&&(a.keydown(o).blur(n),L||!F.fixedSupport?(a.css({position:"absolute",left:"-20px"}),r.append(a).insertBefore(V)):a.insertBefore(V)),{watchKeys:t}}();dt.support&&st.bind("touchstart.jcrop",dt.newSelection),J.hide(),I(!0);var vt={setImage:D,animateTo:w,setSelect:x,setOptions:A,tellSelect:C,tellScaled:E,setClass:y,disable:S,enable:T,cancel:N,release:ht.release,destroy:R,focus:ft.watchKeys,getBounds:function(){return[$*tt,H*nt]},getWidgetSize:function(){return[$,H]},getScaleFactor:function(){return[tt,nt]},getOptions:function(){return F},ui:{holder:Y,selection:K}};return B&&Y.bind("selectstart",function(){return!1}),M.data("Jcrop",vt),vt},e.fn.Jcrop=function(t,n){var i;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i)}):(e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i))}),this},e.Jcrop.Loader=function(t,n,i){function o(){r.complete?(a.unbind(".jcloader"),e.isFunction(n)&&n.call(r)):window.setTimeout(o,50)}var a=e(t),r=a[0];a.bind("load.jcloader",o).bind("error.jcloader",function(){a.unbind(".jcloader"),e.isFunction(i)&&i.call(r)}),r.complete&&e.isFunction(n)&&(a.unbind(".jcloader"),n.call(r))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),define("jcrop",function(){}),define("views/common/crop-picture",["jquery","underscore","backbone","modules/attachment-picture-thumb","tools/pop-up-window","text!templates/common/crop-picture.html","jcrop"],function(e,t,n,i,o,a){return n.View.extend({className:"crop-wrap",template:a,initialize:function(t,n){this.callBack=e.extend(!0,{},this.callBack,n),this.pluginParams=e.extend(!0,{},this.pluginParams,t.pluginParams),this.model="object"===e.type(t)?new i(t):new i},serialize:function(){return this.model.toJSON()},events:{"click #crop_btn":"crop"},callBack:{success:function(){},error:function(){}},pluginParams:{previewSize:[150,150],replaceOriginImg:0,aspectRatio:1,minSize:[],maxSize:[],setSelect:[],bgColor:"black",bgOpacity:.6},getJcropApi:function(){return"undefined"!==e.type(this.jcropApi)?this.jcropApi:!1},getWidth:function(){return this.model.get("width")},getHeight:function(){return this.model.get("height")},hasCrop:function(){return this.getWidth()&&this.getHeight()},crop:function(){var e=this;return this.hasCrop()?(this.model.save({},{resultTrue:function(t,n){e.callBack.success(n),o.get("function").close()}}),void 0):(alert("Please crop the picture."),!1)},setPreviewPictureSize:function(){var e=this;e.$("#preview_wrap").css({width:e.pluginParams.previewSize[0],height:e.pluginParams.previewSize[1],overflow:"hidden"})},setCropData:function(t){var n=this;"object"===e.type(t)&&this.model.set({width:t.w,height:t.h,top:t.y,left:t.x,do_replace:n.pluginParams.replaceOriginImg})},afterRender:function(){var t=this;t.setPreviewPictureSize();var n=function(e){if(parseInt(e.w)>0){t.setCropData(e);var n=t.pluginParams.previewSize[0]/e.w,i=t.pluginParams.previewSize[1]/e.h;t.$("#preview").css({width:Math.round(n*t.bounds[0])+"px",height:Math.round(i*t.bounds[1])+"px",marginLeft:"-"+Math.round(n*e.x)+"px",marginTop:"-"+Math.round(i*e.y)+"px"})}},i=e.extend(!0,{},t.pluginParams,{onChange:n,onSelect:n});t.$("#target").Jcrop(i,function(){t.bounds=this.getBounds(),t.jcropApi=this})}})}),define("text!templates/user/common/sidebar/profile-box.html",[],function(){return'<div class="sidebar l-float">\r\n	<a href="{{cn_number}}">\r\n        <img class="avatar_url_{{id}}" src="{{avatar.view_url}}" alt="{{display_name}}" />\r\n    </a>\r\n    <div id="block_upload_avatar_button_box"><a id="upload_avatar" class="have_not_flash" href="javascript:;">(<u>upload photo</u>)</a></div>\r\n</div>\r\n<div class="content l-float">\r\n	<div class="top">\r\n		<a href="{{cn_number}}" title="{{display_name}}"><b>{{display_name}}</b></a>\r\n		<a href="user/edit">(<u>edit</u>)</a>\r\n	</div>\r\n	<div class="bottom">\r\n		<div class="l-float anar-wrap">\r\n			<div class="head">\r\n				<span>CN#</span> <b>{{cn_number}}</b>\r\n			</div>\r\n			{{#score}}\r\n			<div class="main">\r\n				<a class="anar-18-20 load_about_anar_window" href="javascript:;">{{display_total}}</a>\r\n			</div>\r\n			{{/score}}\r\n		</div>\r\n		<!-- <div class="r-float online-wrap">\r\n			<div class="block-online-opera">\r\n				<div class="head">\r\n					<span class="icon-onlie-opera icon-onlie-opera-on">Online</span>\r\n				</div>\r\n				<div class="main">\r\n					<ul>\r\n						<li>\r\n							<span class="icon-onlie-opera icon-onlie-opera-away">Away</span>\r\n						</li>\r\n						<li>\r\n							<span class="icon-onlie-opera icon-onlie-opera-busy">Busy</span>\r\n						</li>\r\n					</ul>\r\n				</div>\r\n			</div>\r\n		</div> -->\r\n		<div class="clear"></div>\r\n	</div>\r\n</div>\r\n<div class="clear"></div>'}),define("views/user/common/sidebar/profile-box",["jquery","underscore","backbone","modules/user-avatar","modules/me","tools/upload-plugin","tools/pop-up-window","views/common/crop-picture","text!templates/user/common/sidebar/profile-box.html"],function(e,t,n,i,o,a,r,s,l){var c=r.get("function");return n.View.extend({className:"block-section-profile",template:l,serialize:function(){return this.model.toJSON()},initialize:function(){this.model=new o,this.model.on("all",this.render,this)},updateUserAvatar:function(t,n){var o={type:"attachment",value:""};o=e.extend(!0,{},o,t);var a=new i;a.addUrlParam(o),a.save(o,{resultTrue:function(t,i){"object"===e.type(n)&&"function"===e.type(n.resultTrue)&&n.resultTrue(i)},resultFalse:function(t,i){"object"===e.type(n)&&"function"===e.type(n.resultFalse)&&n.resultFalse(i)}})},afterRender:function(){var t=this;a.set({url:"/api/attachment_picture/",browseButtonId:"upload_avatar",wrapId:"block_upload_avatar_button_box",imgResize:{width:500},extraParams:{max_width:500},fileExts:"bmp,jpg,jpeg,png,gif,BMP,JPG,JPEG,PNG,GIF",events:{success:function(n,i,o){if(o.result&&"object"===e.type(o.data)){var a=o.data;c.open(new s({view_url:a.view_url,id:a.id,pluginParams:{replaceOriginImg:1}},{success:function(n){e(".avatar_url_"+t.model.get("id")).attr("src",n.data.view_url),t.updateUserAvatar({value:n.data.id},{resultTrue:function(){},resultFalse:function(){}})}}).render().view.el,{padding:10})}}}})}})}),define("modules/auth-group/auth-group",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/auth_group/",defaults:function(){return{name:"",user_ids:[],count:{user:0}}},setDefaults:function(){this.set({display_name:this.get("name"),display_value:this.get("id")})},validate:function(e){if(!t.has(e,"users")){if(!t.has(e,"user_ids"))return"Group's members can not be empty!";if(0==e.user_ids.length)return"Group's members can not be empty!"}},getType:function(){return"Personal List"}})}),define("collections/auth-groups",["jquery","underscore","backbone","modules/auth-group/auth-group"],function(e,t,n,i){var o=n.Collection.extend({urlRoot:"api/auth_group/",model:i}),a=new o,r=new o([{id:"public",name:"Public",display_value:"public",display_name:"Public"},{id:"my_follower",name:"Followers",display_value:"my_follower",display_name:"Followers"},{id:"my_colleague",name:"Colleagues",display_value:"my_colleague",display_name:"Colleagues"},{id:"all_my_courses",name:"Courses",display_value:"all_my_courses",display_name:"Courses"},{id:"all_my_conexus",name:"Conexus",display_value:"all_my_conexus",display_name:"Conexus"},{id:"similar_courses",name:"Similar to my Courses",display_value:"similar_courses",display_name:"Similar to my Courses"},{id:"only_me",name:"Only Me",display_value:"only_me",display_name:"Only Me"}]),s={AuthGroupCollection:o,AuthGroup:a,DefaultAuthGroup:r};return{get:function(e){return s[e]}}}),define("text!templates/user/common/sidebar/auth-group-item.html",[],function(){return'<a class="always_allow" href="user/contents/{{id}}">{{name}}</a>\n<span><a class="auth_group_item" href="user/socail/personal-list/{{id}}">{{#count}}{{user}}{{/count}}</a></span>\n<div class="clear"></div>\n'}),define("views/user/common/sidebar/auth-group-item",["jquery","underscore","backbone","text!templates/user/common/sidebar/auth-group-item.html"],function(e,t,n,i){return n.View.extend({tagName:"dd",template:i,serialize:function(){return this.model.toJSON()}})}),define("text!templates/text/social-network.html",[],function(){return'\r\n    <div class="head">\r\n        <h4>CN Social Network</h4>\r\n    </div>\r\n    <div class="main">\r\n        <div class="box">\r\n            <div class="body">\r\n                <b>Followers</b> are CN members who have chosen to follow you because they are interested in what you have to say in your Posts. Any CN member is able to follow any other CN member. If you don\'t want to share your Post with Followers, simply do not choose "Visible to Followers" in the Post tool. Followers in the CN are similar to Followers in TwitterTM.\r\n            </div>\r\n        </div>\r\n\r\n        <div class="box">\r\n            <div class="body">\r\n                <b>Following</b> is a list of CN members you have chosen to follow. As described above, if someone in your Following category chooses to Post with Visibility Setting "Visible to Followers," you will be able to see the Post as a Follower of that person.\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="box">\r\n            <div class="body">\r\n                <b>Colleagues</b> are people you know and are similar to Friends on FacebookTM. In order to be Colleagues with a CN member, initiate a Colleague request. Your request must be approved by that member.\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="box">\r\n            <div class="body">\r\n                <b>Personal Network</b> is a group you create that includes a select number of people. For example, you might create a Personal Network called "Research Collaborators" or one called "My Family" <b>and add</b> members to these groups, as appropriate. When you create Posts, you can select which Personal Network sees your Post in Visibility Settings. Members may create unlimited numbers of Personal Networks in CN.\r\n            </div>\r\n        </div>\r\n        \r\n        <div class="box">\r\n            <div class="title">Hints</div>\r\n            <div class="body">\r\n                To "Follow" or "Colleague" CN members, mouse over their names or profile pictures and click on the Follow or Colleague buttons.\r\n            </div>\r\n        </div>\r\n    </div>\r\n'}),define("views/text/social-network",["tools/pop-up-window","text!templates/text/social-network.html"],function(e,t){return e.get("view").extend({className:"pop-up-window block-window-social-network",template:t})}),define("text!templates/common/autocomplete-box/menu-item/normal.html",[],function(){return'{{#email_address}}\n<span>\n    <b>{{email_address}}</b>\n</span>\n{{/email_address}}\n{{^email_address}}\n    {{#avatar}}\n    <div class="left l-float">\n        <img src="{{view_url}}" alt="" />\n    </div>\n    {{/avatar}}\n    <div class="right l-float">\n        <div class="title">{{cn_number}}</div>\n        <div class="body">{{display_name}}</div>\n    </div>\n    <div class="clear"></div>\n{{/email_address}}'}),define("views/common/autocomplete-box/menu-item/normal",["jquery","underscore","backbone","modules/user/user","text!templates/common/autocomplete-box/menu-item/normal.html"],function(e,t,n,i,o){return n.View.extend({template:o,className:"block-search-menu-item",initialize:function(e){this.model=!t.isUndefined(e)&&t.has(e,"model")?e.model:new i},serialize:function(){return this.model.toJSON()}})}),define("modules/user/email-receiver",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({defaults_:function(){return{type:"user",id:"",receive_type:"normal"}}})}),define("text!templates/common/autocomplete-box/result-item/email-search-result-item.html",[],function(){return'<input type="hidden" name="receivers[{{receivers_len}}][type]" value="{{type}}"/>\n<input type="hidden" name="receivers[{{receivers_len}}][id]" value="{{id}}" />\n{{#email_address}}\n    <b>{{email_address}}</b>\n{{/email_address}}\n{{^email_address}}\n    <b>{{display_name}}{{#cn_number}}({{cn_number}}){{/cn_number}}</b>\n{{/email_address}}\n<a href="javascript:;" class="search_result_remove">X</a>'}),define("views/common/autocomplete-box/result-item/email-search-result-item",["jquery","underscore","backbone","modules/user/email-receiver","text!templates/common/autocomplete-box/result-item/email-search-result-item.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"span",className:"block-email-search-result email_search_result_item",events:{"click .search_result_remove":"deleted"},initialize:function(e){var n=this;n.model=!t.isUndefined(e)&&t.has(e,"model")?e.model:new i},serialize:function(){return this.model.toJSON()},deleted:function(){this.remove()}})}),define("text!templates/common/autocomplete-box/autocomplete.html",[],function(){return'<input class="receiver_search_box input-box" type="text" value="" placeholder="{{placeholder}}" title="{{placeholder}}"/>'}),define("views/common/autocomplete-box/autocomplete",["jquery","underscore","backbone","views/common/autocomplete-box/menu-item/normal","views/common/autocomplete-box/result-item/email-search-result-item","modules/user/email-receiver","text!templates/common/autocomplete-box/autocomplete.html","jqueryUi"],function(e,t,n,i,o,a,r){var s=1;return function(l){var c=r;t.isObject(l)&&t.isString(l.template)&&(c=l.template);var d={email:function(t,n){var i=RegExp(/[_a-zA-Z\d\-\.]+@[_a-zA-Z\d\-]+(\.[_a-zA-Z\d\-]+)+$/);if(i.test(t.term))if("function"==typeof afterSource){var o={email:e.trim(t.term)};afterSource(o,function(){n([{model:{type:"email",id:e.trim(t.term),email_address:e.trim(t.term)}}])})}else n([{model:{type:"email",id:e.trim(t.term),email_address:e.trim(t.term)}}])},user:function(t,n){var i=this,o=i.options.settings.afterSource.user;e.get("api/search_user/",{keyword:t.term,limit:5},function(e){e.result&&e.data.length>0&&("function"==typeof o?o(e,function(){n(e.data)}):n(e.data))})}};return n.View.extend({events:{"keydown .receiver_search_box":"keyDownHandler"},template:c,initialize:function(t){var n={tagName:"div",className:"block-autocomplete-box",target:".receiver_search_box",placeholder:"Enter email address or CN number then CLICK on the correct option",clearTarget:!0,autoFocus:!0,delay:500,searchTypes:["user","email"],sources:d,beforeSource:{},afterSource:{},afterSelect:{},menuItem:{model:a,view:i},resultItem:{model:a,view:o,afterSelect:function(e,t){this.$(".receiver_search_box").before(t)}}};this.options.settings=e.extend(!0,n,t),d=e.extend(!0,{},this.options.settings.sources,d),this.el.className=this.options.settings.className,this.$el.tagName=this.options.settings.tagName},serialize:function(){return{placeholder:this.options.settings.placeholder}},afterRender:function(){var n=this,i=this.options.settings,o=i.target;n.$(o).autocomplete({autoFocus:i.autoFocus,select:function(o,a){var r=i.resultItem,l=function(n,i,o){var a=this;t.isFunction(n)?n.call(a,i,o):t.isObject(n)&&t.has(n,"view")&&t.has(n,"model")&&(e.extend(o.item.model,{receivers_len:s++}),a.insertView(new n.view({model:new n.model(o.item.model),append:function(e,t){n.afterSelect.call(a,e,t)}})).render())};return"function"==typeof i.afterSelect?i.afterSelect(o,a,function(){l.call(n,r,o,a)}):l.call(n,r,o,a),i.clearTarget&&e(o.target).val(""),!1},source:function(o,a){if(0!=e.trim(o.term).length){var r=n.getSources();for(var s in r)t.isFunction(i.beforeSource[s])?i.beforeSource[s].call(n,r[s],o,a):r[s].call(n,o,a)}},change:function(){e("#"+i.menuId).find("li:first").click().empty()}}).each(function(){var o=i.menuItem;t.isFunction(o)?e(this).data("autocomplete")._renderItem=function(t,a){return i.menuId=e(t).attr("id"),o.call(n,t,a)}:t.isObject(o)&&(e(this).data("autocomplete")._renderItem=function(t,n){return i.menuId=e(t).attr("id"),e("<li>").append(e("<a>").html(new o.view({model:new o.model(n.model)}).render().view.el)).appendTo(t)})}),this.$el.on("click",function(){return n.$(o).focus(),!1}),this.$(o).on("blur",function(){var t=this;setTimeout(function(){0==n.$(".email_search_result_item").length&&(e(t).attr("placeholder",e(t).attr("title")),e(t).addClass("input-box"))},100)})},keyDownHandler:function(t){this.options.settings;var n=e.ui.keyCode;return t.keyCode==n.BACKSPACE&&""==e(t.currentTarget).val()?(this.$(".email_search_result_item:last").remove(),!1):(e(t.currentTarget).attr("placeholder",""),e(t.currentTarget).removeClass("input-box"),!0)},getSources:function(){var e={},t=this.options.settings,n=t.searchTypes;for(var i in n)e[n[i]]=d[n[i]];return e}})}}),define("modules/email",["jquery","underscore","backbone","modules/me"],function(e,t,n,i){var o=n.Model.extend({urlRoot:"api/email/",defaults:function(){var e=new i;return{type:"normal",sender:{type:"user",id:e.get("id")},receivers:{}}},initDefaults:function(){var e=this.get("receivers"),n=this.get("sender"),i=!1,o=!1;for(var a in e)if(e.hasOwnProperty(a)&&e[a].model){var r=!1;"cc"==e[a].model.receive_type&&(r=!0,i=!0),e[a].model.is_cc=r;var s=!1;("user"==e[a].type||"group"==e[a].type)&&(s=!0),e[a].model.is_user=s,n.id==e[a].model.id&&(o=!0),a==e.length-1&&(e[a].model.is_last=!0)}return t.extend({receivers:e,has_cc:i,is_send_to_me:o})}});return o}),define("modules/user-detection",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/user_detection/"})}),define("text!templates/common/pop-up-window/invite-friend-to-cn.html",[],function(){return'<div class="head">\r\n	<h4>Invite Friends to CN</h4>\r\n</div>\r\n<div class="main">\r\n	<form id="invite_friends_form" method="post">\r\n		<table>\r\n			<tbody>\r\n				<tr>\r\n					<td>\r\n						<label for="">\r\n							To:\r\n						</label>\r\n					</td>\r\n					<td id="input_invite_email_to_box">\r\n						<!-- <input class="input-invite-email-to" type="text" name="" required="required" placeholder="Enter email addresses separated by space, comma, or semicolon." /> -->\r\n					</td>\r\n				</tr>\r\n				<tr>\r\n					<td>\r\n						<label for="">\r\n							From:\r\n						</label>\r\n					</td>\r\n					<td>\r\n						<span class="text-invite-email-from">{{display_name}}</span>\r\n					</td>\r\n				</tr>\r\n				<tr>\r\n					<td></td>\r\n					<td>\r\n						<div class="block-invite-email-body block_invite_email_body">\r\n							<table contenteditable="true" cellspacing="0" cellpadding="0" class="" style="font-family: Verdana,Geneva,sans-serif;">\r\n								<tbody>\r\n									<tr>\r\n										<td>\r\n											<span style="line-height: 15px;font-size: 12px;">\r\n												Hello. This is {{display_name}}.\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="80" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												I am a member of CN (thecn.com) and would like to invite you to join my Academic Network. CN membership is free to everyone, anywhere in the world. It is the first academic social network meant to connect all academics around the world, especially classroom students and instructors.\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="70" style="text-align: center;line-height: 15px;">\r\n											<a target="_blank" href="#registerUrl">\r\n												<img width="320" height="51" border="0" style="display: inline-block;" alt="Click Here to Accept Invitation" src="/img/common/verify-email/invite-email-button.png">\r\n											</a>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="80" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												As a student, you will be connected to your classmates and other students taking similar courses throughout the world, be able to share posts and reflections, and you can like other posts. The CN is a fun and engaging site that offers a totally new classroom learning experience.\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="80" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												As an instructor, you can create course sites for your classes (free of charge) and invite your students to join. You can also set your course site as an open course for anyone to join. This will complement and can be used in addition to your course management system (e.g. Blackboard, Sakai, D2L, Moodle, Epsilen, etc.).\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="95" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												Not a student or instructor? Create your CN account, join many open courses and network with people who share similar professional, academic, or social interests, worldwide. You may create social networking groups called "Conexus" and invite others to join. It might also be used to connect individuals in conferences, promoting social issues or causes, for professional groups, or for your hobbies.\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="125" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												The CN is a startup company created with funding from Indiana University, Virginia Tech, and several other prospective educational institutions and academics. It is a totally new business model--owned, developed, and used by educators, for educators. The initial beta testing of the CN occurred in summer of 2012 in three courses at IUPUI. Student surveys and overall performance indicators demonstrated that use of the CN in the classroom substantially increases engagement, collaboration among students, student satisfaction, and networking opportunities.\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="50" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												For more information about the CN and the company, please visit coursenetworking.com and thecn.com\r\n											</span>\r\n										</td>\r\n									</tr>\r\n									<tr>\r\n										<td height="50" style="line-height: 15px;font-size: 12px;">\r\n											<span>\r\n												This email was sent by {{display_name}}, a CN member.  For any questions, please email help@thecn.com, or call 317-550-2020.\r\n											</span>\r\n										</td>\r\n									</tr>\r\n								</tbody>\r\n							</table>\r\n						</div>\r\n					</td>\r\n				</tr>\r\n				<tr>\r\n					<td>\r\n						\r\n					</td>\r\n					<td>\r\n						<div class="l-float intro-wrap">\r\n							<p>You will receive one Anar seed per invitation</p>\r\n							<a class="load_about_anar_window" href="javascript:;">Tell Me More</a>\r\n						</div>\r\n						<div class="r-float opera-wrap">\r\n							<button  class="bt bt-blue-2 bt-size-normal" type="submit">SEND</button>\r\n							<button class="bt bt-gray bt-size-normal cancel" type="button">CANCEL</button>\r\n						</div>\r\n						<div class="clear"></div>\r\n					</td>\r\n				</tr>\r\n			</tbody>\r\n		</table>\r\n	</form>\r\n</div>'}),define("views/common/pop-up-window/invite-friend-to-cn",["jquery","underscore","backbone","tools/regs","tools/pop-up-window","views/common/autocomplete-box/autocomplete","modules/email","modules/me","modules/user-detection","text!templates/common/pop-up-window/invite-friend-to-cn.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c){var d=o.get("function");return o.get("view").extend({className:"block-window-invite-cn-email pop-up-window",template:c,events:{"click .cancel":"deleted","submit #invite_friends_form":"save"},initialize_:function(){this.model=new r({type:"friends_invite"})},serialize:function(){var e=new s;return e.toJSON()},beforeRender_:function(){this.setViews({"#input_invite_email_to_box":new(a())({searchTypes:["email"],placeholder:"Enter email address then CLICK on the correct option",beforeSource:{email:function(e,t,n){if(i.check("email",t.term)){var o=new l;o.addUrlParam({detect_method:"email",value:t.term}),o.fetch({resultTrue:function(e){alert(t.term+"("+e.get("cn_number")+") already exists.")},resultFalse:function(){e(t,n)}})}}}})})},save:function(n){if(e(n.currentTarget).attr("locked"))return!1;e(n.currentTarget).attr("locked","locked");var i=this,o=i.$("#invite_friends_form").serializeObject();if(o.content=e.trim(i.$(".block_invite_email_body").html()),t.has(o,"receivers")){var a=o.receivers.length>1?"emails":"email";i.model.save(o,{resultTrue:function(){i.deleted(),d.alert("Invitation "+a+" sent.")},completeCallback:function(){e(n.currentTarget).removeAttr("locked")}})}else d.alert("Recipients cannot be blank.");return!1}})}),define("text!templates/common/pop-up-window/invite-status/item.html",[],function(){return'    <td>\r\n        {{email}}\r\n    </td>\r\n    <td>\r\n        {{#status}}\r\n        <a class="show_card cancel" href="{{model.cn_number}}" data-type="user" data-id="{{model.id}}">{{display_status}}</a>\r\n        {{/status}}\r\n    </td>\r\n'}),define("views/common/pop-up-window/invite-status/item",["jquery","underscore","backbone","text!templates/common/pop-up-window/invite-status/item.html"],function(e,t,n,i){return n.View.extend({tagName:"tr",template:i,serialize:function(){return this.model.toJSON()}})}),define("modules/user-invitation",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/user_invitation_user/",defaults:function(){return{email:"",model:[]}},initDefaults:function(){var e=t.has(this.get("model"),"id");return t.extend({status:e,display_status:e?this.get("model").display_name+", "+this.get("model").cn_number:""})}})}),define("collections/invitation-users",["jquery","underscore","backbone","modules/user-invitation"],function(e,t,n,i){var o=n.Collection.extend({model:i,urlRoot:"api/user_invitation_user/"});return o}),define("text!templates/common/pop-up-window/invite-status.html",[],function(){return'<div class="head">\r\n    <h4>{{title}}</h4>\r\n</div>\r\n<div class="main">\r\n    <div class="anar-explanation-box-body">\r\n        <table border="0" cellspacing="0" cellpadding="0" >\r\n            <thead>\r\n                <tr>\r\n                    <td class="border-left font-bold">Invitation Sent</td>\r\n                    <td class="font-bold">CN Account</td>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                \r\n            </tbody>\r\n            <tfoot>\r\n                <tr>\r\n                    <td colspan="2" id="invite_status_more_operation"></td>\r\n                </tr>\r\n            </tfoot>\r\n        </table>\r\n    </div>\r\n</div>\r\n'}),define("views/common/pop-up-window/invite-status",["jquery","underscore","backbone","tools/pop-up-window","views/common/pop-up-window/invite-status/item","views/common/more-operation","views/common/error-tip","collections/invitation-users","text!templates/common/pop-up-window/invite-status.html"],function(e,t,n,i,o,a,r,s,l){var c=i.get("function");return i.get("view").extend({className:"pop-up-window block-window-invite-status",template:l,initialize:function(){t.bindAll(this,"addAll","addOne"),this.collection=new s,this.collection.on("reset",this.addAll,this),this.collection.on("add",this.addOne,this),this.collection.addUrlParam()},afterRender_:function(){var e=this;this.collection.fetch({resultTrue:function(t){e.$("#invite_status_more_operation").html(new a({collection:t,view:{scrollTarget:e.$("tbody"),scrollTargetWrap:e.$(".main")}}).render().view.el)},resultFalse:function(n,i){if(i.result)e.$(".main").html(new r({data:{text:"No Invitation"}}).render().view.el);else{var o="";t.each(n,function(e){o+=e+"<br />"}),c.alert(o)}}})},addAll:function(){this.collection.each(this.addOne)},addOne:function(e){this.$("tbody").append(new o({model:e}).render().view.el)},serialize:function(){return{title:"Invite Friends to CN"}}})}),define("text!templates/user/common/sidebar/social-network.html",[],function(){return'<dl>\r\n	<dt>\r\n		<b>SOCIAL NETWORK</b>\r\n		<a class="icon-mark text-hide load_hint_social_networking_window" href="javascript:;" title="About CN Social Network">\r\n            About CN Social Network\r\n        </a>\r\n	</dt>\r\n	<dd>\r\n		<a class="always_allow" href="user/contents/followers">Followers</a>\r\n		<span><a href="user/social/followers">{{count.follower}}</a></span>\r\n		<div class="clear"></div>\r\n	</dd>\r\n	<dd>\r\n		<a class="always_allow" href="user/contents/following">Following</a>\r\n		<span><a href="user/social/following">{{count.following}}</a></span>\r\n		<div class="clear"></div>\r\n	</dd>\r\n	<dd>\r\n		<a class="always_allow" href="user/contents/colleagues">Colleagues</a>\r\n		<span><a href="user/social/colleagues">{{count.colleague}}</a></span>\r\n		<div class="clear"></div>\r\n	</dd>\r\n	<dd id="block_create_personal_list">\r\n		<a class="create_personal_list" href="javascript:;">Create a Personal Network</a>\r\n		<div class="clear"></div>\r\n	</dd>\r\n	<dd>\r\n		<a id="invite_friends" href="javascript:;">Invite Friends to CN</a>\r\n		<div class="clear"></div>\r\n	</dd>\r\n    <dd>\r\n		<a id="load_invite_status" href="javascript:;">Invitation Status</a>\r\n		<div class="clear"></div>\r\n	</dd>\r\n</dl>\r\n'
}),define("views/user/common/sidebar/social-network",["jquery","underscore","backbone","tools/pop-up-window","collections/auth-groups","views/user/common/sidebar/auth-group-item","views/text/social-network","views/common/float-box/_master","views/common/pop-up-window/invite-friend-to-cn","views/common/pop-up-window/invite-status","text!templates/user/common/sidebar/social-network.html"],function(e,t,n,i,o,a,r,s,l,c,d){var u=i.get("function");return n.View.extend({className:"social-network block-list-type-one",template:d,initialize:function(){t.bindAll(this,"addOne","addAll"),this.collection=o.get("AuthGroup"),this.collection.on("reset",this.addAll,this),this.collection.on("add",this.addOne,this)},afterRender:function(){this.collection.fetch()},events:{"click #invite_friends":"loadInviteFriendsView","click #load_invite_status":"loadInviteFriendsRecordView","click .load_hint_social_networking_window":"showHint"},serialize:function(){return this.model.toJSON()},showHint:function(e){new s({view:new r,target:".load_hint_social_networking_window",arrow:{offset:20}}).show(e)},addAll:function(){this.collection.each(this.addOne)},addOne:function(e){var t=e.get("count");if(t&&t.user>0){var n=new a({model:e});this.$("#block_create_personal_list").before(n.render().view.el)}},loadInviteFriendsView:function(){u.open((new l).render().view.el)},loadInviteFriendsRecordView:function(){u.open((new c).render().view.el)}})}),define("modules/user/user-follower",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/user_follower/"})}),define("modules/user/online-conexus-user",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/online_conexus_user/"})}),define("modules/user/online-course-user",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/online_course_user/"})}),define("modules/user/online-user",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/online_user/"})}),define("modules/auth-group/auth-group-user",["jquery","underscore","modules/user/user"],function(e,t,n){return n.extend({urlRoot:"api/auth_group_user/",deleted:function(){var e=this,t=e.get("auth_group_id"),n=e.get("id");this.destroy({url:e.url()+"?auth_group_id="+t+"&user_id="+n,resultTrue:function(){e.view.remove()}})}})}),define("collections/user-collections",["jquery","underscore","backbone","modules/user/user","modules/user/user-colleague","modules/user/user-follower","modules/user/user-following","modules/user/online-conexus-user","modules/user/online-course-user","modules/user/online-user","modules/user/course-user","modules/user/conexus-user","modules/auth-group/auth-group-user"],function(e,t,n,i,o,a,r,s,l,c,d,u,m){var h=n.Collection.extend({model:i,urlRoot:"api/user/"}),p=n.Collection.extend({model:c,urlRoot:"api/online_user/"}),f=n.Collection.extend({model:l,urlRoot:"api/online_course_user/"}),v=n.Collection.extend({model:s,urlRoot:"api/online_conexus_user/"}),_=new(n.Collection.extend({model:r,urlRoot:"api/user_following/",urlParam:{with_user_profile:1,with_user_count:1,with_user_country:1},getType:function(){return"following"}})),g=new(n.Collection.extend({model:a,urlRoot:"api/user_follower/",urlParam:{with_user_profile:1,with_user_count:1,with_user_country:1},getType:function(){return"follower"}})),b=new(n.Collection.extend({model:o,urlRoot:"api/user_colleague/",urlParam:{with_user_profile:1,with_user_count:1,with_user_country:1},getType:function(){return"colleague"}})),y=n.Collection.extend({urlRoot:"api/auth_group_user/",urlParam:{with_user_country:1},model:m,getType:function(){return"Personal List"}}),w=n.Collection.extend({model:d,urlRoot:"api/course_user/"}),x=n.Collection.extend({model:u,urlRoot:"api/conexus_user/"}),k={User:h,OnlineUser:p,OnlineCourseUser:f,OnlineConexusUser:v,UserFollowing:_,UserFollower:g,UserColleague:b,AuthGroupUser:y,CourseUserCollection:w,ConexusUserCollection:x};return{get:function(e){return k[e]}}}),define("text!templates/user/common/sidebar.html",[],function(){return'<div class="top" id="block_section_profile">\r\n	\r\n</div>\r\n<div class="bottom">\r\n	<div class="box" id="block_social_network">\r\n		\r\n	</div>\r\n<!--	<div class="box" id="block_apps_box">\r\n		\r\n	</div>-->\r\n	<div class="box" id="block_member_wall">\r\n		\r\n	</div>\r\n</div>'}),define("views/user/common/sidebar",["jquery","underscore","backbone","views/common/member-wall","views/user/common/sidebar/profile-box","views/user/common/sidebar/social-network","collections/user-collections","modules/me","text!templates/user/common/sidebar.html"],function(e,t,n,i,o,a,r,s,l){var c=new s;return n.View.extend({className:"sidebar-home sidebar-web sidebar-fixed-width",template:l,beforeRender:function(){this.setViews({"#block_section_profile":new o({model:c}),"#block_social_network":new a({model:c}),"#block_member_wall":new i({collection:new(r.get("OnlineUser"))})})}})}),define("text!templates/common/post-tools/index.html",[],function(){return'<div class="main">\r\n	<div class="top" id="block_post_tools_nav">\r\n		\r\n	</div>\r\n	<div class="bottom" id="block_post_tools_main">\r\n\r\n	</div>\r\n</div>'}),define("views/common/post-tools/index/_master",["jquery","underscore","backbone","text!templates/common/post-tools/index.html"],function(e,t,n,i){return n.View.extend({className:"block-post-tools",template:i,initialize:function(e){t.bindAll(this,"initialize_"),this.pass={},this.view={main:{},nav:{}},this.viewParam={main:{model:this.model,collection:this.collection,view:{parents:this}},nav:{view:{parents:this},model:this.model}},this.initialize_(e)},initialize_:function(){},beforeRender:function(){this.setViews({"#block_post_tools_nav":this.view.nav,"#block_post_tools_main":this.view.main})}})}),define("views/common/post-tools/nav/_master",["jquery","underscore","backbone"],function(e,t,n){return n.View.extend({tagName:"ul",initialize:function(e){t.bindAll(this,"initialize_","showHintByType","setStyleByType"),this.view=e.view,this.style={offsetLeft:45},this.pass={},this.initialize_(e)},initialize_:function(){},serialize:function(){return this.model.toJSON()},events:{"click li":"clickToShowMain"},clickToShowMain:function(e){this.showHintByType(this.$(e.currentTarget).attr("data-type"))},showHintByType:function(e){this.view.parents.view.main.showHint(e,this.setStyleByType(e))},showFormByType:function(e){this.view.parents.view.main.showForm(e,this.setStyleByType(e))},setStyleByType:function(e){var t=this.$('li[data-type="'+e+'"]');return t.siblings().removeClass("on"),t.addClass("on"),t.outerWidth()/2+t.position().left||this.style.offsetLeft}})}),define("text!templates/common/post-tools/nav/user.html",[],function(){return'<li data-type="post">\r\n	<a class="icon-tools icon-tools-post always_allow" href="javascript:;">\r\n		Post\r\n	</a>\r\n</li>\r\n<li data-type="poll">\r\n	<a class="icon-tools icon-tools-poll always_allow" href="javascript:;">\r\n		Poll\r\n	</a>\r\n</li>\r\n<li data-type="event">\r\n	<a class="icon-tools icon-tools-event always_allow" href="javascript:;">\r\n		Event\r\n	</a>\r\n</li>\r\n<li data-type="email">\r\n	<a class="icon-tools icon-tools-email always_allow" href="javascript:;">\r\n		Email\r\n	</a>\r\n</li>'}),define("views/common/post-tools/nav/user",["jquery","underscore","views/common/post-tools/nav/_master","text!templates/common/post-tools/nav/user.html"],function(e,t,n,i){return n.extend({template:i,afterRender:function(){this.showHintByType("post")}})}),define("tools/html-helper",["jquery"],function(e){return{decode:function(t){var n=e(document.createElement("div"));return n.html(t),n.text()}}}),define("modules/content/content",["jquery","underscore","backbone","modules/me","tools/html-helper","tools/regs"],function(e,t,n,i,o,a){var r=new i;return n.Model.extend({urlRoot:"api/content/",defaults:function(){return t.extend({user:r.toJSON(),count:{good:0,comment:0,repost:0,view:0,remember:0},is_owner:!0,is_deletable:!0,is_repostable:!1,count_comment:0,count_good:0,has_set_good:!1,can_set_best:!1,attachments:[],links:[],comments:[],pictures:[],videos:[],courses:[],conexuses:[],count_course:0,count_conexus:0,user_position:"",additional:{},source:{device:"",is_mobile:!1}},this.defaults_())},defaults_:function(){return{}},init:function(){this.on("change:count_comment",this.set_CanSetBest,this),this.init_()},init_:function(){},initDefaults:function(){var e=this,t=e.getCountByKey("comment"),n=e.get("attachments").length,i=e.get("links").length,r=n+i,s=e.get("courses"),l=e.get("conexuses"),c=s.length,d=l.length,u=s.shift(),m=l.shift(),h=s.length,p=l.length,f=e.get("videos"),v=f.length;if(v>0)for(var _=0;v>_;_++){var g=f[_].view_url.match(a.rules("youtubeUrl"));null!==g&&(e.get("videos")[_].img_url="http://img.youtube.com/vi/"+g[3]+"/0.jpg")}return{display_text:e.get("text"),text:o.decode(e.get("text")),can_edit:e.get("is_owner")&&e.get("is_editable"),content_id:e.get("id"),count_comment:t,count_good:e.getCountByKey("good"),count_file:n,count_link:i,count_picture:e.get("pictures").length,is_files:n>1,is_links:i>1,count_video:e.get("videos").length,count_attachment:r,count_course:c,count_conexus:d,first_course:u,first_conexus:m,other_courses:s,other_conexuses:l,count_other_course:h,count_other_conexus:p,can_set_best:t>2,more_comments:t>3,user_position:e.get("user_position").toUpperCase(),additional:{count_view_more_then_one:e.get("count").view>1}}},set_CanSetBest:function(){this.set({can_set_best:this.isCanSetBest()})},isCanSetBest:function(){return this.get("count_comment")>2},hasCountByKey:function(e){return this.get("count")&&this.get("count")[e]&&this.get("count")[e]>0},getCountByKey:function(e){return this.hasCountByKey(e)?this.get("count")[e]:0},deleted:function(){var e=this;this.destroy({silent:!0,wait:!0,resultTrue:function(){e.view.remove()}})}})}),define("modules/content/post",["jquery","underscore","modules/content/content"],function(e,t,n){return n.extend({urlRoot:"api/post/",defaults_:function(){return{type:"post"}}})}),define("tools/date-tools",["jquery"],function(){var e={};return e.parseTimestamp=function(e,t){var n=new Date;e&&e>0?n.setTime(1e3*parseInt(e)):n.setTime(n.getTime());var i=n.getFullYear(),o=n.getDate(),a=n.getMonth()+1;if(10>o&&(o="0"+o),10>a&&(a="0"+a),t){var r=n.toUTCString(),s=r.split(" ");return s[2]+" "+s[1]+", "+i}return a+"/"+o+"/"+i},e.decodeDateString=function(e){var t=new Date(e);return t},e.getLocalTime=function(e){var t=new Date;!_.isUndefined(e)&&e>0?t.setTime(1e3*parseInt(e)):t.setTime(t.getTime());var n=t.toUTCString();n=n.replace(/\w+,/,""),n=n.replace(/\w+$/,"");var i=n.split(" ");return i[2]+" "+i[1]+", "+i[4]},e.getEventTime=function(){if(!arguments[0])return"";var e=new Date;_.isNumber(arguments[0])?e.setTime(1e3*arguments[0]):e.setTime(e.getTime());var t=e.toUTCString(),n=e.getFullYear(),i=e.getHours()>12?e.getHours()-12:e.getHours(),o=e.getHours()>12?"pm":"am",a=9>e.getMinutes()?"0"+e.getMinutes():e.getMinutes();t=t.replace(/\w+,/,""),t=t.replace(/\w+$/,"");var r=t.split(" ");return r[2]+" "+r[1]+", "+n+"    "+i+":"+a+o},e.getTimeObj=function(e){var t=/(\d+)(\:)(\d+)(am||pm)$/;if(!e||!e.match(t))return"";var n=e.match(t),i=n[1],o=n[3],a=i+":"+o;return{time:a,sign:n[4].toUpperCase(),ltime:a+" "+n[4].toUpperCase()}},e.str2Time=function(e){var t=new Date(e).getTime()/1e3;return parseInt(t)},e}),define("modules/content/event",["jquery","underscore","modules/content/content","tools/date-tools"],function(e,t,n,i){return n.extend({urlRoot:"api/event/",defaults_:function(){return{title:"",text:"",where:"",start_time:"",end_time:"",type:"event"}},initDefaults_:function(){var e=this;return{display_start_date:i.parseTimestamp(e.get("start_time")),display_end_date:i.parseTimestamp(e.get("end_time")),display_start_hour:i.getTimeObj(e.get("display_start_time")).time,display_start_sign:i.getTimeObj(e.get("display_start_time")).sign,display_end_hour:i.getTimeObj(e.get("display_end_time")).time,display_end_sign:i.getTimeObj(e.get("display_end_time")).sign}}})}),define("modules/content/survey",["jquery","underscore","modules/content/content"],function(e,t,n){return n.extend({urlRoot:"api/survey/",defaults_:function(){return{title:"",text:"",choices:[],correct_response_text:"",display:"show",display_user:"hide",result_display_type:"",start_time:(new Date).getTime()/1e3,result_date:(new Date).getTime()/1e3+7776e3,survey_type:"",type:"survey",submissions:[]}},initDefaults_:function(){var e=this;return{is_short_answer_type:"short_answer"===e.get("survey_type"),is_choice_type:"multiple_choice"===e.get("survey_type")||"one_choice"===e.get("survey_type"),true_false_choice:e.getTrueFalseChoice(),display_submissions_count:e.get("count").submissions}},getTrueFalseChoice:function(){var t={true_item:"True",false_item:"False"};return"true_false"===this.get("survey_type")&&"array"===e.type(this.get("choices"))&&e(this.get("choices")).length>=2&&(t.true_item=this.get("choices")[0].subject,t.false_item=this.get("choices")[1].subject),t}})}),define("modules/content/share-link",["jquery","underscore","modules/content/content"],function(e,t,n){return n.extend({urlRoot:"api/sharelink/",defaults_:function(){return{title:"",description:"",share_link:"",share_link_href:"",type:"sharelink"}},initDefaults_:function(){return{first_picture:this.get("pictures").shift(),share_link_href:this.get("share_link").replace(/http:\/\//,"")}}})}),define("modules/content/task",["jquery","underscore","modules/content/content","tools/date-tools"],function(e,t,n,i){return n.extend({urlRoot:"api/task/",defaults_:function(){return{title:"",text:"",description:"",course_id:"",mooc_accessible:!1,type:"task",start_time:"",display_start_time:i.parseTimestamp(),send_notification_time:"",display_send_notification_time:"",send_notification_text:"",course:{id:""},is_start:!1}},initDefaults_:function(){var e=this,n=e.get("course_id"),o={};if(!n.length){var a=e.get("course");o={course_id:a.id}}return t.extend({display_send_notification_time:this.defaultDisplaySendNotificationTime(i.parseTimestamp())},o)},deleted:function(e){this.destroy(e)},defaultDisplaySendNotificationTime:function(e){var t=i.decodeDateString(e);return t.setDate(t.getDate()-1),i.parseTimestamp(t.getTime()/1e3)},validateFileds:function(e){var n=[];if((t.isUndefined(e.title)||!e.title.length)&&n.push("Task title cannot be blank."),!t.isUndefined(e.title)&&e.title.length){var i=e.title.split(" ");if(1===i.length)e.title.length>12&&n.push("Task Title is too long (maximum is 12 characters).");else if(i.length>2)n.push("Task title max is 2 words.");else{var o=!0;t.each(i,function(e){e.length>12&&(o=!1)}),o||n.push("Each word of the title should be less than 13 characters.")}}return(t.isUndefined(e.description)||!e.description.length)&&n.push("Task Description cannot be blank."),!t.isUndefined(e.description)&&e.description.length>61&&n.push("Task Description is too long (maximum is 61 characters)."),(t.isUndefined(e.text)||!e.text.length)&&n.push("Task Items cannot be blank."),!t.isUndefined(e.send_notification_time)&&e.send_notification_time.length>0&&!e.send_notification_text&&n.push("Please enter the Notification message."),{errors:n,result:!n.length}}})}),define("modules/content/quiz",["jquery","underscore","modules/content/content"],function(e,t,n){return n.extend({urlRoot:"api/quiz/",defaults_:function(){return{type:"quiz"}}})}),define("modules/content/classcast",["jquery","underscore","modules/content/content"],function(e,t,n){return n.extend({urlRoot:"api/classcast/",defaults_:function(){return{title:"",text:"",start_time:"",end_time:"",privacy:{privacy:!1,code:""},chat:!0,early_access:!0,type:"classcast"}}})}),define("collections/content/content-collections",["jquery","underscore","backbone","modules/content/content","modules/content/post","modules/content/event","modules/content/survey","modules/content/share-link","modules/content/task","modules/content/quiz","modules/content/classcast"],function(e,t,n,i,o,a,r,s,l,c,d){var u=n.Collection.extend({urlRoot:function(){return"/api/"+this.apiName+"/"},apiName:"content",model:function(e,t){var n;switch(e.type){case"post":n=new o(e,t);break;case"event":n=new a(e,t);break;case"survey":n=new r(e,t);break;case"sharelink":n=new s(e,t);break;default:n=new i(e,t)}return n},initialize:function(e,n){t.isUndefined(n)||(t.isFunction(n.model)&&(this.model=n.model),t.isUndefined(n.urlRoot)||(this.urlRoot=n.urlRoot)),this.setUrlParam({with_content_count:1,with_content_user:1,with_content_original_content:1,with_content_attachments:1,with_content_pictures:1,with_content_links:1,with_content_videos:1,with_content_comments:1,with_content_comment_user:1,with_content_courses:1,with_content_conexuses:1,with_user_country:1,with_user_profile:1}),this.initialize_()},initialize_:function(){},setUrlSettings:function(e){this.apiName=e.apiName,this.setUrlParam(e.urlParam)},setUrlParamOrder:function(e){this.urlParam[this.apiName+"_list_order"]=e}}),m=u.extend({model:c,apiName:"quiz"}),h=u.extend({model:o,apiName:"post"}),p=u.extend({model:r,apiName:"survey"}),f=u.extend({model:a,apiName:"event"}),v=u.extend({model:d,apiName:"classcast"}),_=u.extend({model:l,apiName:"task"}),g={Content:u,Quiz:m,Post:h,Survey:p,Event:f,Classcast:v,Task:_};return{get:function(e){return g[e]}}}),define("collections/content/content-list-collections",["jquery","underscore","backbone","collections/content/content-collections"],function(e,t,n,i){var o=i.get("Content"),a=o.extend({apiName:"user_content"}),r=o.extend({apiName:"content"}),s=o.extend({apiName:"content_from_colleague"}),l=o.extend({apiName:"content_from_following"}),c=o.extend({apiName:"content_from_follower"}),d=o.extend({apiName:"user_course_content"}),u=o.extend({apiName:"user_conexus_content"}),m=o.extend({apiName:"course_content"}),h=o.extend({apiName:"content_from_classmate"}),p=o.extend({apiName:"content_from_instructor"}),f=o.extend({apiName:"content_from_virtual_classmate"}),v=o.extend({apiName:"content_from_virtual_instructor"}),_=o.extend({apiName:"conexus_content"}),g=o.extend({apiName:"content_from_member"}),b=o.extend({apiName:"content_from_moderator"}),y=o.extend({apiName:"content_from_auth_group"}),w=o.extend({apiName:"task_content"}),x=o.extend({apiName:"content_remember"}),k={User:a,Content:r,Colleague:s,Following:l,Follower:c,Course:m,Classmate:h,Instructor:p,VirtualClassmate:f,VirtualInstructor:v,Conexus:_,Member:g,Moderator:b,AuthGroup:y,AllCourse:d,AllConexus:u,TaskContents:w,Remember:x};return{get:function(e){return k[e]}}}),define("text!templates/common/post-tools/main/hint/task.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box" style="width: 716px;">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    {{#can_use_tool}}\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to create lessons, to-do lists, units and/or assign learning activities for this course.\r\n                    </a>\r\n                    {{/can_use_tool}}\r\n                    {{^can_use_tool}}\r\n                    <a class="text">\r\n                        This course is not using the Task tool.\r\n                    </a>\r\n                    {{/can_use_tool}}\r\n                    <a class="hint_show_text" href="javascript:;" data-type="more">\r\n                        Tell Me More\r\n                    </a>\r\n                </div>\r\n                <div class="main">\r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Instructors can use this tool to define a series of learning activities for students including lessons, assignments, weekly readings, etc. For example, instructors might choose to show a series of weekly assignments or curriculum based on course learning objectives. An unlimited number of Tasks can be created to support a variety of course formats, such as face-to-face teaching, hybrid courses, online courses or MOOCs.\r\n                        </p>\r\n                        <p>\r\n                            Tasks are only available in Course sites and can only be created and administered by those in an Instructor role.\r\n                        </p>\r\n                    </div>\r\n                    <div class="box display-none hint_text_box" data-type="more">\r\n                        <div>\r\n                            The CN Task tool can be used by course instructors to create a series of learning activities or to-do lists. Pedagogically, tasks can be organized based on course subjects, weekly activities, learning objectives, etc. For example, instructors can use the Task tool to provide students with pre-defined learning activities and assignments for each week of a semester.\r\n                        </div>\r\n                        <div>\r\n                            Consider the following example as one task in a course: \r\n                        </div>\r\n                        <div>\r\n                            <b style="font-weight: bold;">Lesson 1 or Week 1.</b>\r\n                            <p style="margin-top: 7px;">\r\n                                In this lesson/week, we will study the steps of the scientific method. \r\n                            </p>\r\n                            <ul style="margin-top: 7px;">\r\n                                <li>\r\n                                     Read chapter 2 and 3 of the textbook.\r\n                                </li>\r\n                                <li>\r\n                                     Read this <a href="javascript:;">article</a> and <a href="javascript:;">create a new CN Post</a> that defines and discusses the steps of the scientific method, as described in the article. Also, Like or Reflect on two of your classmates posts.\r\n                                </li>\r\n                                <li>\r\n                                     <a href="javascript:;">Complete this poll</a> by December 3rd.\r\n                                </li>\r\n                                <li>\r\n                                     <a href="javascript:;">Submit your assignment</a> before 11:00pm on December 5th.\r\n                                </li>\r\n                                <li>\r\n                                     If you have any questions, please contact me via CN Chat/<a href="javascript:;">Email</a> or see me during my office hours.\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            In the example above, please note that several words are hyperlinked (highlighted blue). You may accomplish this by (1) selecting text, (2) clicking on SmartLink (the CN logo in the top right corner of the text editing box within the Task tool) and (3) selecting the appropriate action (ie. <b style="font-weight: bold;">Download a File</b>, <b style="font-weight: bold;">Show a Poll</b>, <b style="font-weight: bold;">Submit a File/Assignment</b>, etc.).\r\n                        </div>\r\n                        <div>\r\n                            Some assistance with instructional design and development of social pedagogies is available through the IUPUI CyberLab (<a href="mailto:cyberlab@iupui.edu;">cyberlab@iupui.edu</a>).\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!templates/common/post-tools/main/hint/quiz.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to create a Quiz.\r\n                    </a>\r\n                </div>   \r\n                <div class="main">\r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Use this Quiz tool to create exams or assessments.  A quiz can include multiple choice, fill-in-the-blank, matching questions, etc. Each question can include links, images, YouTube videos or files.\r\n                        </p>\r\n                        <p>\r\n                            You can restrict who sees and take your Quiz by using the Visible to control and choosing Visible to This Course Only, Visible to This Course and Similar Courses, Visible to Colleagues, etc.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="right l-float" id="view_box">\r\n		<a class="not_completed" href="javascript:;">View All My Quizzes</a>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!templates/common/post-tools/main/hint/post.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to create and submit a post.\r\n                    </a>\r\n                </div>   \r\n                <div class="main">\r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Use this Post tool to share articles, images, videos and files that relate to the subject of your course. For example, you can share a link to YouTube videos, or upload images and pictures from your phone or desktop. Once you submit your Post, your classmates, followers, and colleagues can "Like" and "Reflect" on your Post.\r\n                        </p>\r\n                        <p>\r\n                            You can restrict who sees your post by using the "Visible to" control and choosing "Visible to This Course Only," "Visible to This Course and Similar Courses," "Visible to Followers," etc.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="right l-float" id="view_box">\r\n		<a class="view_my_posts" href="javascript:;" data-type="post">View All My Posts</a>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!templates/common/post-tools/main/hint/poll.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to create a poll (one question survey).\r\n                    </a>\r\n                </div>   \r\n                <div class="main">\r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Use this Poll tool to create a one-question survey. For example, get your classmates opinions with Yes/No, multiple choice, or scale-based questions. A teacher may create a one question pop quiz to give students hints for a useful reading. A poll can include links, images, YouTube videos or files.\r\n                        </p>\r\n                        <p>\r\n                            You can restrict who sees your poll by using the Visible to control and choosing Visible to This Course Only, Visible to This Course and Similar Courses, Visible to Followers, etc.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="right l-float" id="view_box">\r\n		<a class="view_my_posts" href="javascript:;" data-type="survey">View All My Polls</a>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!templates/common/post-tools/main/hint/event.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to create an event.\r\n                    </a>\r\n                </div>   \r\n                <div class="main">   \r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Use Event tool to make event and function announcements. For example, you can use this tool to call for a group study session, to remind classmates of a function on campus, or to announce a speaker visiting your department. An event can include links, images, YouTube videos or files.\r\n                        </p>\r\n                        <p>\r\n                            You can restrict who sees your event by using the Visible to control and choosing Visible to This Course Only, Visible to This Course and Similar Courses, Visible to Followers, etc.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="right l-float" id="view_box">\r\n		<a class="view_my_posts" href="javascript:;" data-type="event">View All My Events</a>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'
}),define("text!templates/common/post-tools/main/hint/email.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to send an email message.\r\n                    </a>\r\n                </div>   \r\n                <div class="main">    \r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Use this Email tool to send private or group messages to individual members and entire Courses and/or Conexus.\r\n                        </p>\r\n                        <p>\r\n                            Email can be sent to individuals within or outside the CN environment. An Email can include attachments and dynamic links to CN numbers.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="right l-float" id="view_box">\r\n		<a href="user/email">View All My Emails</a>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'}),define("text!templates/common/post-tools/main/hint/classcast.html",[],function(){return'<span class="text-hide icon-content-arrow icon-content-arrow-2" id="icon_arrow">Arrow</span>\r\n<div class="main">\r\n	<div class="left l-float" id="hint_box">\r\n		<div class="title">\r\n			<div class="l-float click-wrap">\r\n                <div class="head" id="hint_click_wrap_head">\r\n                    <a class="text hint_load_form" href="javascript:;">\r\n                        Click here to schedule or broadcast a live video session.\r\n                    </a>\r\n                </div>   \r\n                <div class="main">    \r\n                    <div class="box display-none hint_text_box" data-type="hint">\r\n                        <p>\r\n                            Use ClassCast to provide a one-way, live video-cast for your students.  For example, you can use this tool to provide a virtual lecture from any location or to broadcast a guest lecturer, etc. \r\n                        </p>\r\n                        <p>\r\n                            You can restrict who can receive your ClassCast by using the Visible to control and choosing Visible to This Course Only, Visible to This Course and Similar Courses, Visible to Colleagues, etc.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n			</div>\r\n			<div class="r-float hint-wrap">\r\n				<a class="icon-mark hint_show_text" id="hint_show_text" href="javascript:;" data-type="hint">\r\n                    Hint\r\n                </a>\r\n                <a class="icon-close-17 display-none hint_hide_text" id="icon_hide_hint" href="javascript:;">\r\n                    Close\r\n                </a>\r\n			</div>\r\n			<div class="clear"></div>\r\n		</div>\r\n	</div>\r\n	<div class="right l-float" id="view_box">\r\n		<a class="not_completed" href="javascript:;">View All My ClassCasts</a>\r\n	</div>\r\n	<div class="clear"></div>\r\n</div>'}),define("views/common/post-tools/main/hint",["jquery","underscore","backbone","views/common/error-tip","collections/content/content-list-collections","text!templates/loading/head-horizontal.html","text!templates/common/post-tools/main/hint/task.html","text!templates/common/post-tools/main/hint/quiz.html","text!templates/common/post-tools/main/hint/post.html","text!templates/common/post-tools/main/hint/poll.html","text!templates/common/post-tools/main/hint/event.html","text!templates/common/post-tools/main/hint/email.html","text!templates/common/post-tools/main/hint/classcast.html"],function(e,t,n,i,o,a,r,s,l,c,d,u,m){var h=["post","survey","classcast","quiz","event"],p=n.View.extend({initialize:function(e){t.bindAll(this,"initialize_"),this.view=e.view,this.style=e.style,this.initialize_(e)},initialize_:function(){},events:{"click .hint_show_text":"showHint","click .hint_load_form":"showForm","click .hint_hide_text":"hideHint","click .view_my_posts":"showPosts"},afterRender:function(){this.$("#icon_arrow").css({left:this.style.position.left})},showHint:function(e){var t=this.$(e.currentTarget);this.widthHinBox=this.$("#hint_box").width();var n=this,i=function(){n.$("#hint_box").animate({width:"716px"},"fast","swing",function(){n.$("#hint_click_wrap_head").slideUp("fast",function(){n.$('.hint_text_box[data-type="'+t.attr("data-type")+'"]').slideDown("fast")})})};this.$("#hint_show_text").fadeOut("fast",function(){n.$("#icon_hide_hint").fadeIn("fast")}),this.$("#view_box").length?this.$("#view_box").animate({opacity:"hide"},"fast","swing",function(){i()}):i()},hideHint:function(){var e=this;this.$("#icon_hide_hint").fadeOut("fast",function(){e.$("#hint_show_text").fadeIn("fast")}),this.$(".hint_text_box").slideUp("fast",function(){e.$("#hint_click_wrap_head").slideDown("fast",function(){e.$("#hint_box").animate({width:e.widthHinBox},"fast","swing",function(){e.$("#view_box").animate({opacity:"show"},"fast","swing")})})})},showForm:function(){this.view.parent.showForm(this.type,this.style.position.left)},showPosts:function(t){var n=this,r=this.$(t.currentTarget).attr("data-type");e.inArray(r,h)>-1&&(n.collection.view.$("#block_post_list_main").html(a),n.collection.setUrlSettings(new(o.get("User"))),n.collection.addUrlParam({content_type:r}),n.collection.fetch({resultFalse:function(){n.collection.view.$("#block_post_list_main").html(new i({data:{text:"No Posts"}}).render().view.el)}}))}}),f=p.extend({template:r,serialize:function(){return{can_use_tool:!(!this.model.get("has_task")&&!this.model.get("can_manager"))}},className:"block-hint-form block-hint-task-form",initialize_:function(){this.type="task"}}),v=p.extend({template:s,className:"block-hint-form block-hint-quiz-form",initialize_:function(){this.type="quiz"}}),_=p.extend({template:l,className:"block-hint-form block-hint-post-form",initialize_:function(){this.type="post"}}),g=p.extend({template:c,className:"block-hint-form block-hint-poll-form",initialize_:function(){this.type="poll"}}),b=p.extend({template:d,className:"block-hint-form block-hint-event-form",initialize_:function(){this.type="event"}}),y=p.extend({template:u,className:"block-hint-form block-hint-email-form",initialize_:function(){this.type="email"}}),w=p.extend({template:m,className:"block-hint-form block-hint-classcast-form",initialize_:function(){this.type="classcast"}}),x={task:f,quiz:v,post:_,poll:g,event:b,email:y,classcast:w};return{get:function(e){return x[e]}}}),define("views/common/post-tools/main/index/_master",["jquery","underscore","backbone","views/common/post-tools/main/hint"],function(e,t,n,i){return n.View.extend({initialize:function(e){t.bindAll(this,"showHint","showForm","loadForm","setContent","getFormViewPathByType"),this.view=e.view||{}},showHint:function(e,t){var n=this;n.setContent(new(i.get(e))({collection:n.collection,model:n.model,view:{parent:n},style:{position:{left:t}}}))},showForm:function(){},getFormViewPathByType:function(){},loadForm:function(e,t){var n=this;n.setContent(new e({param:{collection:n.collection,model:n.model},style:{position:{left:t},show_arrow:!0},view:{parents:this},pass:this.view.parents.pass}))},setContent:function(e){this.$el.html(e.render().view.el)}})}),define("tools/share-helper",["jquery"],function(e){var t={};return t.toFacebook=function(t){var n={};return n.params={init:{appId:window.CN_CONFIG.facebook.appId,status:!0,cookie:!0,xfbml:!0,oauth:!0},method:"feed",link:"http://www.thecn.com",picture:"http://www.thecn.com/img/logo.png",name:"Thecn.com",caption:"Welcome to CourseNetworking",description:"Welcome to CourseNetworking",callback:function(){}},n.setParams=function(t){var n=this;"object"==typeof t&&e.extend(n.params,t)},n.run=function(e){var t=this;t.setParams(e),t.init()},n.init=function(){var e=this;window.fbAsyncInit=function(){FB.init(e.params.init),e.share()},function(e){var t,n="facebook-jssdk";return e.getElementById(n)?!1:(t=e.createElement("script"),t.id=n,t.async=!0,t.src="//connect.facebook.net/en_US/all.js",e.getElementsByTagName("head")[0].appendChild(t),void 0)}(document)},n.share=function(){var e=this;FB.ui(e.params,e.params.callback)},n.run(t)},t.toTwitter=function(t){var n={};return n.params={url:"http://www.thecn.com",text:"Welcome to CourseNetworking",callback:""},n.init=function(){var e=this;(function(){window.twttr=window.twttr||{};var t,n=550,i=450,o=screen.height,a=screen.width,r=Math.round(a/2-n/2),s=0,l=document;o>i&&(s=Math.round(o/2-i/2)),window.twttr.shareWin=window.open("http://twitter.com/share?"+e.getUrlParam(),"","left="+r+",top="+s+",width="+n+",height="+i+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"),t=l.createElement("script"),t.src="http://platform.twitter.com/widgets.js",l.getElementsByTagName("body")[0].appendChild(t)})()},n.setParams=function(t){var n=this;"object"==typeof t&&e.extend(n.params,t)},n.getUrlParam=function(){var e=this;return"text="+e.params.text+"&url="+e.params.url},n.run=function(e){var t=this;t.setParams(e),t.init(),"function"==typeof t.params.callback&&t.params.callback()},n.run(t)},t}),define("text!templates/common/post-tools/share/main.html",[],function(){return'<b class="l-float">Post to</b>\n<ul class="l-float">\n    <li>\n        <input id="share_to_facebook" class="share_to_facebook" type="checkbox"/>\n        <label for="share_to_facebook">Facebook</label>\n        <div class="clear"></div>\n    </li>\n    <li>\n        <input id="share_to_twitter" class="share_to_twitter" type="checkbox"/>\n        <label for="share_to_twitter">Twitter</label>\n        <div class="clear"></div>\n    </li>\n</ul>\n<div class="clear"></div>'}),define("views/common/post-tools/share/main",["jquery","underscore","backbone","tools/share-helper","text!templates/common/post-tools/share/main.html"],function(e,t,n,i,o){return n.View.extend({className:"block-content-operate-social",template:o,initialize:function(){t.bindAll(this,"share2Fb","share2Tw","share")},share2Fb:function(){var e=this;this.$(".share_to_facebook").prop("checked")&&e.text.length>0&&i.toFacebook({description:e.text})},share2Tw:function(){var e=this;this.$(".share_to_twitter").prop("checked")&&e.text.length>0&&i.toTwitter({text:e.text})},share:function(e){t.isObject(e)&&!t.isUndefined(e.text)&&(this.text=e.text,this.share2Tw(),this.share2Fb())}})}),define("views/common/post-tools/main/form/_master",["jquery","underscore","backbone","tools/pop-up-window","views/common/post-tools/share/main","text!templates/loading/head-horizontal.html","jqueryUi"],function(e,t,n,i,o,a){return n.View.extend({initialize:function(e){t.bindAll(this,"initialize_","serialize_","afterRender_","beforeRender_","datePickerInit","selfSave","save","beforSave","afterSave","resultFalse","afterResultTrue"),e=e||{},this.param=e.param||{},this.visibleSettings=e.visibleSettings||{},this.functions=e.functions||{},this.view=t.extend(e.view||{},{shareVeiw:new o}),this.style=t.extend({position:{left:0},show_arrow:!1},e.style||{}),this.htmlText=e.htmlText||{},this.initialize_(e)},initialize_:function(){},serialize:function(){return t.extend({show_arrow:this.style.show_arrow,htmlText:this.htmlText},this.model instanceof n.Model?{model:this.model.toJSON()}:{},this.serialize_())},serialize_:function(){return{}},beforeRender:function(){this.beforeRender_()},beforeRender_:function(){},afterRender:function(){this.$("#icon_arrow").css({left:this.style.position.left}),this.form=this.$("form"),this.afterRender_()},stopEnter:function(e){var t=/textarea/i.test(e.target.tagName);return t||13!==(e.keyCode||e.which||e.charCode||0)},afterRender_:function(){},deleted:function(){this.remove(),this.view.parents&&this.view.parents.view.parents.view.nav.showHintByType(this.type)},beforSave:function(){this.form.append(a),this.form.data({locked:1}),this.selfSave()},save:function(){var e=this,n=e.form.data("locked");return(t.isUndefined(n)||0==n)&&e.beforSave(),!1},afterSave:function(){this.$(".block_loading").remove(),this.form.data({locked:0})},selfSave:function(){},resultFalse:function(e){var n="";t.each(e,function(e){n+=e+"<br />"}),n.length||(n='Please close this window and refresh the page. <br/> <a href="mailto:help@thecn.com" target="_blank">help@thecn.com</a>'),i.get("function").alert(n,{autoClose:!1}),this.afterSave()},datePickerInit:function(e){var n=this;t.isArray(e)&&t.each(e,function(e){n.$(e.element).datepicker({onSelect:function(n,i){t.isFunction(e.callBack)&&e.callBack(n,i)}})})},afterResultTrue:function(e){this.view.shareVeiw.share({text:e.get("text")}),this.param.collection instanceof n.Collection&&(this.param.collection.unshift(e,{silent:!0}),this.param.collection.trigger("unshift",e)),t.isFunction(this.functions.afterSaveCallback)&&this.functions.afterSaveCallback(e),this.deleted()}})}),define("text!templates/common/post-tools/main/form/unavailable.html",[],function(){return'<div class="overfloat">\r\n	<span class="text-hide icon-content-arrow" id="icon_arrow">Arrow</span>\r\n</div>\r\n<div class="wrap">\r\n	<p class="temporary">This function is not currently available.</p>\r\n</div>\r\n<!--\r\n<form>\r\n	<div class="main">\r\n		<table>\r\n			<thead>\r\n				<tr>\r\n					<th colspan="2">\r\n						<p>All fields with <span class="red">*</span> are required.</p>\r\n					</th>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n			</thead>\r\n			<tbody>\r\n				\r\n			</tbody>\r\n		</table>\r\n	</div>\r\n</form>\r\n-->'}),define("views/common/post-tools/main/form/unavailable",["jquery","underscore","backbone","views/common/post-tools/main/form/_master","text!templates/common/post-tools/main/form/unavailable.html"],function(e,t,n,i,o){return i.extend({template:o,className:"block-content-form"})}),define("text!templates/common/post-tools/attachment/result-item.html",[],function(){return'<span title="{{name}}">{{name}}</span>\r\n<a class="delete" href="javascript:;" title="Delete">x</a>\r\n<input type="hidden" name="{{type}}" value="{{value}}"/>\r\n<div class="clear"></div>'}),define("views/common/post-tools/attachment/result-item",["jquery","underscore","backbone","text!templates/common/post-tools/attachment/result-item.html"],function(e,t,n,i){return n.View.extend({template:i,tagName:"li",serialize:function(){return this.data},initialize:function(e){this.data=e.data},events:{"click .delete":"deleted"},deleted:function(){this.remove()}})}),define("text!templates/common/post-tools/attachment/add.html",[],function(){return'<input class="add_input" type="text" />\r\n<a class="bt bt-blue-2 add" href="javascript:;">ADD</a>\r\n<div class="clear"></div>'}),define("views/common/post-tools/attachment/input/_master",["jquery","underscore","backbone","views/common/post-tools/attachment/result-item","text!templates/common/post-tools/attachment/add.html"],function(e,t,n,i,o){return n.View.extend({template:o,initialize:function(e){this.parent=e.parent},events:{"click .add":"add","keypress .add_input":"addItem"},addItem:function(e){13===e.keyCode&&this.add()},add:function(){},_add:function(e,t,n,o){var a=this;a.parent.$(o).prepend(new i({data:{name:t,value:n,type:e}}).render().view.el),a.remove()}})}),define("views/common/post-tools/attachment/input/file",["jquery","underscore","views/common/post-tools/attachment/input/_master"],function(e,t,n){return n.extend({add:function(e,t){this._add("attachments[]",e,t,".file_result_list")}})}),define("views/common/post-tools/attachment/input/picture",["jquery","underscore","views/common/post-tools/attachment/input/_master"],function(e,t,n){return n.extend({add:function(e,t){this._add("pictures[]",e,t,".image_result_list")}})}),define("views/common/post-tools/attachment/input/video",["jquery","underscore","backbone","tools/regs","tools/pop-up-window","views/common/post-tools/attachment/input/_master"],function(e,t,n,i,o,a){return a.extend({add:function(){var t=e.trim(this.$(".add_input").val());return i.check("youtubeUrl",t)||i.check("youkuUrl",t)?(this._add("videos[]",t,t,".video_result_list"),!0):(o.get("function").alert("Please enter a valid link. Example: http://youtu.be/E7yvl_ABmp0"),!1)}})}),define("views/common/post-tools/attachment/input/link",["jquery","underscore","backbone","tools/regs","tools/pop-up-window","views/common/post-tools/attachment/input/_master"],function(e,t,n,i,o,a){return a.extend({add:function(){var t=e.trim(this.$(".add_input").val());if(i.check("url",t)){var n=t;return this._add("links[]",t,n,".link_result_list"),!0}return o.get("function").alert("Please enter a valid link. Example: http://thecn.com."),!1}})}),define("text!templates/common/post-tools/attachment/list.html",[],function(){return'<li>\r\n	<div id="{{#file_button}}{{file_button}}_wrap{{/file_button}}{{^file_button}}block_upload_file_wrap{{/file_button}}" class="head wrap-upload block_upload_file">\r\n		<a id="{{#file_button}}{{file_button}}{{/file_button}}{{^file_button}}upload_files{{/file_button}}" class="icon-attach icon-attach-file" href="javascript:;">File</a>\r\n	</div>\r\n	<div class="main">\r\n		<div class="center">\r\n			<ol class="file_result_list">\r\n				\r\n			</ol>\r\n		</div>\r\n	</div>\r\n</li>\r\n<li>\r\n	<div id="{{#image_button}}{{image_button}}_wrap{{/image_button}}{{^image_button}}block_upload_images_wrap{{/image_button}}" class="head wrap-upload block_upload_images">\r\n		<a id="{{#image_button}}{{image_button}}{{/image_button}}{{^image_button}}upload_images{{/image_button}}" class="icon-attach icon-attach-image" href="javascript:;">Image</a>\r\n	</div>\r\n	<div class="main">\r\n		<div class="center">\r\n			<ol class="image_result_list">\r\n				\r\n			</ol>\r\n		</div>\r\n	</div>\r\n</li>\r\n<li>\r\n	<div class="head">\r\n		<a class="icon-attach icon-attach-video show_opera_video" href="javascript:;">Video</a>\r\n	</div>\r\n	<div class="main">\r\n		<div class="top operation_wrap">\r\n\r\n		</div>\r\n		<div class="center">\r\n			<ol class="video_result_list">\r\n				\r\n			</ol>\r\n		</div>\r\n	</div>\r\n</li>\r\n<li>\r\n	<div class="head">\r\n		<a class="icon-attach icon-attach-links show_opera_link" href="javascript:;">Link</a>\r\n	</div>\r\n	<div class="main">\r\n		<div class="top operation_wrap">\r\n\r\n		</div>\r\n		<div class="center">\r\n			<ol class="link_result_list">\r\n				\r\n			</ol>\r\n		</div>\r\n	</div>\r\n</li>'}),define("views/common/post-tools/attachment/list",["jquery","underscore","backbone","views/common/post-tools/attachment/input/file","views/common/post-tools/attachment/input/picture","views/common/post-tools/attachment/input/video","views/common/post-tools/attachment/input/link","tools/upload-plugin","text!templates/common/post-tools/attachment/list.html"],function(e,t,n,i,o,a,r,s,l){return n.View.extend({template:l,tagName:"ul",className:"block-content-operate-attachment",initialize:function(n){var i=!t.isUndefined(n)&&t.has(n,"settings")?n.settings:{},o={file:{scope:"upload_file"},image:{scope:"upload_picture"},callback:function(){}};this.settings=e.extend(!0,{},o,i)},serialize:function(){return{file_button:this.settings.file.scope,image_button:this.settings.image.scope}},events:{"click .show_opera_video":"loadVideoOpera","click .show_opera_link":"loadLinkOpera"},afterRender:function(){var n=this;if(this.settings.callback(this),!t.isUndefined(this.model)){var l=this.model.get("attachments");t.each(l,function(e){var t=new i({parent:n});t.add(e.name,e.id)});var c=this.model.get("pictures");t.each(c,function(e){var t=new o({parent:n});t.add(e.name,e.id)});var d=this.model.get("videos");t.each(d,function(e){var t=new a({parent:n});t._add("videos[]",e.view_url,e.view_url,".video_result_list")});var u=this.model.get("links");t.each(u,function(e){var t=new r({parent:n});t._add("links[]",e.view_url,e.view_url,".link_result_list")})}var m=s,h=s;n.settings.file&&n.settings.file.scope&&m.set({browseButtonId:n.settings.file.scope,wrapId:n.settings.file.scope+"_wrap",events:{success:function(t,o,a){if(a.result&&"object"===e.type(a.data)){var r=new i({parent:n});r.add(a.data.name,a.data.id)}}}}),n.settings.image&&n.settings.image.scope&&h.set({browseButtonId:n.settings.image.scope,wrapId:n.settings.image.scope+"_wrap",url:"/api/attachment_picture/",fileExts:"bmp,jpg,jpeg,png,gif,BMP,JPG,JPEG,PNG,GIF",events:{success:function(t,i,a){if(a.result&&"object"===e.type(a.data)){var r=new o({parent:n});r.add(a.data.name,a.data.id)}}}})},loadVideoOpera:function(t){this.showOpera(e(t.currentTarget),new a({parent:this}).render().view.el)},loadLinkOpera:function(t){this.showOpera(e(t.currentTarget),new r({parent:this}).render().view.el)},showOpera:function(e,t){e.closest("li").find(".operation_wrap").html(t)}})}),define("collections/conexus/user-collection",["jquery","underscore","backbone","modules/conexus/conexus"],function(e,t,n,i){return n.Collection.extend({model:i,urlRoot:"api/user_conexus/"})}),define("views/text/post-visible-tip/_master",["jquery","underscore","backbone","tools/pop-up-window"],function(e,t,n,i){return i.get("view").extend({className:"pop-up-window block-window-visible-tip",events:{"click .cancel":"deleted","click .show_more":"showMore"},showMore:function(t){this.$(".tip").slideDown("fast",function(){e(t.currentTarget).hide()})}})}),define("text!templates/text/post-visible-tip/conexus.html",[],function(){return'<div class="head">\n	<h4>Understanding the CN Access Permission</h4>\n</div>\n<div class="main">\n    <p>\n        Please use this control to indicate which group or network can view this post. For example, if you select Visible to This Conexus, only members of this Conexus will see the Post.<br/> <a class="show_more" href="javascript:;">Tell Me More</a>\n    </p>\n    <div class="tip display-none">\n        <p>\n            1.Visible to This Conexus - Select this option when you want this Post to be seen by members of This Conexus. \n        </p>\n        <p>\n            2.Visible to This Conexus & My Followers  Select this option when you want this Post to be seen by members of this Conexus in addition to be seen by your CN Followers. \n        </p>\n        <p>\n            3.Visible to This & My Other Conexus  - Select this option when you want this Post to be seen by members of your entire Conexus. \n        </p>\n        <p>\n            4.Only Me (Edit Later) - Select this option when you are not ready to release your Post. Later, you may edit this Post and select a different access level.\n        </p>\n    </div>\n</div>'}),define("views/text/post-visible-tip/user",["views/text/post-visible-tip/_master","text!templates/text/post-visible-tip/conexus.html"],function(e,t){return e.extend({template:t})}),define("views/text/post-visible-tip/course",["views/text/post-visible-tip/_master","text!templates/text/post-visible-tip/conexus.html"],function(e,t){return e.extend({template:t})}),define("views/text/post-visible-tip/conexus",["views/text/post-visible-tip/_master","text!templates/text/post-visible-tip/conexus.html"],function(e,t){return e.extend({template:t})}),define("views/common/post-tools/visible/list/_master",["jquery","underscore","backbone","views/common/loading/view"],function(e,t,n,i){return n.View.extend({className:"block-club-input-list",initialize:function(e){t.bindAll(this,"addAll","addOne"),this.collection.on("fetch",this.addAll,this),this.data=e.data?e.data:{}},beforeRender:function(){this.$("#visible_club_list").html((new i).render().view.el)},afterRender:function(){this.collection.addUrlParam({limit:999}),this.collection.fetch()},addAll:function(){this.$("#visible_club_list").empty(),this.collection.each(this.addOne)}})}),define("text!templates/common/post-tools/visible/personal/item.html",[],function(){return'<input type="checkbox" id="personal_ids_{{id}}" name="auth_assignment_group_ids[]" value="{{id}}" />\r\n<label for="personal_ids_{{id}}" title="{{name}}">{{name}}</label>'}),define("views/common/post-tools/visible/item/_master",["jquery","underscore","backbone","text!templates/common/post-tools/visible/personal/item.html"],function(e,t,n){return n.View.extend({tagName:"li",serialize:function(){return this.model.toJSON()}})}),define("text!templates/common/post-tools/visible/course/item.html",[],function(){return'<input type="checkbox" id="relations_course_ids_{{id}}" name="relations[course_ids][]" value="{{id}}" />\r\n<label for="relations_course_ids_{{id}}" title="{{name}}">{{name}}</label>'}),define("views/common/post-tools/visible/item/course",["views/common/post-tools/visible/item/_master","text!templates/common/post-tools/visible/course/item.html"],function(e,t){return e.extend({template:t})}),define("text!templates/common/post-tools/visible/course/list.html",[],function(){return'<div class="main">\r\n	<ul id="visible_club_list">\r\n		\r\n	</ul>\r\n</div>'}),define("views/common/post-tools/visible/list/course",["jquery","underscore","views/common/post-tools/visible/list/_master","views/common/post-tools/visible/item/course","text!templates/common/post-tools/visible/course/list.html"],function(e,t,n,i,o){return n.extend({template:o,addOne:function(t){if(-1===e.inArray(t.get("id"),this.data.unlessIds)){var n=new i({model:t});this.$("#visible_club_list").prepend(n.render().view.el)}}})}),define("text!templates/common/post-tools/visible/conexus/item.html",[],function(){return'<input type="checkbox" id="relations_conexus_ids_{{id}}" name="relations[conexus_ids][]" value="{{id}}" />\r\n<label for="relations_conexus_ids_{{id}}" title="{{name}}">{{name}}</label>'}),define("views/common/post-tools/visible/item/conexus",["views/common/post-tools/visible/item/_master","text!templates/common/post-tools/visible/conexus/item.html"],function(e,t){return e.extend({template:t})}),define("text!templates/common/post-tools/visible/conexus/list.html",[],function(){return'<div class="main">\r\n	<ul id="visible_club_list">\r\n		\r\n	</ul>\r\n</div>\r\n'}),define("views/common/post-tools/visible/list/conexus",["jquery","underscore","views/common/post-tools/visible/list/_master","views/common/post-tools/visible/item/conexus","text!templates/common/post-tools/visible/conexus/list.html"],function(e,t,n,i,o){return n.extend({template:o,addOne:function(t){if(-1===e.inArray(t.get("id"),this.data.unlessIds)){var n=new i({model:t});this.$("#visible_club_list").prepend(n.render().view.el)}}})}),define("views/common/post-tools/visible/item/personal",["views/common/post-tools/visible/item/_master","text!templates/common/post-tools/visible/personal/item.html"],function(e,t){return e.extend({template:t})}),define("text!templates/common/post-tools/visible/personal/list.html",[],function(){return'<div class="main">\r\n	<ul id="visible_club_list">\r\n		\r\n	</ul>\r\n</div>'}),define("views/common/post-tools/visible/list/personal",["jquery","underscore","views/common/post-tools/visible/list/_master","views/common/post-tools/visible/item/personal","text!templates/common/post-tools/visible/personal/list.html"],function(e,t,n,i,o){return n.extend({template:o,addOne:function(e){var t=new i({model:e});this.$("#visible_club_list").prepend(t.render().view.el)}})}),define("text!templates/common/post-tools/visible/main.html",[],function(){return'<div class="block-content-operate-visible">\r\n	<div class="head">\r\n		<select class="auth_assignment_select">\r\n            <option>Loading...</option>\r\n		</select>\r\n        <a class="icon-mark text-hide" id="show_visible_tip" href="javascript:;" title="Understanding the CN Access Permission">\r\n            Understanding the CN Access Permission\r\n        </a>\r\n        <div class="auth_assignment_opera">           \r\n		</div>\r\n	</div>\r\n	<div class="main auth_assignment_main">\r\n		\r\n	</div>\r\n</div>\r\n'}),define("views/common/post-tools/visible/main",["jquery","underscore","backbone","modules/user/user","modules/course/course","modules/conexus/conexus","collections/auth-groups","collections/course/user-collection","collections/conexus/user-collection","views/text/post-visible-tip/user","views/text/post-visible-tip/course","views/text/post-visible-tip/conexus","views/common/float-box/_master","views/common/post-tools/visible/list/course","views/common/post-tools/visible/list/conexus","views/common/post-tools/visible/list/personal","text!templates/common/post-tools/visible/main.html"],function(e,t,n,i,o,a,r,s,l,c,d,u,m,h,p,f,v){return n.View.extend({template:v,className:"block-content-operate-visible",events:{"change .auth_assignment_select":"selectAuth","click #show_visible_tip":"showVisibleTip"},initialize:function(e){t.bindAll(this,"setAuths","setOptions"),this.model=new i,t.isObject(e)&&(this.model=e.model),this.element={},this.settings={defaultValue:"",options:{}},this.view={VisibleTipView:c},this.templatePath="common/post-tools/visible/main/user",this.model instanceof i?(this.view.VisibleTipView=c,this.settings.defaultValue="public",this.settings.options={"public":{key:["public"],value:"Visible to All CN Members"},my_follower:{key:["my_follower"],value:"Visible to My Followers"},my_colleague:{key:["my_colleague"],value:"Visible to My Colleagues"},some_courses:{key:["course"],value:"Visible to My Courses"},some_conexus:{key:["conexus"],value:"Visible to My Conexus"},persoanl_network:{key:[],value:"Visible to My Personal Network"}}):this.model instanceof o?(this.view.VisibleTipView=d,this.settings.defaultValue="similar_courses",this.settings.options={course:{key:["course"],value:"Visible to This Course"},"public":{key:["public","course"],value:"Visible to This Course and All CN Members"},some_courses:{key:["course"],value:"Visible to This Course and My Other Courses"},similar_courses:{key:["similar_courses","course"],value:"Visible to This Course and Similar Courses"},only_me:{key:["only_me"],value:"Only Me (Edit Later)"}}):this.model instanceof a&&(this.view.VisibleTipView=u,this.settings.defaultValue="conexus",this.settings.options={conexus:{key:["conexus"],value:"Visible to This Conexus"},my_follower:{key:["conexus","my_follower"],value:"Visible to This Course and My Followers"},some_conexus:{key:["conexus"],value:"Visible to This and My Other Conexus"},only_me:{key:["only_me"],value:"Only Me (Edit Later)"}}),t.isObject(e)&&(this.settings=t.extend(this.settings,e.settings||{}))},afterRender:function(){this.setOptions()},setOptions:function(){var e=this,n="";t.each(this.settings.options,function(t,i){n+='<option value="'+i+'" '+(i===e.settings.defaultValue?'selected="selected"':"")+">"+t.value+"</option>"}),this.$(".auth_assignment_select").html(n),this.setAuths(e.settings.defaultValue)},showVisibleTip:function(e){new m({view:new this.view.VisibleTipView,target:"#show_visible_tip",arrow:{offset:300}}).show(e)},selectAuth:function(t){var n=this,i=e(t.currentTarget).val();this.setAuths(i),"some_courses"===i?n.$(".auth_assignment_main").html(new h({collection:new s,data:{unlessIds:[n.model.get("id")]}}).render().view.el).slideDown():"some_conexus"===i?n.$(".auth_assignment_main").html(new p({collection:new l,data:{unlessIds:[n.model.get("id")]}}).render().view.el).slideDown():"persoanl_network"===i?n.$(".auth_assignment_main").html(new f({collection:new(r.get("AuthGroupCollection"))}).render().view.el).slideDown():n.$(".auth_assignment_main").empty().slideUp()},setAuths:function(n){var i=this.settings.options[n],r="";t.each(i.key,function(e){r+='<input type="hidden" name="auth_assignment_group_ids[]" value="'+e+'" />'
}),-1!==e.inArray("course",i.key)&&this.model instanceof o?r+='<input type="hidden" name="relations[course_ids][]" value="'+this.model.get("id")+'" />':-1!==e.inArray("conexus",i.key)&&this.model instanceof a&&(r+='<input type="hidden" name="relations[conexus_ids][]" value="'+this.model.get("id")+'" />'),this.$(".auth_assignment_opera").html(r)}})}),define("modules/attachment",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/attachment/"})}),define("modules/content/web-page-content-detection",["jquery","underscore","backbone"],function(e,t,n){var i=n.Model.extend({urlRoot:"api/web_page_content_detection/"});return i}),define("text!templates/common/pop-up-window/share-link.html",[],function(){return'<div class="head">\r\n	<h4>ShareLink</h4>\r\n</div>\r\n<div class="main share_link_main">\r\n	<form id="share_link_form" method="post">\r\n		<div class="top">\r\n            {{#pictures_len}}\r\n            <div class="left l-float">\r\n                <ul class="share_link_img_list">\r\n                    {{#pictures}}\r\n                    <li class="share_link_img_list_item">\r\n                        <img src="{{view_url}}" alt="{{page_title}}" />\r\n                    </li>\r\n                    {{/pictures}}\r\n                </ul>\r\n            </div>\r\n            {{/pictures_len}}\r\n            <div class="right r-float">\r\n                <div class="title">\r\n                    {{#page_title}}\r\n                    <div>{{page_title}}</div>\r\n                    {{/page_title}}\r\n                    <div>\r\n                        <a class="break-word link_bypass" href="{{share_link}}">{{share_link}}</a>\r\n                    </div>\r\n                </div>\r\n                {{#page_description}}\r\n                <div class="body break-word">\r\n                    {{page_description}}\r\n                </div>\r\n                {{/page_description}}\r\n                <div class="nav-wrap">\r\n                    <div class="head">\r\n                        <a class="share_link_prev_picture" href="javascript:;"> < </a>\r\n                        <a class="share_link_next_picture" href="javascript:;"> > </a>\r\n                        <p><b class="picture_pager">1</b> of <b>{{pictures_len}}</b> Choose a Thumbnaril.</p>\r\n                        <div class="clear"></div>\r\n                    </div>\r\n                    <div class="main checkbox-wrap">\r\n                        <input id="no_thumbnail" type="checkbox" value=""/>\r\n                        <label for="no_thumbnail">No Thumbnail</label>\r\n                        <div class="clear"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="clear"></div>\r\n        </div>\r\n		<div class="center">\r\n			<div class="title">\r\n				<span>Comment</span>\r\n			</div>\r\n			<div class="body">\r\n				<textarea name="text">{{text}}</textarea>\r\n			</div>\r\n		</div>\r\n		<div class="bottom">\r\n            <div class="head">\r\n                <div class="left l-float">\r\n					<b class="l-float">Attachment</b>\r\n					<div class="l-float" id="share_link_attachment_wrap">\r\n						\r\n					</div>\r\n					<div class="clear"></div>\r\n				</div>\r\n                <div class="clear"></div>\r\n            </div>\r\n            <div class="foot">\r\n                <div class="l-float">\r\n                    <div id="share_link_visible_wrap">\r\n\r\n                    </div>\r\n                </div>\r\n                <div class="r-float">\r\n                    <input type="hidden" name="title" value="{{page_title}}" />\r\n                    <input type="hidden" name="description" value="{{page_description}}" />\r\n                    <button class="bt bt-blue-2 bt-size-normal save" type="submit">SUBMIT</button>\r\n                    <button class="bt bt-gray bt-size-normal cancel" type="button">CANCEL</button>\r\n                    <div class="clear"></div>\r\n                </div>\r\n                <div class="clear"></div>\r\n            </div>\r\n		</div>\r\n	</form>\r\n</div>\r\n'}),define("views/common/pop-up-window/share-link",["jquery","underscore","backbone","tools/pop-up-window","views/common/post-tools/attachment/list","views/common/post-tools/visible/main","modules/content/share-link","modules/attachment","modules/content/web-page-content-detection","text!templates/loading/head-horizontal.html","text!templates/common/pop-up-window/share-link.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c,d){var u=i.get("function");return i.get("view").extend({className:"block-window-share-link pop-up-window",template:d,events:{"click .cancel":"deleted","submit #share_link_form":"save","click .share_link_prev_picture":"prevPicture","click .share_link_next_picture":"nextPicture","click #share_link_attachment_wrap .delete":"deleteAttachmentResultItem"},initialize_:function(t){var n=this;this.parent=t.parent,this.model=new r;var i=new l;i.addUrlParam({url:t.data.share_link}),i.fetch({resultTrue:function(i,o){n.model.set(e.extend({},o.data,t.data)),n.render()},resultFalse:function(){u.alert("Can not access the share link.")}})},serialize:function(){return e.extend({},{pictures_len:this.model.get("pictures").length},this.model.toJSON())},afterRender_:function(){var e=this;if(0>=this.model.get("share_link").length)e.$(".share_link_main").html(c);else{var t=new a({model:e.parent.param.model,settings:e.parent.param.visibleSettings});this.$("#share_link_visible_wrap").append(t.render().view.el);var n=new o({settings:{file:{scope:"share_link_upload_file"},image:{scope:"share_link_upload_picture"},callback:function(t){t.$(".file_result_list").html(e.parent.$(".file_result_list").html()),t.$(".image_result_list").html(e.parent.$(".image_result_list").html()),t.$(".video_result_list").html(e.parent.$(".video_result_list").html()),t.$(".link_result_list").html(e.parent.$(".link_result_list").html())}}});this.$("#share_link_attachment_wrap").append(n.render().view.el)}},save:function(n){if(e(n.currentTarget).attr("locked"))return!1;e(n.currentTarget).attr("locked","locked");var i=this,o=i.$("#share_link_form").serializeObject(),a=function(){if(i.model.addUrlParam({return_detail:1,with_content_count:1,with_content_user:1,with_content_original_content:1,with_content_attachments:1,with_content_pictures:1,with_content_links:1,with_content_videos:1,with_content_courses:1,with_content_conexuses:1,with_user_country:1,with_user_profile:1}),t.has(o,"pictures")){var a=i.model.get("pictures");o.pictures=e.merge(a,o.pictures)}i.model.save(o,{wait:!0,resultTrue:function(e,t){i.parent.view.shareVeiw.share({text:t.data.text}),i.parent.param.collection.unshift(e,{silent:!0}),i.parent.param.collection.trigger("unshift",e),i.parent.deleted(),i.deleted()},completeCallback:function(){e(n.currentTarget).removeAttr("locked")}})};if(i.$("#no_thumbnail:checked").length)i.model.set({pictures:[]}),a();else{var r=i.$(".share_link_img_list_item img:visible");if(r.length>0){var l=new s;l.save({upload_method:"url",url:r.attr("src")},{resultTrue:function(e){i.model.set({pictures:[e.get("id")]}),a()}})}else a()}return!1},deleted:function(){var e=this;u.close(),this.remove(),e.parent.$(".file_result_list").html(e.$(".file_result_list").html()),e.parent.$(".image_result_list").html(e.$(".image_result_list").html()),e.parent.$(".video_result_list").html(e.$(".video_result_list").html()),e.parent.$(".link_result_list").html(e.$(".link_result_list").html())},prevPicture:function(){var e=this,t=this.$(".share_link_img_list_item:visible"),n=t.prev(".share_link_img_list_item");if(n.length>0){var i=e.$(".picture_pager");i.html(parseInt(i.html())-1),t.fadeOut(function(){n.fadeIn()})}},nextPicture:function(){var e=this,t=this.$(".share_link_img_list_item:visible"),n=t.next(".share_link_img_list_item");if(n.length>0){var i=e.$(".picture_pager");i.html(parseInt(i.html())+1),t.fadeOut(function(){n.fadeIn()})}},deleteAttachmentResultItem:function(t){e(t.currentTarget).closest("li").remove()}})}),define("text!templates/common/post-tools/main/form/post.html",[],function(){return'{{#show_arrow}}\r\n    <div class="overfloat">\r\n        <span class="text-hide icon-content-arrow" id="icon_arrow">Arrow</span>\r\n    </div>\r\n{{/show_arrow}}\r\n{{#model}}\r\n<form class="wrap" method="post">\r\n	<div class="main">\r\n		<div class="center">\r\n			<div class="body">\r\n				<textarea class="share_link" name="text" placeholder="Write your Post here." required="required">{{text}}</textarea>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="foot">\r\n		<div class="block-content-form-operate">\r\n			<div class="head">\r\n				<div class="left l-float">\r\n					<b class="l-float">Attachment</b>\r\n					<div class="l-float" id="attachment_wrap">\r\n						\r\n					</div>\r\n					<div class="clear"></div>\r\n				</div>\r\n                <div class="right r-float" id="share_wrap">\r\n\r\n				</div>\r\n				<div class="clear"></div>\r\n			</div>\r\n			<div class="foot">\r\n				<div class="left l-float" id="visible_wrap">\r\n					\r\n				</div>	\r\n				<div class="right r-float">\r\n					<button class="bt-post-form bt-size-normal bt bt-blue-2" type="submit">\r\n						SUBMIT\r\n					</button>\r\n					<button class="bt-post-form bt-size-normal bt bt-gray" id="{{#htmlText.cancelId}}{{htmlText.cancelId}}{{/htmlText.cancelId}}{{^htmlText.cancelId}}delete_content_form{{/htmlText.cancelId}}" type="button">\r\n						CANCEL\r\n					</button>\r\n					<div class="clear"></div>\r\n				</div>	\r\n				<div class="clear"></div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</form>\r\n{{/model}}'}),define("views/common/post-tools/main/form/post",["jquery","underscore","backbone","tools/pop-up-window","views/common/post-tools/main/form/_master","views/common/post-tools/attachment/list","views/common/post-tools/visible/main","views/common/pop-up-window/share-link","modules/content/post","text!templates/common/post-tools/main/form/post.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c){return o.extend({template:c,className:"block-content-form block-content-post-form",events:{"submit form":"save","keypress form":"stopEnter","click #delete_content_form":"deleted","keydown .share_link":"keydownHandler","paste .share_link":"pasteHandler","click #attachment_wrap .delete":"deleteAttachmentResultItem"},initialize_:function(e){t.bindAll(this,"loadShareLinkForm"),this.model=e.model||new l,this.isEdit=!this.model.isNew(),this.type="post"},beforeRender_:function(){var e=this;this.setViews(t.extend({"#attachment_wrap":new a({model:e.model,settings:{file:{scope:"upload_file_"+e.model.cid},image:{scope:"upload_picture_"+e.model.cid}}})},e.isEdit?{}:{"#share_wrap":e.view.shareVeiw,"#visible_wrap":new r({model:e.param.model,settings:e.visibleSettings})}))},selfSave:function(){var e=this;return this.model.setUrlParam({return_detail:1,with_content_count:1,with_content_user:1,with_content_original_content:1,with_content_attachments:1,with_content_pictures:1,with_content_links:1,with_content_videos:1,with_content_courses:1,with_content_conexuses:1,with_user_country:1,with_user_profile:1}),this.isEdit&&this.model.unset("auth_assignment_group_ids"),e.model.save(e.form.serializeObject(),{wait:!0,resultTrue:function(t,n){e.afterResultTrue(t,n)},resultFalse:e.resultFalse}),!1},pasteHandler:function(t){var n=this;return setTimeout(function(){var i=e.trim(e(t.currentTarget).val());n.loadShareLinkForm(i)},500),!0},keydownHandler:function(t){if(13==t.keyCode){var n=e.trim(e(t.currentTarget).val());this.loadShareLinkForm(n)}return!0},loadShareLinkForm:function(e){if(!this.isEdit){var t=this,n=/^((http|https|ftp){1}\:\/\/)?([a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(:[a-zA-Z0-9]*)?\/?([a-zA-Z0-9\-\._\?\,\'\/\\\+&amp;%\$#\=~])*)+$/,o="";if(e.indexOf(" ")>"-1"){var a=e.lastIndexOf(" "),r=e.substring(a+1,e.length);n.test(r)&&(o=e.substring(0,a),e=r)}if(e.indexOf("\n")>"-1"){var l=e.lastIndexOf("\n");o=e.substring(0,l),e=e.substring(l+1,e.length)}return n.test(e)&&i.get("function").open(new s({parent:t,data:{share_link:e,text:o}}).render().view.el),!0}},deleteAttachmentResultItem:function(t){e(t.currentTarget).closest("li").remove()}})}),define("text!templates/common/post-tools/main/form/poll/multiple-choice-item.html",[],function(){return'<input class="poll_type_multiple_choice_checkbox" type="checkbox" checked="checked" />\n<input class="poll-input poll_type_multiple_choice_text" name="choices[]" type="text" value="{{value}}" placeholder="Type choice here" />\n'}),define("views/common/post-tools/main/form/poll/multiple-choice-item",["jquery","underscore","backbone","text!templates/common/post-tools/main/form/poll/multiple-choice-item.html"],function(e,t,n,i){return n.View.extend({template:i,tagName:"li",initialize:function(e){this.options=e},serialize:function(){return this.options.data}})}),define("text!templates/common/post-tools/main/form/poll.html",[],function(){return'{{#show_arrow}}\r\n    <div class="overfloat">\r\n        <span class="text-hide icon-content-arrow" id="icon_arrow">Arrow</span>\r\n    </div>\r\n{{/show_arrow}}\r\n{{#model}}\r\n<form class="wrap" method="post">\r\n	<div class="main">\r\n		<table>\r\n			<thead>\r\n				<tr>\r\n					<th colspan="2">\r\n						<p>All fields with <span class="red">*</span> are required.</p>\r\n					</th>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n			</thead>\r\n			<tbody>\r\n				<tr>\r\n					<td>\r\n						<label for="poll_title">Title</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n						<input class="poll-input" id="poll_title" type="text" name="title" value="{{title}}" placeholder="Max 45 Characters" required="required"/>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="question">\r\n					<td>\r\n						<label for="poll_text">Question</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n                        <textarea id="poll_text" name="text" placeholder="Max 1500 Characters" required="required">{{text}}</textarea>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="type">\r\n					<td>\r\n						<label for="poll_type">Question Type</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n						<select id="poll_type" name="survey_type" required="required">\r\n                            <option value="">Please Select One</option>\r\n                            <option value="multiple_choice">\r\n								Multiple Choice\r\n							</option>\r\n							<option value="short_answer">\r\n								Short Answer\r\n							</option>\r\n							<option value="true_false">\r\n								True - False\r\n							</option>\r\n							<option value="yes_no">\r\n								Yes - No\r\n							</option>\r\n							<option value="agree_disagree">\r\n								Agree - Disagree\r\n							</option>\r\n							<option value="agree_noopinion_disagree">\r\n								Agree - No Opinion - Disagree\r\n							</option>\r\n							<option value="scale_5">\r\n								Scale of 1 to 5\r\n							</option>\r\n							<option value="scale_10">\r\n								Scale of 1 to 10\r\n							</option>\r\n						</select>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding display-none poll_type_short_answer poll_type">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="display-none poll_type_short_answer poll_type">\r\n					<td></td>\r\n					<td>\r\n						<div class="checkbox-wrap">\r\n							<input id="poll_is_display_user" type="checkbox" name="display_user" value="show" checked="checked"/>\r\n							<label for="poll_is_display_user">Show Who Answered</label>\r\n							<div class="clear"></div>\r\n						</div>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<!-- Dynamic -->\r\n					<!-- Multiple Choice -->\r\n					<tr class="display-none poll_type_multiple_choice poll_type">\r\n						<td></td>\r\n						<td>\r\n							<div class="multiple">\r\n								<div class="head">\r\n									<input class="poll-input" id="poll_choice_input" type="text" placeholder="Type choice here" />\r\n									<a class="bt bt-gray" id="poll_choice_add" href="javascript:;">ADD</a>\r\n									<div class="clear"></div>\r\n								</div>\r\n								<div class="main">\r\n									<ul id="poll_choices">\r\n                                        {{#id}}\r\n                                        {{#is_choice_type}}\r\n                                        {{#choices}}\r\n                                        <li>\r\n                                            <input class="poll_type_multiple_choice_checkbox" type="checkbox" checked="checked" />\r\n                                            <input class="poll-input poll_type_multiple_choice_text" name="choices[]" type="text" value="{{subject}}" placeholder="Type choice here" />\r\n                                        </li>\r\n                                        {{/choices}}\r\n                                        {{/is_choice_type}}\r\n                                        {{/id}}\r\n									</ul>\r\n								</div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="display-none padding poll_type_multiple_choice poll_type">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<tr class="display-none poll_type_multiple_choice poll_type">\r\n						<td></td>\r\n						<td>\r\n							<div class="choice">\r\n								<div class="l-float radio-wrap">\r\n                                    <input id="poll_is_one_answer" type="radio" _name="choice_type" value="one_choice" checked="checked"/>\r\n									<label for="poll_is_one_answer">One answer</label>\r\n									<div class="clear"></div>\r\n								</div>\r\n								<div class="l-float radio-wrap">\r\n									<input id="poll_is_multiple_answer" type="radio" _name="choice_type" value="multiple_choice"/>\r\n									<label for="poll_is_multiple_answer">Multiple answer</label>\r\n									<div class="clear"></div>\r\n								</div>\r\n								<div class="clear"></div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="display-none padding poll_type_multiple_choice poll_type">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<!-- /Multiple Choice -->\r\n				\r\n					<!-- Ture or False -->\r\n					<tr class="display-none poll_type_true_false poll_type">\r\n						<td></td>\r\n						<td>\r\n							<div class="ture-false">\r\n								<input class="poll-input poll_type_true_false_text" type="text" _name="choices[]" value="{{true_false_choice.true_item}}" placeholder="True" />\r\n								<input class="poll-input poll_type_true_false_text" type="text" _name="choices[]" value="{{true_false_choice.false_item}}" placeholder="False" />\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding display-none poll_type_true_false poll_type">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<!-- /Ture or False -->\r\n					\r\n					<!-- Result Display -->\r\n					<tr class="poll_result_display">\r\n						<td></td>\r\n						<td>\r\n                            <select id="poll_result_display_type" name="result_display_type" required="required">\r\n								<option value="show_after_submit">Show results after submit</option>\r\n								<option value="show_after_date">Show results after a date</option>\r\n								<option value="show_never">Never show results</option>\r\n							</select>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding poll_result_display">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<tr class="display-none poll_result_display_type_show_after_date">\r\n						<td>\r\n							<label for="poll_result_date">Display Date</label>\r\n							<span class="red">*</span>\r\n						</td>\r\n						<td>\r\n							<div class="date-wrap">\r\n                                <input class="poll-input" id="poll_result_date" type="text" value="{{display_result_date}}" placeholder="mm/dd/yy"/>\r\n								<select id="poll_result_time">\r\n                                    <option value="">Please Select One</option>\r\n                                    <option value="8:00 AM">8:00 AM</option>\r\n									<option value="8:30 AM">8:30 AM</option>\r\n									<option value="9:00 AM">9:00 AM</option>\r\n									<option value="9:30 AM">9:30 AM</option>\r\n									<option value="10:00 AM">10:00 AM</option>\r\n									<option value="10:30 AM">10:30 AM</option>\r\n									<option value="11:00 AM">11:00 AM</option>\r\n									<option value="11:30 AM">11:30 AM</option>\r\n									<option value="12:00 PM">12:00 PM</option>\r\n									<option value="12:30 PM">12:30 PM</option>\r\n									<option value="1:00 PM">1:00 PM</option>\r\n									<option value="1:30 PM">1:30 PM</option>\r\n									<option value="2:00 PM">2:00 PM</option>\r\n									<option value="2:30 PM">2:30 PM</option>\r\n									<option value="3:00 PM">3:00 PM</option>\r\n									<option value="3:30 PM">3:30 PM</option>\r\n									<option value="4:00 PM">4:00 PM</option>\r\n									<option value="4:30 PM">4:30 PM</option>\r\n									<option value="5:00 PM">5:00 PM</option>\r\n									<option value="5:30 PM">5:30 PM</option>\r\n									<option value="6:00 PM">6:00 PM</option>\r\n									<option value="6:30 PM">6:30 PM</option>\r\n									<option value="7:00 PM">7:00 PM</option>\r\n									<option value="7:30 PM">7:30 PM</option>\r\n									<option value="8:00 PM">8:00 PM</option>\r\n									<option value="8:30 PM">8:30 PM</option>\r\n									<option value="9:00 PM">9:00 PM</option>\r\n									<option value="9:30 PM">9:30 PM</option>\r\n									<option value="10:00 PM">10:00 PM</option>\r\n									<option value="10:30 PM">10:30 PM</option>\r\n									<option value="11:00 PM">11:00 PM</option>\r\n									<option value="11:30 PM">11:30 PM</option>\r\n									<option value="12:00 AM">12:00 AM</option>\r\n									<option value="12:30 AM">12:30 AM</option>\r\n									<option value="1:00 AM">1:00 AM</option>\r\n									<option value="1:30 AM">1:30 AM</option>\r\n									<option value="2:00 AM">2:00 AM</option>\r\n									<option value="2:30 AM">2:30 AM</option>\r\n									<option value="3:00 AM">3:00 AM</option>\r\n									<option value="3:30 AM">3:30 AM</option>\r\n									<option value="4:00 AM">4:00 AM</option>\r\n									<option value="4:30 AM">4:30 AM</option>\r\n									<option value="5:00 AM">5:00 AM</option>\r\n									<option value="5:30 AM">5:30 AM</option>\r\n									<option value="6:00 AM">6:00 AM</option>\r\n									<option value="6:30 AM">6:30 AM</option>\r\n									<option value="7:00 AM">7:00 AM</option>\r\n									<option value="7:30 AM">7:30 AM</option>\r\n								</select>\r\n								<span>(+08:00 UTC)</span>\r\n								<a href="javascript:;">What is this?</a>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding display-none poll_result_display_type_show_after_date">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<!-- /Result Display -->\r\n					\r\n					<!-- Post Time -->\r\n					<tr class="poll_start_time">\r\n						<td></td>\r\n						<td>\r\n							<div class="checkbox-wrap">\r\n								<input id="poll_is_start" type="checkbox" checked="checked"/>\r\n								<label for="poll_is_start">Post It Now</label>\r\n								<div class="clear"></div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<tr class="display-none poll_start_time_form">\r\n						<td>\r\n							<label for="poll_start_date">Show It From</label>\r\n							<span class="red">*</span>\r\n						</td>\r\n						<td>\r\n							<div class="date-wrap">\r\n                                <input class="poll-input" id="poll_start_date" type="text" value="{{display_start_date}}" placeholder="mm/dd/yy"/>\r\n								<select id="poll_start_time">\r\n                                    <option value="">Please Select One</option>\r\n                                    <option value="8:00 AM">8:00 AM</option>\r\n									<option value="8:30 AM">8:30 AM</option>\r\n									<option value="9:00 AM">9:00 AM</option>\r\n									<option value="9:30 AM">9:30 AM</option>\r\n									<option value="10:00 AM">10:00 AM</option>\r\n									<option value="10:30 AM">10:30 AM</option>\r\n									<option value="11:00 AM">11:00 AM</option>\r\n									<option value="11:30 AM">11:30 AM</option>\r\n									<option value="12:00 PM">12:00 PM</option>\r\n									<option value="12:30 PM">12:30 PM</option>\r\n									<option value="1:00 PM">1:00 PM</option>\r\n									<option value="1:30 PM">1:30 PM</option>\r\n									<option value="2:00 PM">2:00 PM</option>\r\n									<option value="2:30 PM">2:30 PM</option>\r\n									<option value="3:00 PM">3:00 PM</option>\r\n									<option value="3:30 PM">3:30 PM</option>\r\n									<option value="4:00 PM">4:00 PM</option>\r\n									<option value="4:30 PM">4:30 PM</option>\r\n									<option value="5:00 PM">5:00 PM</option>\r\n									<option value="5:30 PM">5:30 PM</option>\r\n									<option value="6:00 PM">6:00 PM</option>\r\n									<option value="6:30 PM">6:30 PM</option>\r\n									<option value="7:00 PM">7:00 PM</option>\r\n									<option value="7:30 PM">7:30 PM</option>\r\n									<option value="8:00 PM">8:00 PM</option>\r\n									<option value="8:30 PM">8:30 PM</option>\r\n									<option value="9:00 PM">9:00 PM</option>\r\n									<option value="9:30 PM">9:30 PM</option>\r\n									<option value="10:00 PM">10:00 PM</option>\r\n									<option value="10:30 PM">10:30 PM</option>\r\n									<option value="11:00 PM">11:00 PM</option>\r\n									<option value="11:30 PM">11:30 PM</option>\r\n									<option value="12:00 AM">12:00 AM</option>\r\n									<option value="12:30 AM">12:30 AM</option>\r\n									<option value="1:00 AM">1:00 AM</option>\r\n									<option value="1:30 AM">1:30 AM</option>\r\n									<option value="2:00 AM">2:00 AM</option>\r\n									<option value="2:30 AM">2:30 AM</option>\r\n									<option value="3:00 AM">3:00 AM</option>\r\n									<option value="3:30 AM">3:30 AM</option>\r\n									<option value="4:00 AM">4:00 AM</option>\r\n									<option value="4:30 AM">4:30 AM</option>\r\n									<option value="5:00 AM">5:00 AM</option>\r\n									<option value="5:30 AM">5:30 AM</option>\r\n									<option value="6:00 AM">6:00 AM</option>\r\n									<option value="6:30 AM">6:30 AM</option>\r\n									<option value="7:00 AM">7:00 AM</option>\r\n									<option value="7:30 AM">7:30 AM</option>\r\n								</select>\r\n								<span>(+08:00 UTC)</span>\r\n								<a href="javascript:;">What is this?</a>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding poll_start_time_form">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<!-- /Post Time -->\r\n					\r\n					<!-- Correct Response -->\r\n					<tr class="poll_response">\r\n						<td></td>\r\n						<td>\r\n							<div class="checkbox-wrap">\r\n								<input id="poll_is_response" type="checkbox"/>\r\n								<label for="poll_is_response">Correct Response</label>\r\n								<div class="clear"></div>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding display-none poll_response poll_response_text">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<tr class="response display-none poll_response_text">\r\n						<td>\r\n							<label for="poll_correct_response_text">Correct Response</label>\r\n							<span class="red">*</span>\r\n						</td>\r\n						<td>\r\n							<textarea id="poll_correct_response_text" _name="correct_response_text" placeholder="Please type in the correct response to this question. It will be shown after the answer is submitted.">{{correct_response_text}}</textarea>\r\n						</td>\r\n					</tr>\r\n					<tr class="padding display-none poll_response_text">\r\n						<td></td>\r\n						<td></td>\r\n					</tr>\r\n					<!-- /Correct Response -->\r\n				<!-- /Dynamic -->\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="attachment">\r\n					<td>\r\n						<label for="">\r\n							Attachment\r\n						</label>\r\n					</td>\r\n					<td id="attachment_wrap">\r\n						\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n                {{^id}}\r\n				<tr>\r\n					<td>\r\n						<label for="">Visible to</label>\r\n					</td>\r\n					<td id="visible_wrap">\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n                {{/id}}\r\n				<tr>\r\n					<td>\r\n					</td>\r\n					<td id="share_wrap">\r\n						\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr>\r\n					<td>\r\n					</td>\r\n					<td>\r\n						<div class="l-float">\r\n							<button class="bt-post-form bt-size-normal bt bt-blue-2" type="submit">\r\n								SUBMIT\r\n							</button>\r\n							<button class="bt-post-form bt-size-normal bt bt-gray" id="{{#htmlText.cancelId}}{{htmlText.cancelId}}{{/htmlText.cancelId}}{{^htmlText.cancelId}}delete_content_form{{/htmlText.cancelId}}" type="button">\r\n								CANCEL\r\n							</button>\r\n							<div class="clear"></div>\r\n						</div>\r\n					</td>\r\n				</tr>\r\n			</tbody>\r\n		</table>\r\n	</div>\r\n</form>\r\n{{/model}}'}),define("views/common/post-tools/main/form/poll",["jquery","underscore","backbone","views/common/post-tools/main/form/_master","views/common/post-tools/attachment/list","views/common/post-tools/visible/main","views/common/post-tools/main/form/poll/multiple-choice-item","modules/content/survey","text!templates/common/post-tools/main/form/poll.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l){return i.extend({template:l,className:"block-content-form block-content-poll-form",initialize_:function(e){this.model=e.model||new s,this.isEdit=!this.model.isNew(),this.type="poll"},events:{"submit form":"save","keypress form":"stopEnter","click #delete_content_form":"deleted","change #poll_type":"changeType","click #poll_choice_add":"addChoice","keypress #poll_choice_input":"enterAddChoice","change #poll_is_start":"showStartTime","change #poll_is_response":"showResponse","change #poll_result_display_type":"changeResultDisplayType","change #poll_is_display_user":"changeDisplayUser","change .poll_type_multiple_choice_checkbox":"changChioceStatus"},beforeRender_:function(){var e=this;this.setViews(t.extend({"#attachment_wrap":new o({model:e.model,settings:{file:{scope:"upload_file_"+e.model.cid},image:{scope:"upload_picture_"+e.model.cid}}})},e.isEdit?{}:{"#share_wrap":e.view.shareVeiw,"#visible_wrap":new a({model:e.param.model,settings:e.visibleSettings})}))},afterRender_:function(){var e=this;if(this.isEdit){var t=e.model.get("survey_type"),n="one_choice"===t?"multiple_choice":t;this.$("#poll_type").find('option[value="'+n+'"]').prop("selected",!0),this.$(':radio[value="'+t+'"]').prop("checked",!0),this.changeType(n),this.$("#poll_result_display_type").find('option[value="'+e.model.get("result_display_type")+'"]').prop("selected",!0),this.$(".poll_result_display_type_show_after_date").hide(),this.$(".poll_result_display_type_"+e.model.get("result_display_type")).show(),this.$("#poll_result_time").find('option[value="'+e.model.get("display_result_time")+'"]').prop("selected",!0),this.model.get("start_time")&&(new Date).getTime()/1e3<this.model.get("start_time")&&(this.$("#poll_is_start").prop("checked",!1),this.$(".poll_start_time_form").show(),this.$("#poll_start_time").find('option[value="'+e.model.get("display_start_time")+'"]').prop("selected",!0)),e.model.get("correct_response_text")&&(e.$("#poll_is_response").click(),this.$(".poll_response_text").show("fast",function(){var t=e.$("#poll_correct_response_text").attr("_name");
e.$("#poll_correct_response_text").attr("name",t),e.$("#poll_correct_response_text").removeAttr("_name")})),e.model.get("is_display_user")||this.$("#poll_is_display_user").prop("checked",!1)}this.datePickerInit([{element:"#poll_start_date",callBack:function(){}},{element:"#poll_result_date",callBack:function(){}}])},selfSave:function(){var t=this,n=t.form.serializeObject();return"undefined"!==e.type(n.choice_type)&&"undefined"!==e.type(n.survey_type)&&n.choice_type!==n.survey_type&&(n.survey_type=n.choice_type),"show_after_date"===e("#poll_result_display_type").val()&&t.getEndTime(t.$("#poll_result_date").val(),t.$("#poll_result_time").val())&&(n.result_date=t.getEndTime(t.$("#poll_result_date").val(),t.$("#poll_result_time").val())),!t.$("#poll_is_start").prop("checked")&&t.getStartTime(t.$("#poll_start_date").val(),t.$("#poll_start_time").val())&&(n.start_time=t.getStartTime(t.$("#poll_start_date").val(),t.$("#poll_start_time").val())),t.model.addUrlParam({return_detail:1,with_content_count:1,with_content_user:1,with_content_original_content:1,with_content_attachments:1,with_content_pictures:1,with_content_links:1,with_content_videos:1,with_content_courses:1,with_content_conexuses:1,with_user_country:1,with_user_profile:1}),t.model.save(n,{wait:!0,resultTrue:function(e,n){t.afterResultTrue(e,n)},resultFalse:t.resultFalse}),!1},changChioceStatus:function(e){var t=this.$(e.currentTarget),n=t.parent().find(".poll_type_multiple_choice_text");t.prop("checked")?(n.attr("name",n.attr("_name")),n.removeAttr("_name")):(n.attr("_name",n.attr("name")),n.removeAttr("name"))},changeDisplayUser:function(e){var t=this.$(e.currentTarget);t.prop("checked")?t.val("show"):t.val("hide")},enterAddChoice:function(e){13===e.keyCode&&this.addChoice()},addChoice:function(){var t=this.$("#poll_choice_input"),n=e.trim(t.val());if(!(n.length>0))return alert("Choices cannot be blank."),!1;var i=new r({data:{value:n}});this.$("#poll_choices").prepend(i.render().view.el),t.val("")},changeResultDisplayType:function(t){this.$(".poll_result_display_type_show_after_date").hide(),this.$(".poll_result_display_type_"+e(t.currentTarget).val()).show()},showResponse:function(t){var n=e("#poll_correct_response_text");this.$(t.currentTarget).prop("checked")?this.$(".poll_response_text").show("fast",function(){n.attr("name",n.attr("_name")).removeAttr("_name")}):this.$(".poll_response_text").hide("fast",function(){n.attr("_name",n.attr("name")).removeAttr("name")})},showStartTime:function(e){this.$(e.currentTarget).prop("checked")?this.$(".poll_start_time_form").hide():this.$(".poll_start_time_form").show()},changeType:function(t){var n="object"===e.type(t)?e(t.currentTarget).val():t;this.$(".poll_type").hide("fast",function(){var t=e(this).find("*[name]");t.attr("_name",t.attr("name")),t.removeAttr("name"),e(this).find(".poll_type_multiple_choice_checkbox").prop("checked",!1)}),this.$(".poll_type_"+n).show("fast",function(){var t=e(this).find("*[_name]");t.attr("name",t.attr("_name")),t.removeAttr("_name"),e(this).find(".poll_type_multiple_choice_checkbox").prop("checked",!0)})},getStartTime:function(t,n){return"undefined"!=e.type(t)&&"undefined"!=e.type(n)?t+" "+n:!1},getEndTime:function(t,n){return"undefined"!=e.type(t)&&"undefined"!=e.type(n)?t+" "+n:!1}})}),define("text!templates/common/post-tools/member-list/item.html",[],function(){return'<a class="load_confirm_window show_card" href="javascript:;" data-type="cn_number" data-id="{{cn_number}}">{{display_name}}</a>\n<input type="hidden" name="entire_course_receivers[]" value="{{id}}" />\n'}),define("views/common/post-tools/member-list/item",["jquery","underscore","backbone","tools/pop-up-window","text!templates/common/post-tools/member-list/item.html"],function(e,t,n,i,o){return n.View.extend({template:o,className:"l-float item-wrap",events:{"click .load_confirm_window":"loadConfirmWindow"},initialize:function(){},serialize:function(){return this.model.get("model")},loadConfirmWindow:function(){var e=this;i.get("function").confirm({title:"Send Email",content:"Remove this member?",button:{string:{yes:"REMOVE",no:"CANCEL"}},yesCallBack:function(){e.remove()}})}})}),define("text!templates/common/post-tools/member-list/main.html",[],function(){return'<div class="member_list">\n    \n    <div class="item-wrap l-float show_all_wrap">\n        <a class="display-none show_all" href="javascript:;">..Show more</a>\n    </div>\n    <div class="clear"></div>\n</div>\n<div class="opera-wrap">\n    <div class="block_get_more_wrap">\n        \n    </div>\n</div>\n'}),define("views/common/post-tools/member-list/main",["jquery","underscore","backbone","views/common/post-tools/member-list/item","views/common/more-operation","collections/user-collections","text!templates/common/post-tools/member-list/main.html"],function(e,t,n,i,o,a,r){var s=a.get("CourseUserCollection"),l=25;return n.View.extend({className:"member-list",template:r,events:{"click .show_all":"showMore"},initialize:function(e){var n=this;t.bindAll(this,"addAll","addOne"),this.param={},this.collection=new s,e&&e.param&&(this.param=e.param,this.collection.addUrlParam({course_id:e.param.model.get("id"),limit:l})),this.collection.on("reset",this.addAll,this),this.collection.on("add",this.addOne,this),this.collection.fetch({resultTrue:function(e){n.$(".block_get_more_wrap").append(new o({collection:e,view:{initMinLimit:l,limit:l,removeTemplateNoMore:!1,noMoreCallback:function(){n.$(".show_all").hide()}}}).render().view.el)}})},afterRender:function(){if(this.param&&this.param.model){var e=this.param.model.get("count");e.all&&e.all>l&&this.$(".show_all").show()}},addAll:function(){this.collection.each(this.addOne)},addOne:function(e){var t=new i({model:e});this.$(".show_all_wrap").before(t.render().view.el)},showMore:function(){this.$(".get_more").click()}})}),define("text!templates/common/autocomplete-box/result-item/email-search-result-cc-item.html",[],function(){return'<input type="hidden" name="receivers[{{receivers_len}}][type]" value="{{type}}"/>\n<input type="hidden" name="receivers[{{receivers_len}}][id]" value="{{id}}" />\n<input type="hidden" name="receivers[{{receivers_len}}][receive_type]" value="cc" />\n{{#email_address}}\n    <b>{{email_address}}</b>\n{{/email_address}}\n{{^email_address}}\n    <b>{{display_name}}{{#cn_number}}({{cn_number}}){{/cn_number}}</b>\n{{/email_address}}\n<a href="javascript:;" class="search_result_remove">X</a>'}),define("views/common/autocomplete-box/result-item/email-search-result-cc-item",["jquery","underscore","backbone","modules/user/email-receiver","text!templates/common/autocomplete-box/result-item/email-search-result-cc-item.html"],function(e,t,n,i,o){return n.View.extend({template:o,tagName:"span",className:"block-email-search-result email_search_result_item",events:{"click .search_result_remove":"deleted"},initialize:function(e){var n=this;n.model=!t.isUndefined(e)&&t.has(e,"model")?e.model:new i},serialize:function(){return this.model.toJSON()},deleted:function(){this.remove()}})}),define("text!templates/common/post-tools/main/form/email.html",[],function(){return'<div class="overfloat">\r\n    <span class="text-hide icon-content-arrow" id="icon_arrow">Arrow</span>\r\n</div>\r\n<form class="wrap" method="post">\r\n	<div class="main">\r\n		<table>\r\n			<tr>\r\n				<td>\r\n					<label>\r\n						To\r\n					</label>\r\n                    <span class="red">*</span>\r\n				</td>\r\n				<td class="receivers_input">\r\n                    \r\n				</td>\r\n			</tr>\r\n            {{#course_id}}\r\n            <tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n            <tr>\r\n				<td>\r\n					<label>\r\n						Entire Course\r\n					</label>\r\n                    <span class="red"></span>\r\n				</td>\r\n				<td>\r\n                    <div class="checkbox-wrap">\r\n                        <input class="entire_course entire_course_show_tip" type="checkbox" data-id="{{id}}"/>\r\n                        <span class="tip display-none _tip">Hint: Click on a name to remove a member.</span>\r\n                    </div>\r\n				</td>\r\n			</tr>\r\n            <tr>\r\n				<td></td>\r\n				<td>\r\n                    <div class="member-list-wrap display-none member_list_wrap">\r\n                        \r\n                    </div>\r\n				</td>\r\n			</tr>\r\n            {{/course_id}}\r\n            <tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n            <tr>\r\n				<td>\r\n					<label>\r\n						CC\r\n					</label>\r\n                    <span class="red"></span>\r\n				</td>\r\n				<td class="receivers_cc_input">\r\n                    \r\n				</td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr>\r\n				<td>\r\n					<label for="posting_email_subject">\r\n						Subject\r\n					</label>\r\n                    <span class="red">*</span>\r\n				</td>\r\n				<td>\r\n					<input id="posting_email_subject" name="subject" type="text" required="required" />\r\n				</td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr class="content">\r\n				<td>\r\n					<label for="posting_email_content">\r\n						Content\r\n					</label>\r\n                    <span class="red">*</span>\r\n				</td>\r\n				<td>\r\n					<textarea id="posting_email_content" name="content" required="required"></textarea>\r\n				</td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr class="attachment">\r\n				<td>\r\n					<label for="">\r\n						Attachment\r\n					</label>\r\n				</td>\r\n				<td id="attachment_wrap">\r\n					\r\n				</td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr class="padding">\r\n				<td></td>\r\n				<td></td>\r\n			</tr>\r\n			<tr>\r\n				<td>\r\n				</td>\r\n				<td>\r\n					<div class="l-float">\r\n						<button class="bt-post-form bt-size-normal bt bt-blue-2" type="submit">\r\n							SEND\r\n						</button>\r\n						<button class="bt-post-form bt-size-normal bt bt-gray" id="delete_content_form" type="button">\r\n							CANCEL\r\n						</button>\r\n						<div class="clear"></div>\r\n					</div>	\r\n				</td>\r\n			</tr>\r\n		</table>\r\n	</div>\r\n</form>\r\n'}),define("views/common/post-tools/main/form/email",["jquery","underscore","backbone","tools/pop-up-window","views/common/post-tools/main/form/_master","views/common/post-tools/attachment/list","views/common/post-tools/member-list/main","views/common/autocomplete-box/autocomplete","views/common/autocomplete-box/result-item/email-search-result-cc-item","modules/email","text!templates/common/post-tools/main/form/email.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c,d){return o.extend({template:d,className:"block-content-form block-content-email-form",events:{"submit form":"save","keypress form":"stopEnter","click #delete_content_form":"deleted","click .entire_course":"LoadMemberList","click .entire_course_show_tip":"ShowEntireCourseTip"},initialize_:function(e){this.model=e.model||new c,this.type="email",this.param={},e&&e.param&&e.param.model&&(this.param=e.param)},serialize:function(){return this.param.model.toJSON()},beforeRender_:function(){this.setViews({"#attachment_wrap":new a,".receivers_input":new(s()),".receivers_cc_input":new(s())({resultItem:{view:l}}),".member_list_wrap":new r({param:this.param})})},selfSave:function(){var e=this;if(0==this.$(".receivers_input .email_search_result_item").length&&!this.$(".entire_course").is(":checked"))return this.resultFalse({recipient:"Please enter a valid recipient."}),!1;var t=e.form.serializeObject(),n=[];if(t.receivers)for(var o in t.receivers)t.receivers[o].type&&t.receivers[o].id&&n.push(t.receivers[o]);if(this.$(".entire_course").is(":checked")&&t.entire_course_receivers)for(var a in t.entire_course_receivers)n.push({id:t.entire_course_receivers[a],type:"user"});return t.receivers=n,this.model.save(t,{wait:!0,resultTrue:function(){i.get("function").alert("Your email has been sent."),e.deleted()},resultFalse:e.resultFalse}),!1},LoadMemberList:function(t){var n=e(t.currentTarget);n.is(":checked")?this.$(".member_list_wrap").slideDown():this.$(".member_list_wrap").slideUp()},ShowEntireCourseTip:function(t){var n=e(t.currentTarget);n.is(":checked")?this.$("._tip").fadeIn():this.$("._tip").fadeOut()}})}),define("views/common/post-tools/main/form/classcast",["jquery","underscore","backbone","views/common/post-tools/main/form/_master","modules/content/classcast","tools/date-tools","text!templates/common/post-tools/main/form/unavailable.html","jquerySerializeObject"],function(e,t,n,i,o,a,r){return i.extend({template:r,className:"block-content-form block-content-classcast-form",initialize_:function(){this.type="classcast",this.start={},this.end={},this.data={early_access:!0,chat:!0,privacy:{privacy:!1,code:""}}},beforeRender:function(){},events:{"click #delete_content_form":"deleted","submit form":"save","keypress form":"stopEnter","click #classcast_privacy_privacy":"displayPrivacyCode","blur #classcast_privacy_code":"checkPrivacyCode","click #classcast_disable_chat":"setChat","click #classcast_disable_early_access":"setEarlyAccess"},getStartTime:function(t,n){if("undefined"!=e.type(this.start.date)){var i=this.start.date+" "+t+" "+n;return a.str2Time(i)}return alert("Please input you start date."),!1},getEndTime:function(t,n){if("undefined"!=e.type(this.end.date)){var i=this.end.date+" "+t+" "+n;return a.str2Time(i)}return alert("Please input you end date."),!1},setStartTime:function(e){this.data.start_time=e},setEndTime:function(e){this.data.end_time=e},save:function(){var t=this;this.model=new o;var n=this.getStartTime(this.$("#classcast_start_minute").val(),this.$('[name="classcast_start_hour"]:checked').val()),i=this.getEndTime(this.$("#classcast_end_minute").val(),this.$('[name="classcast_end_hour"]:checked').val());if(!n||!i)return alert("Start Date must be above End Date"),!1;var a=t.$("form").serializeObject();return t.setStartTime(n),t.setEndTime(i),t.data=e.extend(!0,t.data,a),t.model.save(t.data,{wait:!0,resultTrue:function(e){t.param.collection.unshift(e,{silent:!0}),t.param.collection.trigger("unshift",e),t.deleted()}}),!1},afterRender_:function(){var e=this;this.datePickerInit([{element:"#classcast_start_date",callBack:function(t){e.start.date=t}},{element:"#classcast_end_date",callBack:function(t){e.end.date=t}}])},displayPrivacyCode:function(e){e.currentTarget.checked?(this.data.privacy.privacy=!0,this.$("#classcast_privacy_code").attr("required","required"),this.$("#classcast_privacy_code_wrap").show()):(this.data.privacy.privacy=!1,this.$("#classcast_privacy_code").removeAttr("required"),this.$("#classcast_privacy_code_wrap").hide())},checkPrivacyCode:function(t){var n=e.trim(t.currentTarget.value);0==n.length?alert("Please input your privacy code"):this.data.privacy.code=n},setChat:function(e){this.data.chat=!e.currentTarget.checked},setEarlyAccess:function(e){this.data.early_access=!e.currentTarget.checked}})}),define("views/common/post-tools/main/form/quiz",["jquery","underscore","backbone","views/common/post-tools/main/form/_master","text!templates/common/post-tools/main/form/unavailable.html"],function(e,t,n,i,o){return i.extend({template:o,className:"block-content-form block-content-quiz-form",events:{"click #delete_content_form":"deleted","submit form":"save","keypress form":"stopEnter"},initialize_:function(){this.type="quiz"}})}),define("text!templates/common/post-tools/main/form/event.html",[],function(){return'{{#show_arrow}}\r\n    <div class="overfloat">\r\n        <span class="text-hide icon-content-arrow" id="icon_arrow">Arrow</span>\r\n    </div>\r\n{{/show_arrow}}\r\n{{#model}}\r\n<form class="wrap" method="post">\r\n	<div class="main">\r\n		<table>\r\n			<thead>\r\n				<tr>\r\n					<th colspan="2">\r\n						<p>All fields with <span class="red">*</span> are required.</p>\r\n					</th>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n			</thead>\r\n			<tbody>\r\n				<tr>\r\n					<td>\r\n						<label for="event_title">Title</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n                        <input id="event_title" type="text" name="title" value="{{title}}" required="required" placeholder="Max 45 Characters"/>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n                <tr>\r\n					<td>\r\n						<label for="event_where">Where</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n                        <input id="event_where" type="text" name="where" value="{{where}}" required="required" placeholder="Max 45 Characters"/>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="description">\r\n					<td>\r\n						<label for="event_text">Description</label>\r\n					</td>\r\n					<td>\r\n                        <textarea id="event_text" name="text" placeholder="Max 1500 Characters">{{text}}</textarea>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr>\r\n					<td>\r\n						<label for="event_start_date">Start Date</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n						<div class="date">\r\n                            <input id="event_start_date" type="text" name="event_start_date" value="{{display_start_date}}" placeholder="mm/dd/yy" required="required"/>\r\n							<label for="event_start_minute">Time <span class="red">*</span></label>\r\n                            <select name="event_start_minute" id="event_start_minute" required="required">\r\n                                <option value="">Please Select One</option>\r\n								<option value="12:00">12:00</option>\r\n                                <option value="12:30">12:30</option>\r\n                                <option value="1:00">01:00</option>\r\n                                <option value="1:30">01:30</option>\r\n                                <option value="2:00">02:00</option>\r\n                                <option value="2:30">02:30</option>\r\n                                <option value="3:00">03:00</option>\r\n                                <option value="3:30">03:30</option>\r\n                                <option value="4:00">04:00</option>\r\n                                <option value="4:30">04:30</option>\r\n                                <option value="5:00">05:00</option>\r\n                                <option value="5:30">05:30</option>\r\n                                <option value="6:00">06:00</option>\r\n                                <option value="6:30">06:30</option>\r\n                                <option value="7:00">07:00</option>\r\n                                <option value="7:30">07:30</option>\r\n                                <option value="8:00">08:00</option>\r\n                                <option value="8:30">08:30</option>\r\n                                <option value="9:00">09:00</option>\r\n                                <option value="9:30">09:30</option>\r\n                                <option value="10:00">10:00</option>\r\n                                <option value="10:30">10:30</option>\r\n                                <option value="11:00">11:00</option>\r\n                                <option value="11:30">11:30</option>\r\n							</select>\r\n							<label for="event_start_hour_am">AM</label>\r\n                            <input id="event_start_hour_am" type="radio" value="AM" name="event_start_hour" checked="checked" />\r\n							<label for="event_start_hour_pm">PM</label>\r\n							<input id="event_start_hour_pm" type="radio" value="PM" name="event_start_hour" />\r\n						</div>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr>\r\n					<td>\r\n						<label for="event_end_date">End Date</label>\r\n						<span class="red">*</span>\r\n					</td>\r\n					<td>\r\n						<div class="date">\r\n                            <input id="event_end_date" type="text" name="event_end_date" value="{{display_end_date}}" placeholder="mm/dd/yy" required="required"/>\r\n							<label for="event_end_minute">Time <span class="red">*</span></label>\r\n                            <select name="event_end_minute" id="event_end_minute" required="required">\r\n                                <option value="">Please Select One</option>\r\n                                <option value="12:00">12:00</option>\r\n                                <option value="12:30">12:30</option>\r\n                                <option value="1:00">01:00</option>\r\n                                <option value="1:30">01:30</option>\r\n                                <option value="2:00">02:00</option>\r\n                                <option value="2:30">02:30</option>\r\n                                <option value="3:00">03:00</option>\r\n                                <option value="3:30">03:30</option>\r\n                                <option value="4:00">04:00</option>\r\n                                <option value="4:30">04:30</option>\r\n                                <option value="5:00">05:00</option>\r\n                                <option value="5:30">05:30</option>\r\n                                <option value="6:00">06:00</option>\r\n                                <option value="6:30">06:30</option>\r\n                                <option value="7:00">07:00</option>\r\n                                <option value="7:30">07:30</option>\r\n                                <option value="8:00">08:00</option>\r\n                                <option value="8:30">08:30</option>\r\n                                <option value="9:00">09:00</option>\r\n                                <option value="9:30">09:30</option>\r\n                                <option value="10:00">10:00</option>\r\n                                <option value="10:30">10:30</option>\r\n                                <option value="11:00">11:00</option>\r\n                                <option value="11:30">11:30</option>\r\n							</select>\r\n							<label for="event_end_hour_am">AM</label>\r\n							<input id="event_end_hour_am" type="radio" name="event_end_hour" value="AM" checked="checked" />\r\n							<label for="event_end_hour_pm">PM</label>\r\n							<input id="event_end_hour_pm" type="radio" name="event_end_hour" value="PM" />\r\n						</div>\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="attachment">\r\n					<td>\r\n						<label for="">\r\n							Attachment\r\n						</label>\r\n					</td>\r\n					<td id="attachment_wrap">\r\n						\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n                {{^id}}\r\n				<tr>\r\n					<td>\r\n						<label for="">Visible to</label>\r\n					</td>\r\n					<td id="visible_wrap">\r\n						\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n                {{/id}}\r\n				<tr>\r\n					<td>\r\n					</td>\r\n					<td id="share_wrap">\r\n						\r\n					</td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr class="padding">\r\n					<td></td>\r\n					<td></td>\r\n				</tr>\r\n				<tr>\r\n					<td>\r\n					</td>\r\n					<td>\r\n						<div class="l-float">\r\n							<button class="bt-post-form bt-size-normal bt bt-blue-2" type="submit">\r\n								SUBMIT\r\n							</button>\r\n                            <button class="bt-post-form bt-size-normal bt bt-gray" type="button" id="{{#htmlText.cancelId}}{{htmlText.cancelId}}{{/htmlText.cancelId}}{{^htmlText.cancelId}}delete_content_form{{/htmlText.cancelId}}">\r\n								CANCEL\r\n							</button>\r\n							<div class="clear"></div>\r\n						</div>\r\n					</td>\r\n				</tr>\r\n			</tbody>\r\n		</table>\r\n	</div>\r\n</form>\r\n{{/model}}'}),define("views/common/post-tools/main/form/event",["jquery","underscore","backbone","views/common/post-tools/main/form/_master","views/common/post-tools/attachment/list","views/common/post-tools/visible/main","modules/content/event","tools/date-tools","text!templates/common/post-tools/main/form/event.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l){return i.extend({template:l,className:"block-content-form block-content-event-form",initialize_:function(e){this.model=e.model||new r,this.isEdit=!this.model.isNew(),this.data={},this.type="event"},events:{"submit form":"save","keypress form":"stopEnter","click #delete_content_form":"deleted"},beforeRender_:function(){var e=this;this.setViews(t.extend({"#attachment_wrap":new o({model:e.model,settings:{file:{scope:"upload_file_"+e.model.cid},image:{scope:"upload_picture_"+e.model.cid}}})},e.isEdit?{}:{"#share_wrap":e.view.shareVeiw,"#visible_wrap":new a({model:e.param.model,settings:e.visibleSettings})}))},afterRender_:function(){var e=this;this.isEdit&&(this.$("#event_start_minute").find('option[value="'+e.model.get("display_start_hour")+'"]').prop("selected",!0),this.$('[name="event_start_hour"][value="'+e.model.get("display_start_sign")+'"]').prop("checked",!0),this.$("#event_end_minute").find('option[value="'+e.model.get("display_end_hour")+'"]').prop("selected",!0),this.$('[name="event_end_hour"][value="'+e.model.get("display_end_sign")+'"]').prop("checked",!0)),this.datePickerInit([{element:"#event_start_date"},{element:"#event_end_date"}])},selfSave:function(){var t=this;if(this.isEdit&&this.model.unset("auth_assignment_group_ids"),!e.trim(e("#event_start_minute").val())||!e.trim(e("#event_end_minute").val()))return t.resultFalse(["The Start Time or the End Time can not be blank."]),!1;var n=this.getStartTime(this.$("#event_start_date").val(),this.$("#event_start_minute").val(),this.$('[name="event_start_hour"]:checked').val()),i=this.getEndTime(this.$("#event_end_date").val(),this.$("#event_end_minute").val(),this.$('[name="event_end_hour"]:checked').val());if(!(n&&i&&i>n))return t.resultFalse(["The Start Date must be earlier than the End Date."]),!1;var o=t.form.serializeObject();return t.setStartTime(this.$("#event_start_date").val(),this.$("#event_start_minute").val(),this.$('[name="event_start_hour"]:checked').val()),t.setEndTime(this.$("#event_end_date").val(),this.$("#event_end_minute").val(),this.$('[name="event_end_hour"]:checked').val()),t.data=e.extend(!0,{},t.data,o),t.model.addUrlParam({return_detail:1,with_content_count:1,with_content_user:1,with_content_original_content:1,with_content_attachments:1,with_content_pictures:1,with_content_links:1,with_content_videos:1,with_content_courses:1,with_content_conexuses:1,with_user_country:1,with_user_profile:1}),t.model.save(t.data,{wait:!0,resultTrue:function(e,n){t.afterResultTrue(e,n)},resultFalse:t.resultFalse}),!1},getStartTime:function(t,n,i){if("undefined"!=e.type(t)){var o=t+" "+n+" "+i;return s.str2Time(o)}return alert("Please input you start date."),!1},getEndTime:function(t,n,i){if("undefined"!=e.type(t)){var o=t+" "+n+" "+i;return s.str2Time(o)}return alert("Please input you end date."),!1},setStartTime:function(e,t,n){this.data.start_time=e+" "+t+" "+n},setEndTime:function(e,t,n){this.data.end_time=e+" "+t+" "+n}})}),define("views/common/post-tools/main/index/user",["jquery","underscore","views/common/post-tools/main/index/_master","views/common/post-tools/main/form/unavailable","views/common/post-tools/main/form/post","views/common/post-tools/main/form/poll","views/common/post-tools/main/form/email","views/common/post-tools/main/form/classcast","views/common/post-tools/main/form/quiz","views/common/post-tools/main/form/event"],function(e,t,n,i,o,a,r,s,l,c){var d=["post","poll","email","classcast","quiz","event"],u={post:o,poll:a,email:r,classcast:s,quiz:l,event:c};return n.extend({showForm:function(e,t,n){this.loadForm(this.getFormViewPathByType(e),t,n)},getFormViewPathByType:function(t){var n=i;return e.inArray(t,d)>-1&&(n=u[t]),n}})}),define("views/common/post-tools/index/user",["jquery","underscore","views/common/post-tools/index/_master","views/common/post-tools/nav/user","views/common/post-tools/main/index/user"],function(e,t,n,i,o){return n.extend({initialize_:function(){this.view={main:new o(this.viewParam.main),nav:new i(this.viewParam.nav)}}})}),define("views/content/nav/_master",["jquery","underscore","backbone","views/common/home-head/master-menu/main","collections/conexus/user-collection","collections/course/user-collection","modules/me","tools/auto-close-element-window","views/common/error-tip","text!templates/loading/head-horizontal.html"],function(e,t,n,i,o,a,r,s,l,c){return n.View.extend({className:"block-post-nav",initialize:function(e){t.bindAll(this,"initialize_","showPosts","hideAllFloatBox","hideFloatBox","beforeRender_"),this.data={},this.initialize_(e)},initialize_:function(){},beforeRender:function(){this.data.me=new r,this.beforeRender_()},beforeRender_:function(){},resetNavStyle:function(t){this.$(".reset_nav_style").removeClass("font-bold black"),e(t.currentTarget).addClass("font-bold black")},order:function(t){var n=e(t.currentTarget);n.closest("._box").find(".show_float_box").html(n.html()),this.hideFloatBox(t),this.collection.setUrlParamOrder(n.attr("data-order")),this.showPosts()},showFloatBox:function(n){this.hideAllFloatBox();var r=e(n.currentTarget).attr("data-type");if(!t.isUndefined(r)){var l=this.data.me.get("count");switch(r){case"courses":if(l.course){var c=new a;c.addUrlParam({limit:100});var d=new i({collection:c,type:"courses"});this.$("#block_content_nav_course_list").html(d.render().view.el)}break;case"conexus":if(l.conexus){var u=new o;u.addUrlParam({limit:100});var d=new i({collection:u,type:"conexus"});this.$("#block_content_nav_conexus_list").html(d.render().view.el)}}}var m=e(n.currentTarget).closest("._box").find("._body");m.show(),s(n,m,function(){m.hide()})},hideAllFloatBox:function(){this.$("._body").hide()},hideFloatBox:function(t){e(t.currentTarget).closest("._box").find("._body").hide()},showPosts:function(){var e=this;e.collection.view.$("#block_post_list_main").html(c),e.collection.fetch({resultFalse:function(){e.collection.view.$("#block_post_list_main").html(new l({data:{text:"No Posts"}}).render().view.el)}})}})}),define("text!templates/content/nav/home.html",[],function(){return'<div class="sidebar wrap l-float">\r\n	<div class="box left _box">\r\n		<div class="title">\r\n			<a class="show_float_box always_allow" href="javascript:;">Current</a>\r\n			<b>Posts</b>\r\n            <div class="clear"></div>\r\n		</div>\r\n		<div class="body display-none _body">\r\n			<div class="block block-float-down-box block-float-down-left-box">\r\n                <span class="text-hide arrow icon-float-tip-arrow-2">Arrow</span>\r\n                <a class="text-hide bt-close-17 hide_float_box always_allow" href="javascript:;" title="close">Close</a>\r\n				<div class="main">\r\n					<div class="center">\r\n						<ul class="list-one">\r\n							<li>\r\n								<a class="order always_allow" href="javascript:;" data-order="most_good">Most Liked</a>\r\n							</li>\r\n							<li>\r\n								<a class="order always_allow" href="javascript:;" data-order="most_comment">Most Reflected</a>\r\n							</li>\r\n                            <li>\r\n								<a class="order always_allow" href="javascript:;" data-order="most_new">Current</a>\r\n							</li>\r\n						</ul>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div class="content wrap l-float">\r\n	<div class="box">\r\n		<div class="title">\r\n			<a class="black font-bold reset_nav_style show_all_posts always_allow" href="javascript:;">All</a>\r\n			<em>/</em>\r\n		</div>\r\n	</div>\r\n	<div class="box center _box">\r\n		<div class="title">\r\n			<a class="show_float_box reset_nav_style always_allow" href="javascript:;" data-type="courses">My Courses</a>\r\n			<em>/</em>\r\n		</div>\r\n		<div class="body display-none _body">\r\n			<div class="block block-float-down-box block-float-down-left-box">\r\n                <span class="text-hide arrow icon-float-tip-arrow-2">Arrow</span>\r\n                <a class="text-hide bt-close-17 hide_float_box always_allow" href="javascript:;" title="close">Close</a>\r\n				<div class="main">\r\n					<div class="center">\r\n						<ul class="list-one">\r\n							{{#count.course}}\r\n							<li>\r\n								<a class="show_all_course_posts always_allow" href="javascript:;">\r\n									All Course Posts\r\n								</a>\r\n							</li>\r\n							{{/count.course}}\r\n							{{^count.course}}\r\n							<li>\r\n								<b>No Courses</b>\r\n							</li>\r\n							<li>\r\n								<a href="search/course">\r\n                                    Search for Course\r\n                                </a>\r\n							</li>\r\n							{{/count.course}}\r\n						</ul>\r\n                        {{#count.course}}\r\n                        <div class="list-wrap">\r\n                            <div class="main" id="block_content_nav_course_list">\r\n                                <div class="block-loading block-horizontal-loading">\r\n                                    <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="foot small-more-wrap" id="block_content_nav_course_more">\r\n                            \r\n                            </div>\r\n                        </div>\r\n                        {{/count.course}}\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="box center _box">\r\n		<div class="title">\r\n			<a class="show_float_box reset_nav_style always_allow" href="javascript:;" data-type="conexus">\r\n                My Conexus\r\n            </a>\r\n			<em>/</em>\r\n		</div>\r\n		<div class="body display-none _body">\r\n			<div class="block block-float-down-box block-float-down-left-box">\r\n                <span class="text-hide arrow icon-float-tip-arrow-2">Arrow</span>\r\n                <a class="text-hide bt-close-17 hide_float_box always_allow" href="javascript:;" title="close">Close</a>\r\n				<div class="main">\r\n					<div class="center">\r\n						<ul class="list-one">\r\n							{{#count.conexus}}\r\n							<li>\r\n								<a class="show_all_conexus_posts always_allow" href="javascript:;">\r\n									All Conexus Posts\r\n								</a>\r\n							</li>\r\n							{{/count.conexus}}\r\n							{{^count.conexus}}\r\n							<li>\r\n								<b>No Conexus</b>\r\n							</li>\r\n							<li>\r\n								<a href="search/conexus">\r\n                                    Search for Conexus\r\n                                </a>\r\n							</li>\r\n							{{/count.conexus}}\r\n						</ul>\r\n                        {{#count.conexus}}\r\n                        <div class="list-wrap">\r\n                            <div class="main" id="block_content_nav_conexus_list">\r\n                                <div class="block-loading block-horizontal-loading">\r\n                                    <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="foot small-more-wrap" id="block_content_nav_conexus_more">\r\n                            \r\n                            </div>\r\n                        </div>\r\n                        {{/count.conexus}}\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="box">\r\n		<div class="title">\r\n			<a class="reset_nav_style show_following_posts always_allow" href="javascript:;">\r\n                Following\r\n            </a>\r\n			<em>/</em>\r\n		</div>\r\n	</div>\r\n	<div class="box">\r\n		<div class="title">\r\n			<a class="reset_nav_style show_colleagues_posts always_allow" href="javascript:;">\r\n                Colleagues\r\n            </a>\r\n			<em>/</em>\r\n		</div>\r\n	</div>\r\n	<div class="box right _box">\r\n		<div class="title">\r\n			<a class="show_float_box reset_nav_style always_allow" href="javascript:;">\r\n                Personal Networks\r\n            </a>\r\n		</div>\r\n		<div class="body display-none _body">\r\n			<div class="block block-float-down-box block-float-down-right-box">\r\n                <span class="text-hide arrow icon-float-tip-arrow-2">Arrow</span>\r\n                <a class="text-hide bt-close-17 hide_float_box always_allow" href="javascript:;" title="close">Close</a>\r\n				<div class="main">\r\n					<div class="center">\r\n                        <ul class="list-one">\r\n							{{#count_groups}}\r\n							<li>\r\n								<a class="show_all_group_posts always_allow" href="javascript:;">\r\n									All Personal Network Posts\r\n								</a>\r\n							</li>\r\n							{{/count_groups}}\r\n							{{^count_groups}}\r\n							<li>\r\n								<b>No Personal Networks</b>\r\n							</li>\r\n							<li>\r\n								<a class="create_personal_list" href="javascript:;">\r\n                                    Create Personal Network\r\n                                </a>\r\n							</li>\r\n							{{/count_groups}}\r\n						</ul>\r\n                        <div class="list-wrap">\r\n                            <ol class="list-two">\r\n                                {{#auth_groups}}\r\n                                <li>\r\n                                    <a class="text show_group_posts" href="javascript:;" title="{{name}}" data-id="{{id}}">\r\n                                        {{name}}\r\n                                    </a>\r\n                                </li>\r\n                                {{/auth_groups}}\r\n                            </ol>\r\n                        </div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>\r\n<div class="clear"></div>\r\n'
}),define("views/content/nav/home",["jquery","underscore","backbone","views/content/nav/_master","collections/content/content-list-collections","text!templates/content/nav/home.html"],function(e,t,n,i,o,a){return i.extend({className:"block-post-nav",template:a,initialize_:function(){t.bindAll(this,"hideAllFloatBox","showPostsFromAuthGropIds")},serialize:function(){return this.model.toJSON()},events:{"click .order":"order","click .reset_nav_style":"resetNavStyle","click .show_float_box":"showFloatBox","click .hide_float_box":"hideFloatBox","click .show_all_posts":"showPostsFromAll","click .show_following_posts":"showPostsFromFollowing","click .show_colleagues_posts":"showPostsFromColleagues","click .show_all_course_posts":"showPostsFromAllCourse","click .show_all_conexus_posts":"showPostsFromAllConexus","click .show_all_group_posts":"showPostsFromAllAuthGrop","click .show_group_posts":"showPostsFromAuthGrop"},showPostsFromAll:function(){this.hideAllFloatBox();var e=this;e.collection.setUrlSettings(new(o.get("Content"))),e.showPosts()},showPostsFromFollowing:function(){this.hideAllFloatBox();var e=this;e.collection.setUrlSettings(new(o.get("Following"))),e.showPosts()},showPostsFromColleagues:function(){this.hideAllFloatBox();var e=this;e.collection.setUrlSettings(new(o.get("Colleague"))),e.showPosts()},showPostsFromAllCourse:function(){this.hideAllFloatBox();var e=this;e.collection.setUrlSettings(new(o.get("AllCourse"))),e.showPosts()},showPostsFromAllConexus:function(){this.hideAllFloatBox();var e=this;e.collection.setUrlSettings(new(o.get("AllConexus"))),e.showPosts()},showPostsFromAllAuthGrop:function(){this.showPostsFromAuthGropIds(this.model.get("auth_group_ids"))},showPostsFromAuthGrop:function(t){this.showPostsFromAuthGropIds([e(t.currentTarget).attr("data-id")])},showPostsFromAuthGropIds:function(e){this.hideAllFloatBox();var t=this;t.collection.setUrlSettings(new(o.get("AuthGroup"))),t.collection.addUrlParam({auth_group_ids:e}),t.showPosts()}})}),define("views/content/relation/comments",["jquery","underscore","backbone","views/content/relation/comment"],function(e,t,n,i){return n.View.extend({tagName:"ul",initialize:function(e){this.data=e.data,t.bindAll(this,"appOne","getCommentView","getCommentViewElement","preOne","addAll","reset"),this.collection.on("reset",this.addAll,this),this.collection.on("add",this.reset,this),this.collection.on("remove",this.reset,this),this.collection.on("change:count_best",this.reset,this)},reset:function(){this.$el.empty(),this.addAll()},addAll:function(){this.$el.empty(),this.collection.each(this.appOne)},appOne:function(e){this.$el.append(this.getCommentViewElement(e))},preOne:function(e){this.$el.prepend(this.getCommentViewElement(e))},getCommentViewElement:function(e){return this.getCommentView(e).render().view.el},getCommentView:function(e){return new i({model:e,pass:{comments:this.collection,content:this.data.content,hasOneSetBest:this.collection.some(function(e){return e.get("has_set_best")})}})}})}),define("collections/content/goods",["jquery","underscore","backbone","modules/content/good"],function(e,t,n,i){return n.Collection.extend({model:i,urlRoot:"/api/content_good/"})}),define("text!templates/common/float-box/float-box-top.html",[],function(){return'<span class="text-hide arrow icon-float-tip-arrow-2">Arrow</span>\n<a class="text-hide bt-close-17 hide_float_box always_allow" href="javascript:;" title="close">Close</a>\n<div class="main">\n    <div class="center">\n\n    </div>\n</div>'}),define("views/common/float-box/float-box-top",["jquery","underscore","backbone","views/common/float-box/_master","text!templates/common/float-box/float-box-top.html"],function(e,t,n,i,o){return i.extend({className:"block block-float-down-box float-box",template:o})}),define("text!templates/text/reflect-best-help-tip.html",[],function(){return'<div class="block-task-form-help" style="width:400px;">\n    <p>When there have been three or more reflections made on a CN post, you and other members reading the reflections can designate one of them as the best among them all. Once a reflection receives a "Best" rating, the author of the reflection will receive 3 Anar seeds. (The course instructor may change the number of seeds earned in the Anar seed table located in the Settings area of the course, in Course Anar Seed Settings.") The CN Best system provides community recognition and Anar seeds as motivating incentives for writing the best, quality reflections.</p>\n</div>\n'}),define("text!templates/content/relation/content-count.html",[],function(){return'<div class="l-float">\r\n    <span>\r\n        {{#has_set_good}}\r\n            <a class="unlike" href="javascript:;">Unlike</a>\r\n        {{/has_set_good}}\r\n        {{^has_set_good}}\r\n            <a class="like" href="javascript:;">Like</a>\r\n        {{/has_set_good}}\r\n        ({{#count_good}}<a class="load_content_like_users_window" href="javascript:;">{{count_good}}</a>{{/count_good}}{{^count_good}}<b>{{count_good}}</b>{{/count_good}}),\r\n    </span>\r\n    <span>\r\n        <a class="focus_reflect font-bold" href="javascript:;">Reflect</a>\r\n        (<b class="count_comment {{#count_comment}}font-bold{{/count_comment}}">{{count_comment}}{{#more_comments}}, <a class="load_more_comments_window" href="javascript:;">Show all {{count_comment}}</a>{{/more_comments}}</b>)\r\n    </span>\r\n</div>\r\n{{#more_comments}}\r\n<div class="r-float">\r\n    <span><a class="best_help best-help" href="javascript:;" title="Help">What is Best?</a></span>\r\n    <a class="old_to_new font-bold icon-order-up text-hide" style="display: none;" href="javascript:;" data-order="most_old">Old to New</a>\r\n    <a class="new_to_old font-bold icon-order-down text-hide" href="javascript:;" data-order="most_new">New to Old</a>\r\n</div>\r\n{{/more_comments}}\r\n<div class="clear"></div>'}),define("views/content/relation/content-count",["jquery","underscore","backbone","tools/pop-up-window","tools/view/content-tools","collections/content/goods","views/common/more-operation","views/common/error-tip","views/common/float-box/float-box-top","modules/content/good","text!templates/text/reflect-best-help-tip.html","text!templates/content/relation/content-count.html"],function(e,t,n,i,o,a,r,s,l,c,d,u){return i.get("function"),n.View.extend({className:"title",template:u,serialize:function(){return{count_comment:this.model.get("count_comment"),count_good:this.model.get("count_good"),has_set_good:this.model.get("has_set_good"),more_comments:this.model.get("more_comments")}},initialize:function(e){t.bindAll(this,"resetComment"),this.parent=e&&e.parent?e.parent:{},this.model.on("change:count_comment",this.resetComment,this),this.model.on("change:count_good",this.render,this),this.collection.addUrlParam({content_id:this.model.get("id"),with_user_country:1})},resetComment:function(){this.$(".count_comment").html(this.model.get("count_comment"))},events:{"click .like":"setLike","click .unlike":"unLike","click .load_more_comments_window":"showAllReflect","click .load_content_like_users_window":"loadLikeUsersWindow","click .focus_reflect":"focusReflect","click .new_to_old":"orderNewToOld","click .old_to_new":"orderOldToNew","click .best_help":"showBestHelp"},showBestHelp:function(e){new l({view:d,target:e.currentTarget,arrow:{offset:330}}).show(e)},orderNewToOld:function(t){var n=e(t.currentTarget),i=n.attr("data-order");this.collection.addUrlParam({content_comment_list_order:i}),this.orderFetch(t),n.hide(),this.$(".old_to_new").show()},orderOldToNew:function(t){var n=e(t.currentTarget),i=n.attr("data-order");this.collection.addUrlParam({content_comment_list_order:i}),this.orderFetch(t),n.hide(),this.$(".new_to_old").show()},showAllReflect:function(e){this.orderFetch(e)},orderFetch:function(n){var i=this;return e(n.currentTarget).attr("locked")?!1:(e(n.currentTarget).attr("locked","locked"),i.parent.$(".footer").length||i.parent.$(".block_post_comment_list").append(e('<div class="footer"></div>')),i.collection.fetch({resultTrue:function(e){var t=i.parent.$(".block_post_comment_list");t.scrollTop(0),i.parent.$(".footer").html(new r({collection:e,view:{initMinLimit:10,limit:5,scrollTarget:".block_post_comment_list ul",scrollTargetWrap:".block_post_comment_list"}}).render().view.el)},resultFalse:function(e){var n="";t.each(e,function(e){n+=e+"</ br>"}),i.parent.$(".footer").html(new s({data:{text:n}}).render().view.el)},completeCallback:function(){e(n.currentTarget).removeAttr("locked")}}),void 0)},focusReflect:function(){var t=this,n=function(){var n=t.parent.$(".input_reflect");e("body").animate({scrollTop:n.offset().top-e(window).height()/2},1e3),n.focus()},i=this.parent.$(".block_post_reflection");i.is(":hidden")?i.fadeIn(function(){n()}):n()},setLike:function(t){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this;n.good=new c,n.good.save({content_id:n.model.get("id")},{resultTrue:function(){n.model.set("has_set_good",1),n.model.set("count_good",n.model.get("count_good")+1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})},unLike:function(t){if(this.model.get("has_set_good")){if(e(t.currentTarget).attr("locked"))return!1;e(t.currentTarget).attr("locked","locked");var n=this;n.good=new c({id:n.model.get("id")}),n.good.destroy({resultTrue:function(){n.model.set("has_set_good",0),n.model.set("count_good",n.model.get("count_good")-1)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}})}},loadLikeUsersWindow:function(){var e=new a;e.addUrlParam({content_id:this.model.get("id")}),o.loadLikeUsersWindow(e)}})}),define("text!templates/common/pop-up-window/content-forms/form.html",[],function(){return'<div class="head">\r\n    <h4>\r\n        {{title}}\r\n    </h4>\r\n</div>\r\n<div class="main">\r\n	<div id="block_pop_up_form_window">\r\n        <div class="block-loading block-horizontal-loading block_loading">\r\n            <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!templates/common/pop-up-window/content-forms/sharelink.html",[],function(){return'<div class="head">\r\n	<h4>Edit ShareLink</h4>\r\n</div>\r\n<div class="main">\r\n	<form id="share_link_form" method="post">\r\n		<div class="top">\r\n            <div class="left l-float">\r\n                <ul class="share_link_img_list">\r\n                    {{#first_picture}}\r\n                    <li class="share_link_img_list_item">\r\n                        <img src="{{view_url}}" alt="{{title}}" />\r\n                    </li>\r\n                    {{/first_picture}}\r\n                    {{^first_picture}}\r\n                    <li class="no-thumbnail">\r\n                        <p>No Thumbnail</p>\r\n                    </li>\r\n                    {{/first_picture}}\r\n                </ul>\r\n            </div>\r\n            <div class="right r-float">\r\n                <div class="title">\r\n                    {{#title}}\r\n                    <div>{{title}}</div>\r\n                    {{/title}}\r\n                    <div>\r\n                        <a class="break-word link_bypass" href="{{share_link}}">{{share_link}}</a>\r\n                    </div>\r\n                </div>\r\n                {{#description}}\r\n                <div class="body break-word">\r\n                    {{description}}\r\n                </div>\r\n                {{/description}}\r\n                <div class="nav-wrap">\r\n                    <div class="main checkbox-wrap">\r\n                        <input id="no_thumbnail" type="checkbox" value=""/>\r\n                        <label for="no_thumbnail">No Thumbnail</label>\r\n                        <div class="clear"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="clear"></div>\r\n        </div>\r\n		<div class="center">\r\n			<div class="title">\r\n				<span>Comment</span>\r\n			</div>\r\n			<div class="body">\r\n				<textarea name="text">{{text}}</textarea>\r\n			</div>\r\n		</div>\r\n		<div class="bottom">\r\n            <div class="head">\r\n                <div class="left l-float">\r\n					<b class="l-float">Attachment</b>\r\n					<div class="l-float" id="share_link_attachment_wrap">\r\n						\r\n					</div>\r\n					<div class="clear"></div>\r\n				</div>\r\n                <div class="clear"></div>\r\n            </div>\r\n            <div class="foot">\r\n                <div class="l-float">\r\n                    <div id="share_link_visible_wrap">\r\n\r\n                    </div>\r\n                </div>\r\n                <div class="r-float">\r\n                    <input type="hidden" name="title" value="{{title}}" />\r\n                    <input type="hidden" name="description" value="{{description}}" />\r\n                    <button class="bt bt-blue-2 bt-size-normal save" type="submit">SUBMIT</button>\r\n                    <button class="bt bt-gray bt-size-normal cancel" type="button">CANCEL</button>\r\n                    <div class="clear"></div>\r\n                </div>\r\n                <div class="clear"></div>\r\n            </div>\r\n		</div>\r\n	</form>\r\n</div>\r\n'}),define("views/common/pop-up-window/content-forms",["jquery","underscore","backbone","tools/pop-up-window","views/common/post-tools/main/form/post","views/common/post-tools/main/form/event","views/common/post-tools/main/form/poll","views/common/post-tools/attachment/list","modules/content/post","modules/content/share-link","modules/content/event","modules/content/survey","text!templates/common/pop-up-window/content-forms/form.html","text!templates/common/pop-up-window/content-forms/sharelink.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c,d,u,m,h){var p=i.get("view").extend({className:"pop-up-window block-window-post-edit",template:m,initialize_:function(e){t.bindAll(this,"initialize__"),e=e||{},this.param=e.param||{},this.visibleSettings=e.visibleSettings||{},this.functions=e.functions||{},this.initialize__(e)},events:{"click #deleted_pop_up_form":"deleted"},serialize:function(){return{model:this.model.toJSON(),title:this.title}},afterRender_:function(){var e=this;this.$("#block_pop_up_form_window").html(new this.view.form({model:e.model,param:e.param,visibleSettings:e.visibleSettings,htmlText:{cancelId:"deleted_pop_up_form"},functions:{afterSaveCallback:function(n){e.deleted(),t.isFunction(e.functions.afterSaveCallback)&&e.functions.afterSaveCallback(n)}}}).render().view.el)}}),f=p.extend({initialize__:function(e){this.view=t.extend(e.view||{},{form:o}),this.model=e.model||new l,this.title=this.model.isNew()?"Create Post":"Edit Post"}}),v=p.extend({initialize__:function(e){this.view=t.extend(e.view||{},{form:a}),this.model=e.model||new d,this.title=this.model.isNew()?"Create Event":"Edit Event"}}),_=p.extend({initialize__:function(e){this.view=t.extend(e.view||{},{form:r}),this.model=e.model||new u,this.title=this.model.isNew()?"Create Poll":"Edit Poll"}}),g=i.get("view").extend({className:"pop-up-window block-window-share-link",template:h,events:{"click #deleted_pop_up_form":"deleted","click .save":"save","click .cancel":"deleted"},serialize:function(){return this.model.toJSON()},initialize_:function(e){var t=this;this.functions=e.functions||{},this.model=new c({id:t.model.get("id")}),this.model.addUrlParam({without_content_autolink:1,with_content_attachments:1,with_content_pictures:1,with_content_videos:1,with_content_links:1,with_content_user:1}),this.model.fetch({resultTrue:function(){t.render(),i.get("function").update()}})},beforeRender:function(){var e=this;this.setViews({"#share_link_attachment_wrap":new s({model:e.model,settings:{file:{scope:"upload_file_"+e.model.cid},image:{scope:"upload_picture_"+e.model.cid}}})})},save:function(){var n=this,i=this.$("#share_link_form").serializeObject();if(this.model.addUrlParam({return_detail:1,with_content_count:1,with_content_user:1,with_content_original_content:1,with_content_attachments:1,with_content_pictures:1,with_content_links:1,with_content_videos:1,with_content_courses:1,with_content_conexuses:1,with_user_country:1,with_user_profile:1}),0===this.$("#no_thumbnail:checked").length){var o=[],a=this.model.get("first_picture");t.isUndefined(a)||o.push(a.id),i.pictures=t.has(i,"pictures")?e.merge(o,i.pictures):o}return this.model.save(i,{resultTrue:function(e){t.isFunction(n.functions.afterSaveCallback)&&n.functions.afterSaveCallback(e),n.deleted()}}),!1}}),b={post:f,sharelink:g,event:v,survey:_};return{get:function(e){return b[e]}}}),define("text!templates/content/item/survey/agree_disagree.html",[],function(){return'<div class="type-vertical-item">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_agree_disagree_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}} />\r\n			<label for="poll_agree_disagree_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/agree_noopinion_disagree.html",[],function(){return'<div class="type-vertical-item">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_agree_noopinion_disagree_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}} />\r\n			<label for="poll_agree_noopinion_disagree_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/multiple_choice.html",[],function(){return'<div class="type-vertical-item">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_multiple_choice_{{seq_id}}" type="checkbox" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}}/>\r\n			<label for="poll_multiple_choice_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/one_choice.html",[],function(){return'<div class="type-vertical-item">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_one_choice_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}}/>\r\n			<label for="poll_one_choice_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/scale_10.html",[],function(){return'<div class="type-horizontal-radio">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_scale_10_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}}/>\r\n			<label for="poll_scale_10_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/scale_5.html",[],function(){return'<div class="type-horizontal-radio">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_scale_5_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}}/>\r\n			<label for="poll_scale_5_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/short_answer.html",[],function(){return'<div class="type-question">\r\n	<textarea name="answers[]" {{#is_owner}}disabled="disabled"{{/is_owner}}></textarea>\r\n</div>'}),define("text!templates/content/item/survey/true_false.html",[],function(){return'<div class="type-vertical-item">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_ture_flase_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}}/>\r\n			<label for="poll_ture_flase_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("text!templates/content/item/survey/yes_no.html",[],function(){return'<div class="type-vertical-item">\r\n	<ul>\r\n		{{#choices}}\r\n		<li>\r\n			<input id="poll_yes_no_{{seq_id}}" type="radio" name="answers[]" value="{{seq_id}}" {{#is_owner}}disabled="disabled"{{/is_owner}}/>\r\n			<label for="poll_yes_no_{{seq_id}}">{{subject}}</label>\r\n			<div class="clear"></div>\r\n		</li>\r\n		{{/choices}}\r\n	</ul>\r\n</div>'}),define("views/content/item/survey",["jquery","underscore","backbone","text!templates/content/item/survey/agree_disagree.html","text!templates/content/item/survey/agree_noopinion_disagree.html","text!templates/content/item/survey/multiple_choice.html","text!templates/content/item/survey/one_choice.html","text!templates/content/item/survey/scale_10.html","text!templates/content/item/survey/scale_5.html","text!templates/content/item/survey/short_answer.html","text!templates/content/item/survey/true_false.html","text!templates/content/item/survey/yes_no.html"],function(e,t,n,i,o,a,r,s,l,c,d,u){var m=n.View.extend({template:i,serialize:function(){return this.model.toJSON()}}),h=n.View.extend({template:o,serialize:function(){return this.model.toJSON()}}),p=n.View.extend({template:a,serialize:function(){return this.model.toJSON()}}),f=n.View.extend({template:r,serialize:function(){return this.model.toJSON()}}),v=n.View.extend({template:s,serialize:function(){return this.model.toJSON()}}),_=n.View.extend({template:l,serialize:function(){return this.model.toJSON()}}),g=n.View.extend({template:c,serialize:function(){return this.model.toJSON()}}),b=n.View.extend({template:d,serialize:function(){return this.model.toJSON()}}),y=n.View.extend({template:u,serialize:function(){return this.model.toJSON()}}),w={AgreeDisagree:m,agree_disagree:m,AgreeNoopinionDisagree:h,agree_noopinion_disagree:h,MultipleChoice:p,multiple_choice:p,OneChoice:f,one_choice:f,Scale10:v,scale_10:v,Scale5:_,scale_5:_,ShortAnswer:g,short_answer:g,TrueFalse:b,true_false:b,YesNo:y,yes_no:y};return{get:function(e){return w[e]}}}),define("modules/content/survey-submission",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/survey_submission/"})}),define("text!templates/content/item/event.html",[],function(){return'{{#title}}\r\n<div class="head">\r\n	<b>{{{title}}}</b>\r\n</div>\r\n{{/title}}\r\n<div class="main">\r\n    <p>\r\n        <b>When</b>\r\n        <span>{{display_start_time}} to {{display_end_time}}</span>\r\n    </p>\r\n    {{#where}}\r\n    <p>\r\n        <b>Where</b>\r\n        <span>{{{where}}}</span>\r\n    </p>\r\n    {{/where}}\r\n</div>\r\n{{#display_text}}\r\n<div class="foot break-word translate_text">\r\n	{{{display_text}}}\r\n</div>\r\n{{/display_text}}\r\n'}),define("text!templates/content/item/post.html",[],function(){return'<div class="main">\r\n	<div class="break-word translate_text summary_text">\r\n		{{{display_text}}}\r\n	</div>\r\n</div>\r\n'}),define("text!templates/content/item/sharelink.html",[],function(){return'\r\n    {{#display_text}}\r\n    <div class="head break-word translate_text">\r\n        {{{display_text}}}\r\n    </div>\r\n    {{/display_text}}\r\n    <div class="main">\r\n        <div class="left l-float">\r\n            {{#first_picture}}\r\n            <a class="link_bypass" href="{{share_link}}" target="_blank">\r\n                <img src="{{view_url}}" alt="{{name}}" />\r\n            </a>\r\n            {{/first_picture}}\r\n        </div>\r\n        <div class="right l-float">\r\n            <div class="top">\r\n                {{title}}\r\n            </div>\r\n            <div class="center">\r\n                <a class="link_bypass break-word" href="{{share_link}}" target="_blank">\r\n                    {{share_link}}\r\n                </a>\r\n            </div>\r\n            {{#description}}\r\n            <div class="bottom break-word">\r\n                {{description}}\r\n            </div>\r\n            {{/description}}\r\n        </div>\r\n        <div class="clear"></div>\r\n    </div>\r\n'}),define("text!templates/content/item/survey.html",[],function(){return'<div class="main">\r\n    <div class="left l-float">\r\n        <div class="title">\r\n            {{{title}}}\r\n        </div>\r\n        {{#display_text}}\r\n        <div class="body break-word translate_text">\r\n            {{{display_text}}}\r\n        </div>\r\n        {{/display_text}}\r\n    </div>\r\n    {{^is_short_answer_type}}\r\n        {{#is_display_result}}\r\n            {{#view_url}}\r\n            <div class="right r-float">\r\n                <img src="{{view_url}}"/>\r\n            </div>\r\n            {{/view_url}}\r\n        {{/is_display_result}}\r\n    {{/is_short_answer_type}}\r\n\r\n    <div class="clear"></div>\r\n</div>\r\n{{#is_enable}}\r\n    {{#correct_response_text}}\r\n    <div class="last">\r\n        <p>{{{correct_response_text}}}</p>\r\n    </div>\r\n    {{/correct_response_text}}\r\n{{/is_enable}}\r\n\r\n{{^is_user_submit}}\r\n<div class="foot">\r\n    <form method="post" class="block-poll-question">\r\n        <input type="hidden" name="content_id" value="{{id}}"/>\r\n        <div class="main _main"></div>\r\n        {{^is_owner}}\r\n        <div class="foot">\r\n            <button class="create bt bt-blue-2" type="submit" >Submit</button>\r\n        </div>\r\n        {{/is_owner}}\r\n    </form>\r\n</div>\r\n{{/is_user_submit}}\r\n\r\n{{#is_enable}}\r\n{{#is_display_result}}\r\n{{#is_short_answer_type}}\r\n<div class="list">\r\n    <div class="block-user-answer-list">\r\n        <div class="head">\r\n            <p>{{display_submissions_count}} People took the survey.</p>\r\n        </div>\r\n        <div class="main">\r\n            <ul class="comment_list">\r\n                {{#submissions}}\r\n                <li>\r\n                    <div class="title">\r\n                        <div class="block-post-relations">\r\n                        {{#user}}\r\n                        <div class="item">\r\n                            <div class="title">\r\n                                <a class="show_card" href="{{cn_number}}" title="{{display_name}}" data-id="{{id}}" data-type="user">\r\n                                    {{display_name}}\r\n                                </a>\r\n                                <span class="comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                        </div>\r\n                        {{/user}}\r\n                        {{#user}}\r\n                            {{#profile}}\r\n                                {{#position}}\r\n                                    {{#school_name}}\r\n                                    <div class="item">\r\n                                        <div class="title">\r\n                                            <a class="link_bypass" {{#web_address}}href="{{web_address}}"{{/web_address}} target="_blank" title="{{school_name}}">\r\n                                                {{school_name}}\r\n                                            </a>\r\n                                            <div class="clear"></div>\r\n                                        </div>\r\n                                    </div>\r\n                                    {{/school_name}}\r\n                                {{/position}}\r\n                            {{/profile}}\r\n                            {{#country}}\r\n                            {{#flag_url}}\r\n                            <a class="r-float flag-b" href="javascript:;">\r\n                                <img src="{{flag_url}}" title="{{name}}" alt="{{name}}" />\r\n                            </a>\r\n                            {{/flag_url}}\r\n                            {{/country}}\r\n                        {{/user}}\r\n                        <div class="clear"></div>\r\n                    </div>\r\n                    </div>\r\n                    <div class="body">\r\n                        {{answer}}\r\n                    </div>\r\n                </li>\r\n                {{/submissions}}\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n{{/is_short_answer_type}}\r\n{{/is_display_result}}\r\n{{/is_enable}}'}),define("views/content/item/master",["jquery","underscore","backbone","tools/summary-show-more","tools/pop-up-window","views/content/item/survey","modules/content/survey-submission","text!templates/content/item/event.html","text!templates/content/item/post.html","text!templates/content/item/sharelink.html","text!templates/content/item/survey.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c,d){var u=n.View.extend({className:"block-public-content block-event-content",template:s,serialize:function(){return this.model.toJSON()}}),m=n.View.extend({className:"block-public-content block-post-content",template:l,serialize:function(){return this.model.toJSON()},afterRender:function(){i.init({contentObj:e(this.el).parent().parent()})}}),h=n.View.extend({className:"block-public-content block-sharelink-content",template:c,serialize:function(){return this.model.toJSON()}}),p=["multiple_choice","short_answer","true_false","yes_no","agree_disagree","agree_noopinion_disagree","scale_5","scale_10","one_choice"],f=n.View.extend({className:"block-public-content block-poll-content",template:d,initialize:function(){this.model.on("change:is_user_submit",this.render,this),this.model.on("change:is_display_result",this.render,this),this.model.on("change:is_enable",this.render,this),this.model.on("change:display_submissions_count",this.render,this)},serialize:function(){return this.model.toJSON()},events:{"submit form":"save"},afterRender:function(){var t=this,n=this.model.get("survey_type");e.inArray(n,p)>-1&&t.$("._main").html(new(a.get(n))({model:t.model}).render().view.el)},save:function(t){if(e(t.currentTarget).attr("locked"))return!1;var n=this,i=n.$("form").serializeObject();if(!(i.answers&&i.answers.length>0))return o.get("function").alert("Please answer."),!1;e(t.currentTarget).attr("locked","locked");var a=new r;return a.save(i,{resultTrue:function(e,t){var i=n.model.get("submissions");i.unshift(e.toJSON());var o={is_user_submit:t.data.is_user_submit,is_display_result:t.data.is_display_result,is_enable:!0,view_url:t.data.view_url,display_submissions_count:n.model.get("display_submissions_count")+1,submissions:i};n.model.set(o)},completeCallback:function(){e(t.currentTarget).removeAttr("locked")}}),!1}});return{post:m,event:u,survey:f,sharelink:h}}),define("collections/content/comments",["jquery","underscore","backbone","modules/content/comment"],function(e,t,n,i){return n.Collection.extend({model:i,urlRoot:"/api/content_comment/",urlParam:{with_content_comment_user:1,with_user_profile:1}})}),define("modules/content/content-remember",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/content_remember/",init:function(){},remember:function(e,t){var n=this;switch(e){case 0:n.create(t);break;case 3:n.deleted(t);break;default:n.update(e,t)}},create:function(e){this.save({content_id:this.get("content_id")},e)},update:function(e,t){this.save({id:this.get("content_id"),level:e+1},t)},deleted:function(e){this.set({id:this.get("content_id")}),this.destroy(e)}})}),define("text!templates/common/video-player.html",[],function(){return'<a class="text-hide bt-close-17 always_allow close close-button" href="javascript:;" title="close">Close</a>\n<div class="body">\n    <div id="item_video_{{id}}">loading...</div>\n</div>'}),"undefined"==typeof jwplayer&&(jwplayer=function(e){return jwplayer.api?jwplayer.api.selectPlayer(e):void 0},jwplayer.version="6.2.3115",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(e){return function(){return r(e)}}var n=document,i=window,o=navigator,a=e.utils=function(){};a.exists=function(e){switch(typeof e){case"string":return e.length>0;case"object":return null!==e;
case"undefined":return!1}return!0},a.styleDimension=function(e){return e+((""+e).indexOf("%")>0?"":"px")},a.getAbsolutePath=function(e,t){if(a.exists(t)||(t=n.location.href),a.exists(e)){var i;if(a.exists(e)){i=e.indexOf("://");var o=e.indexOf("?");i=i>0&&(0>o||o>i)}else i=void 0;if(i)return e;i=t.substring(0,t.indexOf("://")+3);var r,o=t.substring(i.length,t.indexOf("/",i.length+1));0===e.indexOf("/")?r=e.split("/"):(r=t.split("?")[0],r=r.substring(i.length+o.length+1,r.lastIndexOf("/")),r=r.split("/").concat(e.split("/")));for(var s=[],l=0;r.length>l;l++)r[l]&&a.exists(r[l])&&"."!=r[l]&&(".."==r[l]?s.pop():s.push(r[l]));return i+o+"/"+s.join("/")}},a.extend=function(){var e=a.extend.arguments;if(e.length>1){for(var t=1;e.length>t;t++)for(var n in e[t])try{a.exists(e[t][n])&&(e[0][n]=e[t][n])}catch(i){}return e[0]}return null},a.log=function(e,t){"undefined"!=typeof console&&console.log!==void 0&&(t?console.log(e,t):console.log(e))};var r=a.userAgentMatch=function(e){return null!==o.userAgent.toLowerCase().match(e)};a.isIE=t(/msie/i),a.isFF=t(/firefox/i),a.isChrome=t(/chrome/i),a.isIOS=t(/iP(hone|ad|od)/i),a.isIPod=t(/iP(hone|od)/i),a.isIPad=t(/iPad/i),a.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),a.isAndroid=function(e){return e?r(RegExp("android.*"+e,"i")):r(/android/i)},a.isMobile=function(){return a.isIOS()||a.isAndroid()},a.saveCookie=function(e,t){n.cookie="jwplayer."+e+"="+t+"; path=/"},a.getCookies=function(){for(var e={},t=n.cookie.split("; "),i=0;t.length>i;i++){var o=t[i].split("=");0==o[0].indexOf("jwplayer.")&&(e[o[0].substring(9,o[0].length)]=o[1])}return e},a.typeOf=function(e){var t=typeof e;return"object"===t?e?e instanceof Array?"array":t:"null":t},a.translateEventResponse=function(t,n){var i=a.extend({},n);t!=e.events.JWPLAYER_FULLSCREEN||i.fullscreen?"object"==typeof i.data?(i=a.extend(i,i.data),delete i.data):"object"==typeof i.metadata&&a.deepReplaceKeyName(i.metadata,["__dot__","__spc__","__dsh__"],["."," ","-"]):(i.fullscreen="true"==i.message?!0:!1,delete i.message);var o,r=["position","duration","offset"];for(o in r)i[r[o]]&&(i[r[o]]=Math.round(1e3*i[r[o]])/1e3);return i},a.flashVersion=function(){if(a.isAndroid())return 0;var e,t=o.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"))}catch(n){}if(i.ActiveXObject!==void 0)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0])}catch(r){}return 0},a.getScriptPath=function(e){for(var t=n.getElementsByTagName("script"),i=0;t.length>i;i++){var o=t[i].src;if(o&&o.indexOf(e)>=0)return o.substr(0,o.indexOf(e))}return""},a.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var o=0;t.length>o;o++)t[o]=e.utils.deepReplaceKeyName(t[o],n,i);break;case"object":for(var a in t){var r;if(n instanceof Array&&i instanceof Array){if(n.length!=i.length)continue;r=n}else r=[n];for(var s=a,o=0;r.length>o;o++)s=s.replace(RegExp(n[o],"g"),i[o]);t[s]=e.utils.deepReplaceKeyName(t[a],n,i),a!=s&&delete t[a]}}return t};var s=a.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};a.getPluginPathType=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(t>0)return s.ABSOLUTE;var n=e.indexOf("/");return e=a.extension(e),!(0>t&&0>n)||e&&isNaN(e)?s.RELATIVE:s.CDN}},a.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},a.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},a.isYouTube=function(e){return e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1},a.isRtmp=function(e,t){return 0==e.indexOf("rtmp")||"rtmp"==t},a.foreach=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n)},a.isHTTPS=function(){return 0==i.location.href.indexOf("https")},a.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{a.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(n){}return t}}(jwplayer),function(e){var t,n="video/",i={mp4:n+"mp4",vorbis:"audio/ogg",ogg:n+"ogg",webm:n+"webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},o={mp4:i.mp4,f4v:i.mp4,m4v:i.mp4,mov:i.mp4,m4a:i.aac,f4a:i.aac,aac:i.aac,mp3:i.mp3,ogv:i.ogg,ogg:i.vorbis,oga:i.vorbis,webm:i.webm,m3u8:i.hls},n="video",n={flv:n,f4v:n,mov:n,m4a:n,m4v:n,mp4:n,aac:n,f4a:n,mp3:"sound",smil:"rtmp",m3u8:"hls"},a=e.extensionmap={};for(t in o)a[t]={html5:o[t]};for(t in n)a[t]||(a[t]={}),a[t].flash=n[t];a.types=i,a.mimeType=function(e){for(var t in i)if(i[t]==e)return t},a.extType=function(e){return a.mimeType(o[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},n=document;e.scriptloader=function(i){function o(){r=t.ERROR,l.sendEvent(s.ERROR)}function a(){r=t.COMPLETE,l.sendEvent(s.COMPLETE)}var r=t.NEW,s=jwplayer.events,l=new s.eventdispatcher;e.extend(this,l),this.load=function(){var l=e.scriptloader.loaders[i];if(!l||l.getStatus()!=t.NEW&&l.getStatus()!=t.LOADING){if(e.scriptloader.loaders[i]=this,r==t.NEW){r=t.LOADING;var c=n.createElement("script");c.addEventListener?(c.onload=a,c.onerror=o):c.readyState&&(c.onreadystatechange=function(){("loaded"==c.readyState||"complete"==c.readyState)&&a()}),n.getElementsByTagName("head")[0].appendChild(c),c.src=i}}else l.addEventListener(s.ERROR,o),l.addEventListener(s.COMPLETE,a)},this.getStatus=function(){return r}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},e.pad=function(e,t,n){for(n||(n="0");t>e.length;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;e.attributes.length>n;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return""+e.attributes[n].value;return""},e.extension=function(e){return e&&"rtmp"!=e.substr(0,4)?(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0):""},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)}}(jwplayer.utils),function(e){e.key=function(t){var n,i,o;this.edition=function(){return o&&o.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return i},e.exists(t)||(t="");try{t=e.tea.decrypt(t,"36QXq4W@GSBV^teR");var a=t.split("/");(n=a[0])||(n="free"),i=a[1],a[2]&&parseInt(a[2])>0&&(o=new Date,o.setTime(a[2]+""))}catch(r){n="invalid"}}}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,o){if(0==e.length)return"";var a=t.strToLongs(i.encode(e));1>=a.length&&(a[1]=0);for(var r,s=t.strToLongs(i.encode(o).slice(0,16)),l=a.length,c=a[l-1],d=a[0],u=Math.floor(6+52/l),m=0;u-->0;){m+=2654435769,r=3&m>>>2;for(var h=0;l>h;h++)d=a[(h+1)%l],c=(c>>>5^d<<2)+(d>>>3^c<<4)^(m^d)+(s[3&h^r]^c),c=a[h]+=c}return a=t.longsToStr(a),n.encode(a)},t.decrypt=function(e,o){if(0==e.length)return"";for(var a,r=t.strToLongs(n.decode(e)),s=t.strToLongs(i.encode(o).slice(0,16)),l=r.length,c=r[l-1],d=r[0],u=2654435769*Math.floor(6+52/l);0!=u;){a=3&u>>>2;for(var m=l-1;m>=0;m--)c=r[m>0?m-1:l-1],c=(c>>>5^d<<2)+(d>>>3^c<<4)^(u^d)+(s[3&m^a]^c),d=r[m]-=c;u-=2654435769}return r=t.longsToStr(r),r=r.replace(/\0+$/,""),i.decode(r)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;t.length>n;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;e.length>n;n++)t[n]=String.fromCharCode(255&e[n],255&e[n]>>>8,255&e[n]>>>16,255&e[n]>>>24);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var o,a,r,s,l,c,d=[],u="",m=n.code;if(c=(t===void 0?0:t)?i.encode(e):e,l=c.length%3,l>0)for(;3>l++;)u+="=",c+="\0";for(l=0;c.length>l;l+=3)o=c.charCodeAt(l),a=c.charCodeAt(l+1),r=c.charCodeAt(l+2),s=o<<16|a<<8|r,o=63&s>>18,a=63&s>>12,r=63&s>>6,s&=63,d[l/3]=m.charAt(o)+m.charAt(a)+m.charAt(r)+m.charAt(s);return d=d.join(""),d=d.slice(0,d.length-u.length)+u},decode:function(e,t){t=t===void 0?!1:t;var o,a,r,s,l,c,d=[],u=n.code;c=t?i.decode(e):e;for(var m=0;c.length>m;m+=4)o=u.indexOf(c.charAt(m)),a=u.indexOf(c.charAt(m+1)),s=u.indexOf(c.charAt(m+2)),l=u.indexOf(c.charAt(m+3)),r=o<<18|a<<12|s<<6|l,o=255&r>>>16,a=255&r>>>8,r&=255,d[m/4]=String.fromCharCode(o,a,r),64==l&&(d[m/4]=String.fromCharCode(o,a)),64==s&&(d[m/4]=String.fromCharCode(o));return s=d.join(""),t?i.decode(s):s}},i={encode:function(e){return e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)}),e=e.replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|63&e>>6,128|63&e)})},decode:function(e){return e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)}),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)})}}}(jwplayer.utils),function(e){e.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed"}}(jwplayer),function(e){var t=jwplayer.utils;e.eventdispatcher=function(e,n){var i,o;this.resetEventListeners=function(){i={},o=[]},this.resetEventListeners(),this.addEventListener=function(e,n,o){try{t.exists(i[e])||(i[e]=[]),"string"==t.typeOf(n)&&(n=Function("return "+n)()),i[e].push({listener:n,count:o})}catch(a){t.log("error",a)}return!1},this.removeEventListener=function(e,n){if(i[e]){try{for(var o=0;i[e].length>o;o++)if(""+i[e][o].listener==""+n){i[e].splice(o,1);break}}catch(a){t.log("error",a)}return!1}},this.addGlobalListener=function(e,n){try{"string"==t.typeOf(e)&&(e=Function("return "+e)()),o.push({listener:e,count:n})}catch(i){t.log("error",i)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=0;o.length>n;n++)if(""+o[n].listener==""+e){o.splice(n,1);break}}catch(i){t.log("error",i)}return!1}},this.sendEvent=function(a,r){if(t.exists(r)||(r={}),t.extend(r,{id:e,version:jwplayer.version,type:a}),n&&t.log(a,r),"undefined"!=t.typeOf(i[a]))for(var s=0;i[a].length>s;s++){try{i[a][s].listener(r)}catch(l){t.log("There was an error while handling a listener: "+(""+l),i[a][s].listener)}i[a][s]&&(1===i[a][s].count?delete i[a][s]:i[a][s].count>0&&(i[a][s].count-=1))}for(s=0;o.length>s;s++){try{o[s].listener(r)}catch(c){t.log("There was an error while handling a listener: "+(""+c),o[s].listener)}o[s]&&(1===o[s].count?delete o[s]:o[s].count>0&&(o[s].count-=1))}}}}(jwplayer.events),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(i,o){return n[i]=new e.plugins.pluginloader(new e.plugins.model(t),o),n[i]},e.plugins.registerPlugin=function(n,i,o,a){var r=e.utils.getPluginName(n);t[r]||(t[r]=new e.plugins.plugin(n)),t[r].registerPlugin(n,i,o,a)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var i=e.utils.getPluginName(n);return t[i]||(t[i]=new e.plugins.plugin(n)),t[i]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(i){function o(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function a(){d=setTimeout(function(){u=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE)},1e3)}function r(){u=t.loaderstatus.ERROR,m.sendEvent(n.ERROR)}var s,l,c,d,u=t.loaderstatus.NEW,m=new n.eventdispatcher;t.extend(this,m),this.load=function(){if(u==t.loaderstatus.NEW)if(i.lastIndexOf(".swf")>0)s=i,u=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE);else if(t.getPluginPathType(i)==t.pluginPathType.CDN)u=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE);else{u=t.loaderstatus.LOADING;var e=new t.scriptloader(o());e.addEventListener(n.COMPLETE,a),e.addEventListener(n.ERROR,r),e.load()}},this.registerPlugin=function(e,i,o,a){d&&(clearTimeout(d),d=void 0),c=i,o&&a?(s=a,l=o):"string"==typeof o?s=o:"function"==typeof o?l=o:!o&&!a&&(s=e),u=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE)},this.getStatus=function(){return u},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(s)switch(t.getPluginPathType(s)){case t.pluginPathType.ABSOLUTE:return s;case t.pluginPathType.RELATIVE:return i.lastIndexOf(".swf")>0?t.getAbsolutePath(s,window.location.href):t.getAbsolutePath(s,o())}return null},this.getJS=function(){return l},this.getTarget=function(){return c},this.getPluginmode=function(){return s!==void 0&&l!==void 0?e.pluginmodes.HYBRID:s!==void 0?e.pluginmodes.FLASH:l!==void 0?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new l(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events;e.plugins.pluginloader=function(i,o){function a(){d?m.sendEvent(n.ERROR,{message:s}):c||(c=!0,l=t.loaderstatus.COMPLETE,m.sendEvent(n.COMPLETE))}function r(){if(u||a(),!c&&!d){var n,o=0,r=i.getPlugins();for(n in u){var l=t.getPluginName(n),m=r[l],l=m.getJS(),h=m.getTarget(),m=m.getStatus();m==t.loaderstatus.LOADING||m==t.loaderstatus.NEW?o++:l&&(!h||parseFloat(h)>parseFloat(e.version))&&(d=!0,s="Incompatible player version",a())}0==o&&a()}}var s,l=t.loaderstatus.NEW,c=!1,d=!1,u=o,m=new n.eventdispatcher;t.extend(this,m),this.setupPlugins=function(e,n,o){var a,r={length:0,plugins:{}},s=0,l={},c=i.getPlugins();for(a in n.plugins){var d=t.getPluginName(a),u=c[d],m=u.getFlashPath(),h=u.getJS(),p=u.getURL();m&&(r.plugins[m]=t.extend({},n.plugins[a]),r.plugins[m].pluginmode=u.getPluginmode(),r.length++);try{if(h&&n.plugins&&n.plugins[p]){var f=document.createElement("div");f.id=e.id+"_"+d,f.style.position="absolute",f.style.top=0,f.style.zIndex=s+10,l[d]=u.getNewInstance(e,t.extend({},n.plugins[p]),f),s++,e.onReady(o(l[d],f,!0)),e.onResize(o(l[d],f))}}catch(v){console.log("ERROR: Failed to load "+d+".")}}return e.plugins=l,r},this.load=function(){if(!t.exists(o)||"object"==t.typeOf(o)){l=t.loaderstatus.LOADING;for(var e in o)if(t.exists(e)){var a=i.addPlugin(e);a.addEventListener(n.COMPLETE,r),a.addEventListener(n.ERROR,h)}a=i.getPlugins();for(e in a)a[e].load()}r()};var h=this.pluginFailed=function(){d||(d=!0,s="File not found",a())};this.getStatus=function(){return l}}}(jwplayer),function(e){e.playlist=function(t){var n=[];if("array"==e.utils.typeOf(t))for(var i=0;t.length>i;i++)n.push(new e.playlist.item(t[i]));else n.push(new e.playlist.item(t));return n}}(jwplayer),function(e){var t=e.item=function(n){n=jwplayer.utils.extend({},t.defaults,n),0==n.sources.length&&(n.sources=[new e.source(n)]);for(var i=0;n.sources.length>i;i++)n.sources[i]=new e.source(n.sources[i]);return n};t.defaults={description:"",image:"",mediaid:"",title:"",tags:"",duration:-1,sources:[]}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,bitrate:void 0,width:void 0,height:void 0,type:void 0};e.source=function(e){var i,o=t.extend({},n);for(i in n)t.exists(e[i])&&(o[i]=e[i],delete e[i]);return o.type&&o.type.indexOf("/")>0&&(o.type=t.extensionmap.mimeType(o.type)),"m3u8"==o.type&&(o.type="hls"),"smil"==o.type&&(o.type="rtmp"),o}}(jwplayer.playlist),function(e){var t=e.utils,n=e.events,i=document,o=e.embed=function(a){function r(e){l(c,f+e.message)}function s(){l(c,f+"No playable sources found")}function l(e,n){if(m.fallback){var i=e.style;i.backgroundColor="#000",i.color="#FFF",i.width=t.styleDimension(m.width),i.height=t.styleDimension(m.height),i.display="table",i.opacity=1;var i=document.createElement("p"),o=i.style;o.verticalAlign="middle",o.textAlign="center",o.display="table-cell",o.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=n.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)}}var c,d,u,m=new o.config(a.config),h=m.width,p=m.height,f="Error loading player: ",v=e.plugins.loadPlugins(a.id,m.plugins);return m.fallbackDiv&&(u=m.fallbackDiv,delete m.fallbackDiv),m.id=a.id,d=i.getElementById(a.id),c=i.createElement("div"),c.id=d.id,c.style.width=(""+h).indexOf("%")>0?h:h+"px",c.style.height=(""+p).indexOf("%")>0?p:p+"px",d.parentNode.replaceChild(c,d),e.embed.errorScreen=l,v.addEventListener(n.COMPLETE,function(){if("array"==t.typeOf(m.playlist)&&2>m.playlist.length&&(0==m.playlist.length||!m.playlist[0].sources||0==m.playlist[0].sources.length))s();else if(v.getStatus()==t.loaderstatus.COMPLETE){for(var e=0;m.modes.length>e;e++)if(m.modes[e].type&&o[m.modes[e].type]){var i=t.extend({},m),l=new o[m.modes[e].type](c,m.modes[e],i,v,a);if(l.supportsConfig()){l.addEventListener(n.ERROR,r),l.embed(),e=a,i=i.events,l=void 0;for(l in i)"function"==typeof e[l]&&e[l].call(e,i[l]);return a}}m.fallback?(t.log("No suitable players found and fallback enabled"),new o.download(c,m,s)):(t.log("No suitable players found and fallback disabled"),c.parentNode.replaceChild(u,c))}}),v.addEventListener(n.ERROR,function(e){l(c,"Could not load plugins: "+e.message)}),v.load(),a}}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;e.playlist.length>t;t++)e.playlist[t]=new o(e.playlist[t]);else{var i,t={};for(i in o.defaults)n(e,t,i);t.sources||(e.levels?(t.sources=e.levels,delete e.levels):(i={},n(e,i,"file"),n(e,i,"type"),t.sources=i.file?[i]:[])),e.playlist=[new o(t)]}}function n(e,t,n){i.exists(e[n])&&(t[n]=e[n],delete e[n])}var i=e.utils,o=e.playlist.item;(e.embed.config=function(n){var o={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:i.getScriptPath("jwplayer.js")};n=i.extend(o,e.defaults,n);var o={type:"html5",src:n.base+"jwplayer.html5.js"},a={type:"flash",src:n.base+"jwplayer.flash.swf"};return n.modes="flash"==n.primary?[a,o]:[o,a],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position),n.flashplayer&&(a.src=n.flashplayer),n.html5player&&(o.src=n.html5player),t(n),n}).addConfig=function(e,n){return t(n),i.extend(e,n)}}(jwplayer),function(e){var t=e.utils,n=document;e.embed.download=function(e,i,o){function a(e,t){for(var i=n.querySelectorAll(e),o=0;i.length>o;o++)for(var a in t)i[o].style[a]=t[a]}function r(e,t,i){return e=n.createElement(e),t&&(e.className="jwdownload"+t),i&&i.appendChild(e),e}var s,l,c=t.extend({},i),d=c.width?c.width:480,u=c.height?c.height:320;i=i.logo?i.logo:{prefix:t.repo(),file:"logo.png",margin:10};var m,h;h=c.playlist;var p,f,c=["mp4","aac","mp3"];if(h&&h.length){for(p=h[0],f=p.sources,h=0;f.length>h;h++){var v=f[h],_=v.type?v.type:t.extensionmap.extType(t.extension(v.file));if(v.file)for(h in c)_==c[h]?(s=v.file,l=p.image):t.isYouTube(v.file)&&(m=v.file)}s?(o=s,e&&(s=r("a","display",e),r("div","icon",s),r("div","logo",s),o&&s.setAttribute("href",t.getAbsolutePath(o))),o="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",a(o+"display",{width:t.styleDimension(Math.max(320,d)),height:t.styleDimension(Math.max(180,u)),background:"black center no-repeat "+(l?"url("+l+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),a(o+"display div",{position:"absolute",width:"100%",height:"100%"}),a(o+"logo",{top:i.margin+"px",right:i.margin+"px",background:"top right no-repeat url("+i.prefix+i.file+")"}),a(o+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):m?(i=m,e=r("embed","",e),e.src="http://www.youtube.com/v/"+/v[=\/](\w*)|\/(\w+)$|^(\w+)$/i.exec(i).slice(1).join(""),e.type="application/x-shockwave-flash",e.width=d,e.height=u):o()}}}(jwplayer),function(e){var t=e.utils,n=e.events,i={};(e.embed.flash=function(o,a,r,s,l){function c(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function d(e,t,n){return function(){try{n&&document.getElementById(l.id+"_wrapper").appendChild(t);var i=document.getElementById(l.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(o){}}}function u(e){if(!e)return{};var n,i={},o=[];for(n in e){var a=t.getPluginName(n),r=e[n];o.push(n);for(var s in r)i[a+"."+s]=r[s]}return i.plugins=o.join(","),i}var m=new e.events.eventdispatcher,h=t.flashVersion();t.extend(this,m),this.embed=function(){if(r.id=l.id,10>h)return m.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,p=t.extend({},r);o.id+"_wrapper"==o.parentNode.id?document.getElementById(o.id+"_wrapper"):(e=document.createElement("div"),e.id=o.id+"_wrapper",e.style.position="relative",e.style.width=t.styleDimension(p.width),e.style.height=t.styleDimension(p.height),o.parentNode.replaceChild(e,o),e.appendChild(o)),e=s.setupPlugins(l,p,d),e.length>0?t.extend(p,u(e.plugins)):delete p.plugins,p["dock.position"]!==void 0&&"false"==(""+p["dock.position"]).toLowerCase()&&(p.dock=p["dock.position"],delete p["dock.position"]),e=p.wmode?p.wmode:p.height&&40>=p.height?"transparent":"opaque";for(var f="height width modes events primary base fallback volume".split(" "),v=0;f.length>v;v++)delete p[f[v]];var _,f=t.getCookies();for(_ in f)p[_]===void 0&&(p[_]=f[_]);_=window.location.pathname.split("/"),_.splice(_.length-1,1),_=_.join("/"),p.base=_+"/",i[o.id]=p,t.isIE()?(p='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%" id="'+o.id+'" name="'+o.id+'" tabindex=0"">',p+='<param name="movie" value="'+a.src+'">',p+='<param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always">',p+='<param name="seamlesstabbing" value="true">',p+='<param name="wmode" value="'+e+'">',p+='<param name="bgcolor" value="#000000">',p+="</object>",o.outerHTML=p,p=document.getElementById(o.id)):(p=document.createElement("object"),p.setAttribute("type","application/x-shockwave-flash"),p.setAttribute("data",a.src),p.setAttribute("width","100%"),p.setAttribute("height","100%"),p.setAttribute("bgcolor","#000000"),p.setAttribute("id",o.id),p.setAttribute("name",o.id),p.setAttribute("tabindex",0),c(p,"allowfullscreen","true"),c(p,"allowscriptaccess","always"),c(p,"seamlesstabbing","true"),c(p,"wmode",e),o.parentNode.replaceChild(p,o)),l.container=p,l.setPlayer(p,"flash")},this.supportsConfig=function(){if(h){if(!r)return!0;if("string"==t.typeOf(r.playlist))return!0;try{var e=r.playlist[0].sources;if(e===void 0)return!0;for(var n=0;e.length>n;n++){var i;if(i=e[n].file){var o=e[n].file,a=e[n].type;if(t.isYouTube(o)||t.isRtmp(o,a)||"hls"==a)i=!0;else{var s=t.extensionmap[a?a:t.extension(o)];i=s?!!s.flash:!1}}if(i)return!0}}catch(l){}}return!1}}).getVars=function(e){return i[e]}}(jwplayer),function(e){var t=e.utils,n=t.extensionmap,i=e.events;e.embed.html5=function(o,a,r,s,l){function c(e,t,n){return function(){try{var i=document.querySelector("#"+o.id+" .jwmain");n&&i.appendChild(t),"function"==typeof e.resize&&(e.resize(i.clientWidth,i.clientHeight),setTimeout(function(){e.resize(i.clientWidth,i.clientHeight)},400)),t.left=i.style.left,t.top=i.style.top}catch(a){}}}function d(e){u.sendEvent(e.type,{message:"HTML5 player not found"})}var u=this,m=new i.eventdispatcher;t.extend(u,m),u.embed=function(){if(e.html5){s.setupPlugins(l,r,c),o.innerHTML="";var n=e.utils.extend({},r);delete n.volume,n=new e.html5.player(n),l.container=document.getElementById(l.id),l.setPlayer(n,"html5")}else n=new t.scriptloader(a.src),n.addEventListener(i.ERROR,d),n.addEventListener(i.COMPLETE,u.embed),n.load()},u.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"==t.typeOf(r.playlist))return!0;for(var i=r.playlist[0].sources,o=0;i.length>o;o++){var a,s=i[o].file,l=i[o].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||t.isAndroid()&&("m3u"==t.extension(s)||"m3u8"==t.extension(s))||t.isRtmp(s,l))a=!1;else{var c,d=n[l?l:t.extension(s)];if(!d||d.flash&&!d.html5)c=!1;else{var u=d.html5,m=e.vid;if(u)try{c=m.canPlayType(u)?!0:!1}catch(h){c=!1}else c=!0}a=c}if(a)return!0}}catch(p){}return!1}}}(jwplayer),function(e){var t=e.embed,n=e.utils,i=n.extend(function(i){var o=n.repo(),a=i.config,r=a.plugins,s=a.analytics,l=o+"jwpsrv.js",c=o+"sharing.js",d=o+"related.js",u=o+"gapro.js",m=new e.utils.key(e.key).edition(),r=r?r:{};return"ads"==m&&a.advertising&&(a.advertising.client.match(".js$|.swf$")?r[a.advertising.client]=a.advertising:r[o+a.advertising.client+("flash"==a.primary?".swf":".js")]=a.advertising),delete a.advertising,a.key=e.key,a.analytics&&a.analytics.client&&a.analytics.client.match(".js$|.swf$")&&(l=a.analytics.client),delete a.analytics,"free"!=m&&s&&!1===s.enabled||(r[l]=s?s:{}),delete r.sharing,delete r.related,("premium"==m||"ads"==m)&&(a.sharing&&(a.sharing.client&&a.sharing.client.match(".js$|.swf$")&&(c=a.sharing.client),r[c]=a.sharing),a.related&&(a.related.client&&a.related.client.match(".js$|.swf$")&&(d=a.related.client),r[d]=a.related),a.ga&&(a.ga.client&&a.ga.client.match(".js$|.swf$")&&(u=a.ga.client),r[u]=a.ga),a.skin&&(a.skin=a.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,n.repo()+"skins/$1.xml").toLowerCase())),a.plugins=r,new t(i)},t);e.embed=i}(jwplayer),function(e){var t=[],n=e.utils,i=e.events,o=i.state,a=document,r=e.api=function(t){function s(e,t){return function(n){return t(e,n)}}function l(e,t){return p[e]||(p[e]=[],d(i.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n==e){var i=p[n];if(i)for(var o=0;i.length>o;o++)"function"==typeof i[o]&&i[o].call(this,{oldstate:t,newstate:n})}})),p[e].push(t),m}function c(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+m.id+'").dispatchEvent("'+t+'", dat); }')}catch(i){n.log("Could not add internal listener")}}function d(e,t){return h[e]||(h[e]=[],f&&v&&c(f,e)),h[e].push(t),m}function u(){if(v){for(var e=arguments[0],t=[],n=1;arguments.length>n;n++)t.push(arguments[n]);if(f!==void 0&&"function"==typeof f[e])switch(t.length){case 4:return f[e](t[0],t[1],t[2],t[3]);case 3:return f[e](t[0],t[1],t[2]);case 2:return f[e](t[0],t[1]);case 1:return f[e](t[0]);default:return f[e]()}return null}_.push(arguments)}var m=this,h={},p={},f=void 0,v=!1,_=[],g=void 0,b={},y={};m.container=t,m.id=t.id,m.getBuffer=function(){return u("jwGetBuffer")},m.getContainer=function(){return m.container},m.addButton=function(e,t,i,o){try{y[o]=i,u("jwDockAddButton",e,t,"jwplayer('"+m.id+"').callback('"+o+"')",o)}catch(a){n.log("Could not add dock button"+a.message)}},m.removeButton=function(e){u("jwDockRemoveButton",e)},m.callback=function(e){y[e]&&y[e]()},m.getDuration=function(){return u("jwGetDuration")},m.getFullscreen=function(){return u("jwGetFullscreen")},m.getStretching=function(){return u("jwGetStretching")},m.getHeight=function(){return u("jwGetHeight")},m.getLockState=function(){return u("jwGetLockState")},m.getMeta=function(){return m.getItemMeta()},m.getMute=function(){return u("jwGetMute")},m.getPlaylist=function(){var e=u("jwGetPlaylist");"flash"==m.renderingMode&&n.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__"],["."," ","-"]);for(var t=0;e.length>t;t++)n.exists(e[t].index)||(e[t].index=t);return e},m.getPlaylistItem=function(e){return n.exists(e)||(e=m.getCurrentItem()),m.getPlaylist()[e]},m.getPosition=function(){return u("jwGetPosition")},m.getRenderingMode=function(){return m.renderingMode},m.getState=function(){return u("jwGetState")},m.getVolume=function(){return u("jwGetVolume")},m.getWidth=function(){return u("jwGetWidth")},m.setFullscreen=function(e){return n.exists(e)?u("jwSetFullscreen",e):u("jwSetFullscreen",!u("jwGetFullscreen")),m},m.setStretching=function(e){return u("jwSetStretching",e),m},m.setMute=function(e){return n.exists(e)?u("jwSetMute",e):u("jwSetMute",!u("jwGetMute")),m},m.lock=function(){return m},m.unlock=function(){return m},m.load=function(e){return u("jwLoad",e),m},m.playlistItem=function(e){return u("jwPlaylistItem",parseInt(e)),m},m.playlistPrev=function(){return u("jwPlaylistPrev"),m},m.playlistNext=function(){return u("jwPlaylistNext"),m},m.resize=function(e,t){if("flash"!=m.renderingMode)u("jwResize",e,t);else{var i=a.getElementById(m.id+"_wrapper");i&&(i.style.width=n.styleDimension(e),i.style.height=n.styleDimension(t))}return m},m.play=function(e){return e===void 0?(e=m.getState(),e==o.PLAYING||e==o.BUFFERING?u("jwPause"):u("jwPlay")):u("jwPlay",e),m},m.pause=function(e){return e===void 0?(e=m.getState(),e==o.PLAYING||e==o.BUFFERING?u("jwPause"):u("jwPlay")):u("jwPause",e),m},m.stop=function(){return u("jwStop"),m},m.seek=function(e){return u("jwSeek",e),m},m.setVolume=function(e){return u("jwSetVolume",e),m},m.loadInstream=function(e,t){return g=new r.instream(this,f,e,t)},m.getQualityLevels=function(){return u("jwGetQualityLevels")},m.getCurrentQuality=function(){return u("jwGetCurrentQuality")},m.setCurrentQuality=function(e){u("jwSetCurrentQuality",e)},m.getCaptionsList=function(){return u("jwGetCaptionsList")},m.getCurrentCaptions=function(){return u("jwGetCurrentCaptions")},m.setCurrentCaptions=function(e){u("jwSetCurrentCaptions",e)},m.getControls=function(){return u("jwGetControls")},m.getSafeRegion=function(){return u("jwGetSafeRegion")},m.setControls=function(e){u("jwSetControls",e)},m.destroyPlayer=function(){u("jwPlayerDestroy")};var w={onBufferChange:i.JWPLAYER_MEDIA_BUFFER,onBufferFull:i.JWPLAYER_MEDIA_BUFFER_FULL,onError:i.JWPLAYER_ERROR,onFullscreen:i.JWPLAYER_FULLSCREEN,onMeta:i.JWPLAYER_MEDIA_META,onMute:i.JWPLAYER_MEDIA_MUTE,onPlaylist:i.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:i.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:i.JWPLAYER_PLAYLIST_COMPLETE,onReady:i.API_READY,onResize:i.JWPLAYER_RESIZE,onComplete:i.JWPLAYER_MEDIA_COMPLETE,onSeek:i.JWPLAYER_MEDIA_SEEK,onTime:i.JWPLAYER_MEDIA_TIME,onVolume:i.JWPLAYER_MEDIA_VOLUME,onBeforePlay:i.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:i.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:i.JWPLAYER_DISPLAY_CLICK,onControls:i.JWPLAYER_CONTROLS,onQualityLevels:i.JWPLAYER_MEDIA_LEVELS,onQualityChange:i.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:i.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:i.JWPLAYER_CAPTIONS_CHANGED};
n.foreach(w,function(e){m[e]=s(w[e],d)});var x={onBuffer:o.BUFFERING,onPause:o.PAUSED,onPlay:o.PLAYING,onIdle:o.IDLE};return n.foreach(x,function(e){m[e]=s(x[e],l)}),m.remove=function(){if(!v)throw"Cannot call remove() before player is ready";_=[],r.destroyPlayer(this.id)},m.setup=function(t){if(e.embed){var n=a.getElementById(m.id);return n&&(t.fallbackDiv=n),n=m,_=[],r.destroyPlayer(n.id),n=e(m.id),n.config=t,new e.embed(n)}return m},m.registerPlugin=function(t,n,i,o){e.plugins.registerPlugin(t,n,i,o)},m.setPlayer=function(e,t){f=e,m.renderingMode=t},m.detachMedia=function(){return"html5"==m.renderingMode?u("jwDetachMedia"):void 0},m.attachMedia=function(){return"html5"==m.renderingMode?u("jwAttachMedia"):void 0},m.dispatchEvent=function(e,t){if(h[e])for(var i=n.translateEventResponse(e,t),o=0;h[e].length>o;o++)"function"==typeof h[e][o]&&h[e][o].call(this,i)},m.dispatchInstreamEvent=function(e){g&&g.dispatchEvent(e,arguments)},m.playerReady=function(e){for(v=!0,f||m.setPlayer(a.getElementById(e.id)),m.container=a.getElementById(m.id),n.foreach(h,function(e){c(f,e)}),d(i.JWPLAYER_PLAYLIST_ITEM,function(){b={}}),d(i.JWPLAYER_MEDIA_META,function(e){n.extend(b,e.metadata)}),m.dispatchEvent(i.API_READY);_.length>0;)u.apply(this,_.shift())},m.getItemMeta=function(){return b},m.getCurrentItem=function(){return u("jwGetPlaylistIndex")},m};r.selectPlayer=function(e){var i;return n.exists(e)||(e=0),e.nodeType?i=e:"string"==typeof e&&(i=a.getElementById(e)),i?(e=r.playerById(i.id))?e:r.addPlayer(new r(i)):"number"==typeof e?t[e]:null},r.playerById=function(e){for(var n=0;t.length>n;n++)if(t[n].id==e)return t[n];return null},r.addPlayer=function(e){for(var n=0;t.length>n;n++)if(t[n]==e)return e;return t.push(e),e},r.destroyPlayer=function(e){for(var i,o=-1,r=0;t.length>r;r++)t[r].id==e&&(o=r,i=t[r]);return o>=0&&(e=i.id,r=a.getElementById(e+("flash"==i.renderingMode?"_wrapper":"")),n.clearCss&&n.clearCss("#"+e),r&&("html5"==i.renderingMode&&i.destroyPlayer(),i=a.createElement("div"),i.id=e,r.parentNode.replaceChild(i,r)),t.splice(o,1)),null},e.playerReady=function(t){var n=e.api.playerById(t.id);n?n.playerReady(t):e.api.selectPlayer(t.id).playerReady(t)}}(jwplayer),function(e){var t=e.events,n=e.utils,i=t.state;e.api.instream=function(e,o,a,r){function s(e,t){return u[e]||(u[e]=[],d.jwInstreamAddEventListener(e,'function(dat) { jwplayer("'+c.id+'").dispatchInstreamEvent("'+e+'", dat); }')),u[e].push(t),this}function l(e,n){return m[e]||(m[e]=[],s(t.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate,i=t.oldstate;if(n==e){var o=m[n];if(o)for(var a=0;o.length>a;a++)"function"==typeof o[a]&&o[a].call(this,{oldstate:i,newstate:n,type:t.type})}})),m[e].push(n),this}var c=e,d=o,u={},m={};this.dispatchEvent=function(e,t){if(u[e])for(var i=n.translateEventResponse(e,t[1]),o=0;u[e].length>o;o++)"function"==typeof u[e][o]&&u[e][o].call(this,i)},this.onError=function(e){return s(t.JWPLAYER_ERROR,e)},this.onFullscreen=function(e){return s(t.JWPLAYER_FULLSCREEN,e)},this.onMeta=function(e){return s(t.JWPLAYER_MEDIA_META,e)},this.onMute=function(e){return s(t.JWPLAYER_MEDIA_MUTE,e)},this.onComplete=function(e){return s(t.JWPLAYER_MEDIA_COMPLETE,e)},this.onSeek=function(e){return s(t.JWPLAYER_MEDIA_SEEK,e)},this.onTime=function(e){return s(t.JWPLAYER_MEDIA_TIME,e)},this.onVolume=function(e){return s(t.JWPLAYER_MEDIA_VOLUME,e)},this.onBuffer=function(e){return l(i.BUFFERING,e)},this.onPause=function(e){return l(i.PAUSED,e)},this.onPlay=function(e){return l(i.PLAYING,e)},this.onIdle=function(e){return l(i.IDLE,e)},this.onInstreamClick=function(e){return s(t.JWPLAYER_INSTREAM_CLICK,e)},this.onInstreamDestroyed=function(e){return s(t.JWPLAYER_INSTREAM_DESTROYED,e)},this.play=function(e){d.jwInstreamPlay(e)},this.pause=function(e){d.jwInstreamPause(e)},this.seek=function(e){d.jwInstreamSeek(e)},this.destroy=function(){d.jwInstreamDestroy()},this.getState=function(){return d.jwInstreamGetState()},this.getDuration=function(){return d.jwInstreamGetDuration()},this.getPosition=function(){return d.jwInstreamGetPosition()},c.callInternal("jwLoadInstream",a,r)}}(jwplayer),function(e){var t=e.api,n=t.selectPlayer;t.selectPlayer=function(t){return(t=n(t))?t:{registerPlugin:function(t,n,i){e.plugins.registerPlugin(t,n,i)}}}}(jwplayer)),define("jwplayer",function(){}),define("views/common/video-player",["jquery","underscore","backbone","tools/regs","text!templates/common/video-player.html","jqueryUi","jwplayer"],function(e,t,n,i,o){return n.View.extend({className:"video_wrapper block-video-box",template:o,initialize:function(t){var n={width:350,height:200,autoStart:!1};this.options=t||{},this.options=e.extend(!0,{},n,this.options)},events:{"click .close":"close"},serialize:function(){return{id:this.cid}},beforeRender:function(){},afterRender:function(){var e=this;this.afterLoading(function(t){e.bindDraggable(t),e.loadPlugin(t)})},loadPlugin:function(e){this.isYoutube()?this.bindJwplayer(e):this.isYouku()&&this.insertYoukuPlayer(e)},isYoutube:function(){return"youtube"===this.getVideoType()},isYouku:function(){return"youku"===this.getVideoType()},getVideoType:function(){return this.videoType},setVideoType:function(e){this.videoType=e},getVideoId:function(){var t="",n="";if(this.options.target){var o=e(this.options.target).attr("href");i.check("youtubeUrl",o)?(this.setVideoType("youtube"),n=i.rules("youtubeUrl"),t=o&&o.match(n)&&o.match(n)[3]?o.match(n)[3]:""):i.check("youkuUrl",o)&&(this.setVideoType("youku"),n=i.rules("youkuUrl"),t=o&&o.match(n)&&o.match(n)[4]?o.match(n)[4]:"")}return t},insertYoukuPlayer:function(t){var n=this;e("#"+t).html(n.youkuPlayer())},youkuPlayer:function(){return'<embed allowscriptaccess="never" pluginspage="http://get.adobe.com/cn/flashplayer/" flashvars="playMovie=true&amp;auto=1" width="'+this.options.width+'" height="'+this.options.height+'" allowfullscreen="true" quality="high" src="http://player.youku.com/player.php/sid/'+this.getVideoId()+'/v.swf" type="application/x-shockwave-flash" wmode="transparent">'},afterLoading:function(t,n){var i=this,o="item_video_"+this.cid;n&&(o=n);var a=0,r=function(){setTimeout(function(){e("#"+o).length>0&&i.getVideoId()?"function"==typeof t&&t(o):100>a&&(++a,r())},100)};r()},bindDraggable:function(){e(".video_wrapper").draggable({cancel:".video_wrapper .body",cursor:"move"})},bindJwplayer:function(e){var t=this;t.getVideoId()&&e&&jwplayer(e).setup({file:"http://www.youtube.com/watch?v="+t.getVideoId(),width:t.options.width,height:t.options.height,autostart:t.options.autoStart,base:"js/ui/jwplayer/"})},popup:function(){!e(this.options.target).attr("locked")&&this.getVideoId()&&(e(this.options.target).attr("locked","locked"),e("#block_head").append(this.render().view.$el))},inset:function(){var e=this;if("string"!=typeof this.options.target||!this.options.target.match(/(#)(\w+)/)||!this.options.target.match(/(#)(\w+)/)[2])return!1;var t=this.options.target.match(/(#)(\w+)/)[2];t&&this.afterLoading(function(t){e.loadPlugin(t)},t)},close:function(){e(this.options.target).removeAttr("locked"),this.remove()}})}),define("text!templates/content/common/rememberit-tip.html",[],function(){return'<div class="main">\r\n    The RememberIt function is a tool, similar to a bookmark, that allows you to mark posts you want to revisit or view later.  There are three RememberIt labels--One String, Two Strings, and Three Strings (displayed with one, two, or three asterisks next to the icon).  An urgent post can be marked with three strings, for example, and one you want to mark for future reference can be marked with one string.    You will be able to revisit these posts by clicking the RememberIt icon at the top of your screen.\r\n</div>'}),define("views/content/common/rememberit-tip",["jquery","underscore","backbone","text!templates/content/common/rememberit-tip.html"],function(e,t,n,i){return n.View.extend({className:"float-box-tips block_remember_it_tips",template:i})}),define("views/common/pop-up-window/repost/item",["jquery","underscore","backbone","modules/course/course","modules/conexus/conexus"],function(e,t,n,i,o){return n.View.extend({tagName:"li",initialize:function(){var e="";this.model instanceof i&&(e="course_"),this.model instanceof o&&(e="conexus_");var t='<input id="repost_'+e+this.model.get("id")+'" name="relations['+e+'ids][]"type="checkbox" value="'+this.model.get("id")+'" /><label title="'+this.model.get("name")+'" for="repost_'+e+this.model.get("id")+'">'+this.model.get("name")+'</label><div class="clear"></div>';this.$el.html(t)}})}),define("views/common/pop-up-window/repost/list",["jquery","underscore","backbone","views/common/pop-up-window/repost/item","tools/pop-up-window"],function(e,t,n,i,o){return n.View.extend({tagName:"ul",initialize:function(){t.bindAll(this,"addAll","addOne"),this.collection.on("fetch",this.addAll,this),this.collection.on("add",this.addOne,this)},afterRender:function(){this.collection.fetch({resultTrue:function(){o.get("function").update()}})},addAll:function(){this.collection.each(this.addOne)},addOne:function(e){this.$el.append(new i({model:e}).render().view.el)}})}),define("modules/content/content-repost",["jquery","underscore","backbone"],function(e,t,n){return n.Model.extend({urlRoot:"api/content_repost/",init:function(){}})}),define("text!templates/common/pop-up-window/repost.html",[],function(){return'<div class="head">\r\n	<h4>Repost</h4>\r\n</div>\r\n<div class="main">\r\n    <h5>Please select the Courses and Conexus in which you wish to Repost</h5>\r\n    <form>   \r\n		{{#user.count.course}}\r\n		<div class="center">\r\n			<div class="title">\r\n				<b class="font-bold">Course</b>\r\n				<input id="select_course_all" type="checkbox"/>\r\n				<label for="select_course_all">Select All</label>\r\n				<div class="clear"></div>\r\n			</div>\r\n            <div class="body">\r\n				<div class="box _box" id="repost_course_ids">\r\n					<div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		{{/user.count.course}}\r\n		{{#user.count.conexus}}\r\n		<div class="center">\r\n			<div class="title">\r\n				<b class="font-bold">Conexus</b>\r\n				<input id="select_conexus_all" type="checkbox" />\r\n				<label for="select_conexus_all">Select All</label>\r\n				<div class="clear"></div>\r\n			</div>\r\n            <div class="body"> \r\n				<div class="box _box" id="repost_conexus_ids">\r\n					<div class="block-loading block-horizontal-loading block_loading">\r\n                        <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n                    </div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		{{/user.count.conexus}}\r\n		<div class="center">\r\n            <div class="body"> \r\n				<div class="box">\r\n					<ul>\r\n						<li>\r\n							<input id="repost_my_colleagues" name="auth_assignment_group_ids[]" value="my_colleague" type="checkbox" />\r\n							<label class="font-bold" for="repost_my_colleagues">My Colleagues</label>\r\n							<div class="clear"></div>\r\n						</li>\r\n						<li>\r\n							<input id="repost_my_follower" name="auth_assignment_group_ids[]" value="my_follower" type="checkbox" />\r\n							<label class="font-bold" for="repost_my_follower">My Followers</label>\r\n							<div class="clear"></div>\r\n						</li>\r\n                        <li>\r\n							<input id="repost_all_members" name="auth_assignment_group_ids[]" value="public" type="checkbox" />\r\n							<label class="font-bold" for="repost_all_members">All CN Members</label>\r\n							<div class="clear"></div>\r\n						</li>\r\n					</ul>\r\n				</div>\r\n			</div>\r\n		</div>\r\n        <div class="bottom">\r\n			<input type="hidden" name="content_id" value="{{content_id}}" />\r\n			<button class="bt bt-blue-2 bt-size-normal" type="submit">\r\n				REPOST\r\n			</button>\r\n			<button class="bt bt-gray bt-size-normal cancel" type="button">\r\n				CANCEL\r\n			</button>\r\n		</div>\r\n    </form> \r\n</div>'}),define("views/common/pop-up-window/repost",["jquery","underscore","backbone","tools/pop-up-window","views/common/pop-up-window/repost/list","modules/me","modules/content/content-repost","collections/course/user-collection","collections/conexus/user-collection","text!templates/common/pop-up-window/repost.html","jquerySerializeObject"],function(e,t,n,i,o,a,r,s,l,c){return i.get("view").extend({className:"block-window-repost pop-up-window",template:c,serialize:function(){return{user:this.model.toJSON(),content_id:this.data.contentId}},events:{"click .cancel":"deleted","submit form":"save","click #select_course_all":"selectCourseAll","click #select_conexus_all":"selectConexusAll"},initialize_:function(){this.model=new a},beforeRender_:function(){var e=this.model.get("count");if(e.course){var t=new s;t.addUrlParam({limit:1e3}),this.setViews({"#repost_course_ids":new o({collection:t})})}if(e.conexus){var n=new l;n.addUrlParam({limit:1e3}),this.setViews({"#repost_conexus_ids":new o({collection:n})})}},selectCourseAll:function(t){this.$(t.currentTarget).prop("checked")?this.$("#repost_course_ids :checkbox").each(function(){e(this).prop("checked",!0)}):this.$("#repost_course_ids :checkbox").each(function(){e(this).prop("checked",!1)})},selectConexusAll:function(t){this.$(t.currentTarget).prop("checked")?this.$("#repost_conexus_ids :checkbox").each(function(){e(this).prop("checked",!0)}):this.$("#repost_conexus_ids :checkbox").each(function(){e(this).prop("checked",!1)})},save:function(n){var o="",a=this.$("input:checked").length;if(this.$("input:checked").each(function(t){if("select_course_all"!==e(this).attr("id")&&"select_conexus_all"!==e(this).attr("id")){var n=a==t+1?".":", ";o+=e(this).siblings("label").html()+n}}),e(n.currentTarget).attr("locked"))return!1;e(n.currentTarget).attr("locked","locked");var s=this,l=s.$("form").serializeObject();if(t.isUndefined(l.relations)||(t.isUndefined(l.auth_assignment_group_ids)&&(l.auth_assignment_group_ids=[]),t.isUndefined(l.relations.course_ids)||(1==l.relations.course_ids.length&&l.auth_assignment_group_ids.push("course"),l.relations.course_ids.length>1&&l.auth_assignment_group_ids.push("course")),t.isUndefined(l.relations.conexus_ids)||(1==l.relations.conexus_ids.length&&l.auth_assignment_group_ids.push("conexus"),l.relations.conexus_ids.length>1&&l.auth_assignment_group_ids.push("conexus"))),t.isUndefined(l.auth_assignment_group_ids))return e(n.currentTarget).removeAttr("locked"),alert("Must select one."),!1;var c=new r;return c.save(l,{resultTrue:function(){i.get("function").alert("Reposted to "+o)},completeCallback:function(){e(n.currentTarget).removeAttr("locked")}}),!1}})}),define("text!templates/content/item.html",[],function(){return'<div class="block-post-item block_post_item">\r\n	<div class="main">\r\n		<div class="left l-float">\r\n			{{#user}}\r\n			<div class="block-post-user-avatar">\r\n				{{#avatar}}\r\n				<a class="avatar avatar-61 show_avatar link_bypass" href="{{view_url}}" title="{{display_name}}">\r\n					<img class="avatar_url_{{user.id}}" src="{{view_url}}" alt="{{display_name}}" />\r\n				</a>\r\n				{{/avatar}}\r\n				<a class="web-id" href="{{cn_number}}">{{cn_number}}</a>\r\n			</div>\r\n			{{/user}}\r\n            {{#user_position}}\r\n            <div class="block-user-position visibility-hidden content_operate">\r\n                <span class="text-hide icon-arrow {{#is_from_admin}}red-icon-arrow{{/is_from_admin}}{{^is_from_admin}}green-icon-arrow{{/is_from_admin}}">Arrow</span>\r\n                <div class="main {{#is_from_admin}}background-color-dd3b3b{{/is_from_admin}}{{^is_from_admin}}background-color-00AD06{{/is_from_admin}}">\r\n                    {{user_position}}\r\n                </div>\r\n            </div>\r\n            {{/user_position}}\r\n			<!-- <div class="block-post-anar-operate">\r\n				<a class="text-hide icon-arrow-gray-17-9 icon-arrow-gray-17-9-up" href="javascript:;">\r\n					Up\r\n				</a>\r\n				<div class="main">\r\n					<div class="center">\r\n						<span class="text-hide bg-anar-m">Anar</span>\r\n					</div>\r\n					<div class="bottom">\r\n						<a class="text-hide bt icon-plug-green" href="javascript:;">Add</a>\r\n						<span>12 Anar</span>\r\n						<div class="clear"></div>\r\n					</div>\r\n				</div>\r\n				<a class="text-hide icon-arrow-gray-17-9 icon-arrow-gray-17-9-down" href="javascript:;">\r\n					down\r\n				</a>\r\n			</div> -->\r\n		</div>\r\n		<div class="middle r-float">\r\n			<div class="title">\r\n				<div class="block-post-relations block_post_relations">\r\n					{{#user}}\r\n					<div class="item">\r\n                        <div class="title">\r\n                            <a class="show_card" href="{{cn_number}}" data-type="user" data-id="{{id}}">\r\n                                {{display_name}}\r\n                            </a>\r\n                            <span class="comma _comma">,</span>\r\n                            <div class="clear"></div>\r\n                        </div>\r\n					</div>\r\n					{{/user}}\r\n                    {{#count_course}}\r\n                        {{#first_course}}\r\n                        <div class="item">\r\n                            <div class="title">\r\n                                <a class="show_card" href="{{course_id}}" data-type="course" data-id="{{id}}">\r\n                                    {{name}}\r\n                                </a>\r\n                                <span class="comma _comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                        </div>\r\n                        {{/first_course}}\r\n                        {{#count_other_course}}\r\n                        <div class="item show_prompt">\r\n                            <div class="title">\r\n                                <a href="javscript:;">\r\n                                    {{count_other_course}} Others\r\n                                </a>\r\n                                <span class="comma _comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                            <div class="body first display-none _body">\r\n                                <div class="block-float-down-box block-float-down-left-box">\r\n                                    <span class="text-hide icon-float-tip-arrow">Arrow</span>\r\n                                    <a class=" text-hide bt-close-17 close_box" href="javascript:;" title="close">Close</a>\r\n                                    <div class="main">\r\n                                        <div class="top" style="min-width: 110px;">\r\n                                            <b>Other Courses</b>\r\n                                            <div class="clear"></div>\r\n                                        </div>\r\n                                        <div class="center">\r\n                                            <div class="list-wrap">\r\n                                                <ol class="list-two">\r\n                                                    {{#other_courses}}\r\n                                                    <li>\r\n                                                        <a class="text" href="{{course_id}}" title="{{name}}">\r\n                                                            {{name}}\r\n                                                        </a>\r\n                                                    </li>\r\n                                                     {{/other_courses}}\r\n                                                </ol>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {{/count_other_course}}\r\n                    {{/count_course}}\r\n                    {{#count_conexus}}\r\n                        {{#first_conexus}}\r\n                        <div class="item">\r\n                            <div class="title">\r\n                                <a class="show_card" href="{{conexus_id}}" data-type="conexus" data-id="{{id}}">\r\n                                   {{name}}\r\n                                </a>\r\n                                <span class="comma _comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                        </div>\r\n                        {{/first_conexus}}\r\n                        {{#count_other_conexus}}\r\n                        <div class="item show_prompt">\r\n                            <div class="title">\r\n                                <a href="javscript:;">\r\n                                    {{count_other_conexus}} Others\r\n                                </a>\r\n                                <span class="comma _comma">,</span>\r\n                                <div class="clear"></div>\r\n                            </div>\r\n                            <div class="body {{#count_other_course}}second{{/count_other_course}}{{^count_other_course}}first{{/count_other_course}} display-none _body">\r\n                                <div class="block-float-down-box {{#count_other_course}}block-float-down-right-box{{/count_other_course}}{{^count_other_course}}block-float-down-left-box{{/count_other_course}}">\r\n                                    <span class="text-hide icon-float-tip-arrow">Arrow</span>\r\n                                    <a class="text-hide bt-close-17 close_box" href="javascript:;" title="close">Close</a>\r\n                                    <div class="main">\r\n                                        <div class="top" style="min-width: 130px;">\r\n                                            <b>Other Conexus</b>\r\n                                            <div class="clear"></div>\r\n                                        </div>\r\n                                        <div class="center">\r\n                                            <div class="list-wrap">\r\n                                                <ol class="list-two">\r\n                                                    {{#other_conexuses}}\r\n                                                    <li>\r\n                                                        <a class="text" href="{{conexus_id}}" title="{{name}}">\r\n                                                            {{name}}\r\n                                                        </a>\r\n                                                    </li>\r\n                                                     {{/other_conexuses}}\r\n                                                </ol>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {{/count_other_conexus}}\r\n                    {{/count_conexus}}\r\n					{{#user}}\r\n						{{#profile}}\r\n							{{#position}}\r\n								{{#school_name}}\r\n								<div class="item">\r\n                                    <div class="title">\r\n                                        <a class="link_bypass" {{#web_address}}href="{{web_address}}"{{/web_address}} target="_blank" title="{{school_name}}">\r\n                                            {{school_name}}\r\n                                        </a>\r\n                                        <span class="comma _comma">,</span>\r\n                                        <div class="clear"></div>\r\n                                    </div>\r\n								</div>\r\n								{{/school_name}}\r\n							{{/position}}\r\n						{{/profile}}\r\n						{{#country}}\r\n                        {{#flag_url}}\r\n                        <a class="r-float flag-b">\r\n							<img src="{{flag_url}}" title="{{name}}" alt="{{name}}" />\r\n						</a>\r\n                        {{/flag_url}}\r\n						{{/country}}\r\n					{{/user}}\r\n					<div class="clear"></div>\r\n				</div>\r\n			</div>\r\n			<div class="info">\r\n				<div class="block-post-info">\r\n					<p>\r\n						Posted <b>{{display_time}}</b>{{#source.is_mobile}}{{#source.device}} from {{source.device}}{{/source.device}}{{/source.is_mobile}}{{#count}}{{#view}}, Shown <b>{{view}} time{{#additional.count_view_more_then_one}}s{{/additional.count_view_more_then_one}}</b>{{/view}}{{/count}}\r\n					</p>\r\n					{{#original_content}}\r\n                        {{#id}}\r\n                        <p>\r\n                            Repost: {{#user}}<a class="show_card" href="{{cn_number}}" data-type="user" data-id="{{id}}">{{display_name}}</a>{{/user}} {{#count}}(<b>{{repost}}</b>{{/count}}) on {{display_time}}\r\n                        </p>\r\n                        {{/id}}\r\n					{{/original_content}}\r\n				</div>\r\n			</div>\r\n            <div class="block_content_summary">\r\n                <div class="body block_content_wrap">\r\n\r\n                </div>\r\n                <div class="block-post-item-attachments item_attachments_image_and_video">\r\n                    <div class="main">\r\n                        {{#count_picture}}\r\n                        <div class="image-wrap">\r\n                            {{#is_pictures}}\r\n                                <div class="gallery-box">\r\n                                    <div class="main">\r\n                                        {{#pictures}}\r\n                                            <a class="gallery_showing_img link_bypass" href="{{view_url}}"  rel="gallery_{{content_id}}" data-id="{{id}}">\r\n                                                <img src="{{view_url}}" alt="{{name}}" />\r\n                                            </a>\r\n                                        {{/pictures}}\r\n                                    </div>\r\n                                    <div class="foot">\r\n                                        <ul class="gallery_nav_list">\r\n                                            {{#pictures}}\r\n                                            <li class="gallery_nav_item">\r\n                                                <a class="gallery_nav_img" href="javascript:;" data-id="{{id}}">\r\n                                                    <img src="{{view_url}}" alt="{{name}}" />\r\n                                                </a>\r\n                                            </li>\r\n                                            {{/pictures}}\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            {{/is_pictures}}\r\n                            {{^is_pictures}}\r\n                                {{#is_display_picture}}\r\n                                <div class="image-box">\r\n                                    {{#picture}}\r\n                                    <a class="gallery_showing_img link_bypass" href="{{view_url}}">\r\n                                        <img src="{{view_url}}" alt="{{name}}" />\r\n                                    </a>\r\n                                    {{/picture}}\r\n                                </div>\r\n                                {{/is_display_picture}}\r\n                            {{/is_pictures}}\r\n                        </div>\r\n                        {{/count_picture}}\r\n\r\n                        {{#count_video}}\r\n                        <div class="vieo-wrap">\r\n                            <div class="block-vieo-wrap">\r\n                                {{#videos}}\r\n                                <div class="main">\r\n                                    <div class="center">\r\n                                        {{#img_url}}<img src="{{img_url}}"/> {{/img_url}}\r\n                                        <a class="show_video link_bypass" href="{{view_url}}">\r\n                                            Start\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                                {{/videos}}\r\n                            </div>\r\n                        </div>\r\n                        {{/count_video}}\r\n                        <div class="clear"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            {{#count_attachment}}\r\n            <div class="block-post-item-attachments item_attachments_file_and_link">\r\n                <div class="foot">\r\n                    <div class="file-link-wrap">\r\n                        <ul>\r\n                            {{#count_link}}\r\n                            <li class="_item">\r\n                                <div class="head">\r\n                                    <a class="show_attachment" href="javascript;;">\r\n                                        (<b>{{count_link}}</b>)\r\n                                        {{#is_links}}Links{{/is_links}}{{^is_links}}Link{{/is_links}}\r\n                                    </a>\r\n                                </div>\r\n                                <div class="main display-none _main">\r\n                                    <ol>\r\n                                        {{#links}}\r\n                                        <li>\r\n                                            <a class="link_bypass" href="{{view_url}}" title="{{display_url}}" target="_blank">{{display_url}}</a>\r\n                                        </li>\r\n                                        {{/links}}\r\n                                    </ol>\r\n                                </div>\r\n                            </li>\r\n                            {{/count_link}}\r\n                            {{#count_file}}\r\n                            <li class="_item">\r\n                                <div class="head">\r\n                                    <a class="show_attachment" href="javascript;;">\r\n                                        (<b>{{count_file}}</b>)\r\n                                        {{#is_files}}Files{{/is_files}}{{^is_files}}File{{/is_files}}\r\n                                    </a>\r\n                                </div>\r\n                                <div class="main display-none _main">\r\n                                    <ol>\r\n                                        {{#attachments}}\r\n                                        <li>\r\n                                            <a class="link_bypass" href="{{download_url}}" title="{{name}}" target="_blank">{{name}}</a>\r\n                                        </li>\r\n                                        {{/attachments}}\r\n                                    </ol>\r\n                                </div>\r\n                            </li>\r\n                            {{/count_file}}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {{/count_attachment}}\r\n            \r\n			<div class="operate visibility-hidden content_operate">\r\n				<div class="block-post-operate">\r\n					<ul>\r\n						{{#is_repostable}}\r\n						<li>\r\n							<a class="laod_repost_window" href="javascript:;">Repost</a>\r\n							<span>\r\n                            ({{#count.repost}}<b class="font-bold">{{count.repost}}</b>{{/count.repost}}{{^count.repost}}{{count.repost}}{{/count.repost}})\r\n                            </span>,\r\n						</li>\r\n						{{/is_repostable}}\r\n						<li>\r\n							<a class="load_send_email_window" href="javascript:;" data-id="{{user.id}}">Email</a>,\r\n						</li>\r\n                        {{#is_remember_list}}\r\n						<li>\r\n							<a class="clear_remember" href="javascript:;">Clear RememberIt</a>,\r\n						</li>\r\n                        {{/is_remember_list}}\r\n                        {{^is_remember_list}}\r\n						<li>\r\n							<a class="remember_it" href="javascript:;">RememberIt</a>\r\n							<span class="remember_it_stars" ></span>\r\n                            <a href="javascript:;" class="remember_it_tip show_remember_it_tip">What is RememberIt ?</a>,\r\n						</li>\r\n                        {{/is_remember_list}}\r\n                        <li>\r\n							<a class="laod_translate_window" href="javascript:;">Translate</a>{{#is_deletable}},{{/is_deletable}}\r\n						</li>\r\n						{{#is_deletable}}\r\n						<li>\r\n							<a class="delete" href="javascript:;">Delete</a>{{#can_edit}}{{#is_editable}},{{/is_editable}}{{/can_edit}}\r\n						</li>\r\n						{{/is_deletable}}\r\n                        {{#can_edit}}\r\n                            {{#is_editable}}\r\n                            <li>\r\n                                <a class="edit" href="javascript:;">Edit</a>\r\n                            </li>\r\n                            {{/is_editable}}\r\n                        {{/can_edit}}\r\n					</ul>\r\n				</div>\r\n			</div>\r\n			<div class="comment block-post-comment">\r\n				<div class="main">\r\n					<div class="top content_count">\r\n						\r\n					</div>\r\n					<div class="center">\r\n						<div class="block-post-comment-list block_post_comment_list">\r\n							\r\n						</div>\r\n                        <div class="block_post_reflection" style="display: none;">\r\n							\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="clear"></div>\r\n	</div>\r\n</div>'
}),define("views/content/item",["jquery","underscore","backbone","tools/pop-up-window","views/content/relation/comments","views/content/relation/content-count","views/content/relation/reflection","views/common/pop-up-window/content-forms","views/content/item/master","collections/content/comments","modules/content/content-remember","modules/content/comment","views/common/video-player","views/common/float-box/float-box-top","views/content/common/rememberit-tip","views/common/pop-up-window/translate","views/common/pop-up-window/repost","text!templates/content/item.html"],function(e,t,n,i,o,a,r,s,l,c,d,u,m,h,p,f,v,_){var g,b=i.get("function");return n.View.extend({template:_,tagName:"li",initialize:function(e){this.model.view=this,this.view=e.view,this.initContentRemember()},events:{"click .gallery_nav_img":"showImage","click .show_attachment":"showAttachemnt","click .laod_translate_window":"laodTranslateWindow","click .laod_repost_window":"laodRepostWindow","click .remember_it":"rememberIt","click .delete":"deleted","click .edit":"edit","click .show_video":"showVideo","click .show_remember_it_tip":"showRememberItTipFloatBox","mouseenter .block_post_item":"displayOperate","mouseleave .block_post_item":"hideOperate","mouseenter .show_prompt":"mouseenterToDisplayPrompt","mouseleave .show_prompt":"mouseleaveToHidePrompt","click .close_box":"clickToHidePrompt"},serialize:function(){var e=this.model.toJSON();return"sharelink"===e.type?(e.is_pictures=e.count_picture>2?!0:!1,e.is_display_picture=e.count_picture>1?!0:!1,e.picture=t.first(e.pictures)):(e.is_pictures=e.count_picture>1?!0:!1,e.picture=t.first(e.pictures),e.is_display_picture=!0),e},beforeRender:function(){var e=this,n=new c,i=this.model.get("type");this.setViews(t.extend({".block_post_comment_list":new o({collection:n,data:{content:this.model}}),".content_count":new a({model:this.model,collection:n,parent:e}),".block_post_reflection":new r({contentId:this.model.get("id"),data:{model:e.model},_model:u,collection:n})},t.isUndefined(l[i])?{}:{".block_content_wrap":new l[i]({model:this.model})})),this.model.get("count_comment")&&n.reset(this.model.get("comments"))},afterRender:function(){var e=this.model.get("count_picture");if(e>1){this.$(".gallery_nav_item").outerWidth();var t=46*e;t&&this.$(".gallery_nav_list").width(t)}this.$(".block_post_relations").find("._comma").last().remove();var n=this.model.get("count").remember;this.$(".remember_it").data("remember",n),this.printRememberStars(n)},displayReflectInput:function(){var e=this;this.$el.attr("data-mouse-status","in"),setTimeout(function(){"in"===e.$el.attr("data-mouse-status")&&e.$(".block_post_reflection").is(":hidden")&&e.$(".block_post_reflection").fadeIn()},2e3)},hideReflectInput:function(){var e=this;this.$el.attr("data-mouse-status","out"),setTimeout(function(){"out"===e.$el.attr("data-mouse-status")&&e.$(".block_post_reflection").is(":visible")&&e.$(".block_post_reflection").fadeOut()},1e3)},showVideo:function(e){return new m({target:e.currentTarget,autoStart:!0}).popup(),!1},edit:function(){var e=this,t=s.get(this.model.get("type"));b.open(new t({model:e.model,functions:{afterSaveCallback:function(t){e.model.set(t.toJSON(),{silent:!0}),e.render()}}}).render().view.el)},deleted:function(){var e=this;b.confirm({content:"Are you sure you want to delete this post?",yesCallBack:function(){e.model.deleted()}})},showImage:function(e){var t=this;this.$(".gallery_showing_img:visible").fadeOut("fast",function(){t.$('.gallery_showing_img[data-id="'+t.$(e.currentTarget).attr("data-id")+'"]').fadeIn("fast")})},showAttachemnt:function(t){var n=e(t.currentTarget),i=n.data("show");return i?(n.data("show",!1),n.closest("._item").find("._main").hide()):(n.data("show",!0),n.closest("._item").find("._main").show()),!1},laodTranslateWindow:function(){var t=this;b.open(new f({data:{text:e.trim(t.$(".translate_text").text())}}).render().view.el)},laodRepostWindow:function(){var e=this;b.open(new v({data:{contentId:e.model.get("id")}}).render().view.el)},initContentRemember:function(){this.content_remember=new d({content_id:this.model.get("id")})},rememberIt:function(t){var n=this,i=e(t.currentTarget);if("locked"!=i.data("locked")){var o=i.data("remember");i.data("locked","locked"),this.content_remember.remember(o,{resultTrue:function(){var e=3==o?0:o+1;0==e?n.initContentRemember():n.$(".remember_it_tip").show(),i.data("remember",e),n.printRememberStars(e),i.removeData("locked")}})}else b.alert("Sorry, you cannot click too frequently.")},printRememberStars:function(e){var t=0;if(0==e)this.$(".remember_it_tip").hide();else{for(var n=0,i=e;i>n;n++)t++;this.$(".remember_it_tip").show()}this.$(".remember_it_stars").html("("+t+")")},displayOperate:function(e){this.$(e.currentTarget).find(".content_operate").css("visibility","visible"),this.displayReflectInput()},hideOperate:function(e){this.$(e.currentTarget).find(".content_operate").css("visibility","hidden"),this.hideReflectInput()},mouseenterToDisplayPrompt:function(e){this.$(e.currentTarget).find("._body").show()},mouseleaveToHidePrompt:function(t){this.hidePrompt(e(t.currentTarget))},clickToHidePrompt:function(t){this.hidePrompt(e(t.currentTarget).closest(".show_prompt"))},hidePrompt:function(e){e.find("._body").hide()},showRememberItTipFloatBox:function(t){g=new h({view:new p,target:e(t.currentTarget),arrow:{offset:40}}),g.show(t)},hideRememberItTipFloatBox:function(){g&&g.close()}})}),define("text!templates/content/list.html",[],function(){return'<div class="main">\r\n	<ul id="block_post_list_main">\r\n		<div class="block-loading block-horizontal-loading">\r\n            <img src="img/com/frontend/loading/horizontal.gif" alt="Loading" />\r\n        </div>\r\n	</ul>\r\n</div>'}),define("views/content/list",["jquery","underscore","backbone","views/content/item","views/common/error-tip","views/common/more-operation","text!templates/content/list.html"],function(e,t,n,i,o,a,r){return n.View.extend({template:r,className:"block-post-list",initialize:function(e){t.bindAll(this,"initialize_","addOne","addAll","appendOne","prependOne"),this.view=e.view,this.collection.on("reset",this.addAll,this),this.collection.on("add",this.appendOne,this),this.collection.on("unshift",this.prependOne,this),this.collection.view=this,this.no_message="No Posts",t.has(e,"data")&&t.has(e.data,"no_message")&&(this.no_message=e.data.no_message),this.initialize_()},initialize_:function(){},afterRender:function(){var e=this;this.collection.fetch({resultTrue:function(t){e.view.parent.$("#block_post_more_operation").html(new a({collection:t,view:{removeTemplateNoMore:!1}}).render().view.el)},resultFalse:function(n,i){var a="";t.each(n,function(e){a+=e+"<br />"});var r="";r=i.result?e.no_message:a,e.collection.view.$("#block_post_list_main").html(new o({data:{text:e.no_message}}).render().view.el)}})},addAll:function(){this.$("#block_post_list_main").empty(),this.collection.each(this.appendOne)},addOne:function(e,t){var n=this;e.get("type");var o=n.$("#block_post_list_main"),a=new i({model:e}).render().view.el;t?o.append(a):o.prepend(a)},appendOne:function(e){this.addOne(e,!0)},prependOne:function(e){this.addOne(e,!1)}})}),define("text!templates/content/main.html",[],function(){return'<div class="head" id="block_post_tools">\r\n	\r\n</div>\r\n\r\n<!-- posts -->\r\n<div class="main">\r\n	<div class="block-post-main">\r\n		<div class="head" id="block_post_nav">\r\n			\r\n		</div>\r\n		<div class="main" id="block_post_list">\r\n			\r\n		</div>\r\n		<div class="foot" id="block_post_more_operation">\r\n			\r\n		</div>\r\n	</div>\r\n</div>\r\n<!-- /post -->'}),define("views/user/home/main",["jquery","underscore","backbone","views/common/post-tools/index/user","views/content/nav/home","views/content/list","collections/content/content-list-collections","modules/me","text!templates/content/main.html"],function(e,t,n,i,o,a,r,s,l){var c=r.get("Content");return n.View.extend({className:"content-web content-fixed-width",template:l,initialize:function(){this.collection=new c,this.collection.setUrlParamOrder("most_new"),this.me=new s},beforeRender:function(){this.setViews({"#block_post_tools":new i({model:this.me,collection:this.collection}),"#block_post_nav":new o({model:this.me,collection:this.collection}),"#block_post_list":new a({model:this.me,collection:this.collection,view:{parent:this}})})}})}),define("views/user/home/index",["views/layout/home","views/user/common/sidebar","views/user/home/main"],function(e,t,n){return function(){e.setViews({"#block_sidebar":new t,"#block_content":new n}).render()}});